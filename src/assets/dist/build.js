webpackJsonp([4],{1:function(e,t,n){function r(e,t){for(var n=e.toLowerCase().split(/-|\+/),r={ctrlKey:"",altKey:"",shiftKey:""},e=n[n.length-1],o=0;o<n.length-1;o++)switch(n[o]){case"c":r.ctrlKey="c-";break;case"a":r.altKey="a-";break;case"s":r.shiftKey="s-"}e=r.ctrlKey+r.altKey+r.shiftKey+e,p[e]=t}function o(e,t,n){d[e]=t,l('[data-action="'+e+'"]').click(function(e){return e.preventDefault(),e.stopPropagation(),t(),!1}),void 0!==n&&n.forEach(function(t){f.hasOwnProperty(t)||(f[t]=[]),f[t].push(e)})}function a(e){d[e]()}function i(e){f.hasOwnProperty(e)&&f[e].forEach(function(e){c(e)})}function s(e){f.hasOwnProperty(e)&&f[e].forEach(function(e){u(e)})}function c(e){"string"==typeof e?l('[data-action="'+e+'"]').attr("disabled",!1):e.forEach(c)}function u(e){"string"==typeof e?l('[data-action="'+e+'"]').attr("disabled",!0):e.forEach(u)}var l=n(0);t.define=o,t.enable=c,t.disable=u,t.enableGroup=i,t.disableGroup=s,t.activate=a,t.bind=r;var d={},f={},p={};l(window).keydown(function(e){if(!e.defaultPrevented){var t="";return e.ctrlKey&&(t+="c-"),e.altKey&&(t+="a-"),e.shiftKey&&(t+="s-"),e.metaKey&&(t+="m-"),t+=e.key.toLowerCase(),p.hasOwnProperty(t)?(a(p[t]),!1):void 0}})},2:function(e,t,n){var r=n(0),o=n(4);r.ajaxSetup({headers:{"X-Csrf-Token":o.get("csrf_token")}}),t.shake=function(e,t){t=void 0===t?10:t;var n=2*t;return r(e).width(r(e).width()).animate({marginLeft:"+="+t},50).animate({marginLeft:"-="+n},50).animate({marginLeft:"+="+n},50).animate({marginLeft:"-="+t},50).queue(function(){r(e).css("width","").css("margin-left","").finish()})},t.onLongPress=function(e,t){var n=!1,r=function(e){n=!0},o=function(e){n=!1};e.addEventListener("touchstart",r),e.addEventListener("touchend",o),e.addEventListener("touchcancel",o),e.addEventListener("touchmove",o),e.addEventListener("contextmenu",function(e){if(n)return t(e)})},t.setProgress=function(e,t,n){var r=e.children[0],o=e.children[1];t=Math.floor(t),e.className=t>=100?"progress success":"progress active",r.style.width=t+"%",r.innerText=t+"%",void 0!==n&&(o.innerText=n)},t.handleLogin=function(e){var n=r("body").data("path").replace(/\/$/,"");r("#login").find("input").prop("disabled",!1),r("#login-frame").show(),r("#login").submit(function(){return r(this).find("input").prop("disabled",!0),r.ajax({url:n,method:"post",data:{username:r("#login-username").val(),password:r("#login-password").val(),remember:r("#login-remember").is(":checked")?{remember:"remember"}:null},success:function(){r("#login-frame").css({overflow:"hidden",whiteSpace:"no-wrap"}).animate({width:0},function(){r(this).hide().css({overflow:"",whiteSpace:"",width:""}),r("#login").off("submit"),r("#login-password").val(""),e()})},error:function(e){r("#login").find("input").prop("disabled",!1),t.shake(r("#login-frame")),r("#login-username").select(),r("#login-password").val("")},global:!1}),!1})},t.handleError=function(e,n,a,i){var s=o.get("csrf_token");return a.headers["X-Csrf-Token"]!==s?(r.ajaxSetup({headers:{"X-Csrf-Token":s}}),a.headers["X-Csrf-Token"]=s,void r.ajax(a)):401===n.status?(r("#login-overlay").show(),""===r("#login-username").val()?r("#login-username").focus():r("#login-password").focus(),void t.handleLogin(function(){r("#login-overlay").hide(),r.ajax(a)})):(void 0!==n.responseJSON?alert(n.responseJSON.message):alert(n.responseText),t.shake(r("main > .frame")),void console.log(e,n,a,i))}},4:function(e,t,n){var r,o;!function(a){var i=!1;if(r=a,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o),i=!0,e.exports=a(),i=!0,!i){var s=window.Cookies,c=window.Cookies=a();c.noConflict=function(){return window.Cookies=s,c}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,a){var i;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},r.defaults,a),"number"==typeof a.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{i=JSON.stringify(o),/^[\{\[]/.test(i)&&(o=i)}catch(e){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var c="";for(var u in a)a[u]&&(c+="; "+u,!0!==a[u]&&(c+="="+a[u]));return document.cookie=t+"="+o+c}t||(i={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<l.length;f++){var p=l[f].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=p[0].replace(d,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(t===v){i=h;break}t||(i[v]=h)}catch(e){}}return i}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},5:function(e,t){function n(e){var e=e.replace(/\/[^\/]+$/,"");return""===e?"/":e}function r(e){return e.replace(/^.*\//,"")}function o(e,t){e=e.trim(),e.startsWith("/")||(e=t+"/"+e);for(var n=e.split("/"),r=[],o=0;o<n.length;o++)".."===n[o]?r.length>=1&&r.pop():""!==n[o]&&"."!==n[o]&&r.push(n[o]);return"/"+r.join("/")}t.dirName=n,t.fileName=r,t.convert=o},51:function(e,t,n){function r(){d=!1,i.disable("build"),i.enable("cancel");var e=performance.now();s.setProgress(l,0,"Building..."),a("#status-history").val("");var t=0,n="Building...",r=function(e){t=e,s.setProgress(l,t,n)},o=function(r,o){n=r,s.setProgress(l,t,n);var i=(performance.now()-e)/1e3,c=i.toFixed(3)+": "+n;a("#status-history").val(c+"\n"+a("#status-history").val())},f=function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){3!==this.readyState&&4!==this.readyState||this.status>=200&&this.status<400&&this.responseText&&t(this.responseText,this.readyState,this.status)},n.send("request_token="+u)},p=!1,h=function(){if(!d){var e=0;f(c+"/api/build",function(t,n,a){for(var s=t.split(/[\n\r]/),c=e;c<s.length;c++){var u=s[c].match(/^([a-zA-Z]+): *(.*)$/);if(null!==u){e++;var l=u[1],d=u[2];switch(l){case"done":return r(100),p=!0,i.enable("build"),void i.disable("cancel");case"error":return p=!0,void o(d);case"status":o(d);break;case"progress":r(d)}}}p||4!==n||(0===e?setTimeout(h,2e3):h())})}};h()}function o(){d=!0,a.ajax({url:c+"/api/delete",method:"post",data:{request_token:u,path:"/build/.build.json"},success:function(){i.enable("build"),i.disable("cancel")}})}var a=n(0),i=n(1),s=(n(5),n(2)),c=a("body").data("path").replace(/\/$/,""),u=a("#build").data("token"),l=a("#build-progress")[0],d=!1;a(document).ajaxError(s.handleError),i.define("build",r),i.define("cancel",o)}},[51]);
//# sourceMappingURL=build.js.map
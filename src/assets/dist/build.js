webpackJsonp([4],{2:function(e,t,n){var a=n(0);t.shake=function(e,t){t="undefined"==typeof t?10:t;var n=2*t;return a(e).width(a(e).width()).animate({marginLeft:"+="+t},50).animate({marginLeft:"-="+n},50).animate({marginLeft:"+="+n},50).animate({marginLeft:"-="+t},50).queue(function(){a(e).css("width","").css("margin-left","").finish()})},t.onLongPress=function(e,t){var n=!1,a=function(e){n=!0},r=function(e){n=!1};e.addEventListener("touchstart",a),e.addEventListener("touchend",r),e.addEventListener("touchcancel",r),e.addEventListener("touchmove",r),e.addEventListener("contextmenu",function(e){if(n)return t(e)})},t.setProgress=function(e,t,n){var a=e.children[0],r=e.children[1];t=Math.floor(t),t>=100?e.className="progress success":e.className="progress active",a.style.width=t+"%",a.innerText=t+"%","undefined"!=typeof n&&(r.innerText=n)},t.handleLogin=function(e){var n=a("body").data("path").replace(/\/$/,"");a("#login").find("input").prop("disabled",!1),a("#login").submit(function(){var r=a(this).find('[name="request_token"]').val();return a(this).find("input").prop("disabled",!0),a.ajax({url:n,method:"post",data:{request_token:r,username:a("#username").val(),password:a("#password").val(),remember:a("#remember_remember").is(":checked")?{remember:"remember"}:null},success:function(){a("#login").off("submit"),a("#password").val(""),e()},error:function(e){a("#login").find("input").prop("disabled",!1),t.shake(a(".login-frame")),a("#username").select(),a("#password").val("")},global:!1}),!1})},t.handleError=function(e,n,r,i){return 401===n.status?(a("#login-overlay").show(),a("#password").focus(),void t.handleLogin(function(){a("#login-overlay").hide(),a.ajax(r)})):("undefined"!=typeof n.responseJSON?alert(n.responseJSON.message):alert(n.responseText),t.shake(a("main > .frame")),void console.log(e,n,r,i))}},3:function(e,t,n){function a(e,t){for(var n=e.toLowerCase().split(/-|\+/),a={ctrlKey:"",altKey:"",shiftKey:""},e=n[n.length-1],r=0;r<n.length-1;r++)switch(n[r]){case"c":a.ctrlKey="c-";break;case"a":a.altKey="a-";break;case"s":a.shiftKey="s-"}e=a.ctrlKey+a.altKey+a.shiftKey+e,p[e]=t}function r(e,t,n){l[e]=t,d('[data-action="'+e+'"]').click(function(e){return e.preventDefault(),e.stopPropagation(),t(),!1}),"undefined"!=typeof n&&n.forEach(function(t){f.hasOwnProperty(t)||(f[t]=[]),f[t].push(e)})}function i(e){l[e]()}function s(e){f.hasOwnProperty(e)&&f[e].forEach(function(e){c(e)})}function o(e){f.hasOwnProperty(e)&&f[e].forEach(function(e){u(e)})}function c(e){"string"==typeof e?d('[data-action="'+e+'"]').attr("disabled",!1):e.forEach(c)}function u(e){"string"==typeof e?d('[data-action="'+e+'"]').attr("disabled",!0):e.forEach(u)}var d=n(0);t.define=r,t.enable=c,t.disable=u,t.enableGroup=s,t.disableGroup=o,t.activate=i,t.bind=a;var l={},f={},p={};d(window).keydown(function(e){if(!e.defaultPrevented){var t="";return e.ctrlKey&&(t+="c-"),e.altKey&&(t+="a-"),e.shiftKey&&(t+="s-"),e.metaKey&&(t+="m-"),t+=e.key.toLowerCase(),console.log("pressed "+t),p.hasOwnProperty(t)?(i(p[t]),!1):void 0}})},4:function(e,t){function n(e){var e=e.replace(/\/[^\/]+$/,"");return""===e?"/":e}function a(e){return e.replace(/^.*\//,"")}function r(e,t){e=e.trim(),e.startsWith("/")||(e=t+"/"+e);for(var n=e.split("/"),a=[],r=0;r<n.length;r++)".."===n[r]?a.length>=1&&a.pop():""!==n[r]&&"."!==n[r]&&a.push(n[r]);return"/"+a.join("/")}t.dirName=n,t.fileName=a,t.convert=r},49:function(e,t,n){function a(){l=!1,s.disable("build"),s.enable("cancel"),o.setProgress(d,0,"Building...");var e=0,t="Building...",n=function(n){e=n,o.setProgress(d,e,t)},a=function(n,a){t=n,o.setProgress(d,e,t)},r=function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onreadystatechange=function(){3!==this.readyState&&4!==this.readyState||this.status>=200&&this.status<400&&this.responseText&&t(this.responseText,this.readyState,this.status)},n.send("request_token="+u)},i=!1,f=function(){if(!l){var e=0;r(c+"/api/build",function(t,r,o){for(var c=t.split(/[\n\r]/),u=e;u<c.length;u++){var d=c[u].match(/^([a-zA-Z]+): *(.*)$/);if(null!==d){e++;var l=d[1],p=d[2];switch(l){case"done":return n(100),i=!0,s.enable("build"),void s.disable("cancel");case"error":return i=!0,void a(p,!0);case"status":a(p,!1);break;case"progress":n(p)}}}i||4!==r||(0===e?setTimeout(f,2e3):f())})}};f()}function r(){l=!0,i.ajax({url:c+"/api/delete",method:"post",data:{request_token:u,path:"/build/.build.json"},success:function(){s.enable("build"),s.disable("cancel")}})}var i=n(0),s=n(3),o=(n(4),n(2)),c=i("body").data("path").replace(/\/$/,""),u=i("#build").data("token"),d=i("#build-progress")[0],l=!1;i(document).ajaxError(o.handleError),s.define("build",a),s.define("cancel",r)}},[49]);
//# sourceMappingURL=build.js.map
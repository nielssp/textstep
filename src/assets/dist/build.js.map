{"version":3,"sources":["webpack:///dist/build.js","webpack:///./common/ui.js?8332**","webpack:///./common/actions.js?e0fb***","webpack:///./common/paths.js?9de7**","webpack:///./build.js"],"names":["webpackJsonp","2","module","exports","__webpack_require__","$","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","path","data","replace","find","prop","submit","token","this","val","ajax","url","method","request_token","username","password","remember","is","success","off","error","xhr","select","global","handleError","event","settings","thrownError","show","focus","hide","responseJSON","alert","message","responseText","console","log","3","bind","key","action","parts","toLowerCase","split","ctrlKey","altKey","shiftKey","length","i","keyMap","defineAction","name","groups","actions","click","preventDefault","stopPropagation","forEach","group","actionGroups","hasOwnProperty","push","activate","enableGroup","enable","disableGroup","disable","attr","define","window","keydown","defaultPrevented","metaKey","4","dirName","fileName","convert","cwd","trim","startsWith","names","stack","pop","join","49","build","ui","progressBar","PATH","TOKEN","upload","onprogress","lengthComputable","pct","loaded","total"],"mappings":"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","file":"dist/build.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 2:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login').submit(function () {\n        var token = $(this).find('[name=\"request_token\"]').val();\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                request_token: token,\n                username: $('#username').val(),\n                password: $('#password').val(),\n                remember: $('#remember_remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login').off('submit');\n                $('#password').val('');\n                done();\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('.login-frame'));\n                $('#username').select();\n                $('#password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n        $('#password').focus();\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n/***/ },\n\n/***/ 4:\n/***/ function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ },\n\n/***/ 49:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar actions = __webpack_require__(3);\nvar paths = __webpack_require__(4);\nvar ui = __webpack_require__(2);\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar TOKEN = $('#build').data('token');\n\nvar progressBar = $('#build-progress')[0];\n\nfunction build()\n{\n    ui.setProgress(progressBar, 0, 'Building...');\n    $.ajax({\n        url: PATH + '/api/build',\n        method: 'post',\n        data: {request_token: TOKEN},\n        progress: function (xhr) {\n            xhr.upload.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            }\n            xhr.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = 50 + e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            };\n        },\n        success: function (data) {\n            ui.setProgress(progressBar, 100, 'Done');\n        },\n        error: function () {\n            ui.shake($('.frame'));\n            ui.setProgress(progressBar, 100, 'Error');\n        }\n    });\n}\n\nactions.define('build', build);\n\n/***/ }\n\n},[49]);\n\n\n// WEBPACK FOOTER //\n// dist/build.js","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login').submit(function () {\n        var token = $(this).find('[name=\"request_token\"]').val();\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                request_token: token,\n                username: $('#username').val(),\n                password: $('#password').val(),\n                remember: $('#remember_remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login').off('submit');\n                $('#password').val('');\n                done();\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('.login-frame'));\n                $('#username').select();\n                $('#password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n        $('#password').focus();\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 2\n// module chunks = 0 1 2 4 5 6 7","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/actions.js\n// module id = 3\n// module chunks = 0 1 2 3 4 5","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 4\n// module chunks = 0 1 3 4","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar actions = require('./common/actions');\nvar paths = require('./common/paths');\nvar ui = require('./common/ui');\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar TOKEN = $('#build').data('token');\n\nvar progressBar = $('#build-progress')[0];\n\nfunction build()\n{\n    ui.setProgress(progressBar, 0, 'Building...');\n    $.ajax({\n        url: PATH + '/api/build',\n        method: 'post',\n        data: {request_token: TOKEN},\n        progress: function (xhr) {\n            xhr.upload.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            }\n            xhr.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = 50 + e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            };\n        },\n        success: function (data) {\n            ui.setProgress(progressBar, 100, 'Done');\n        },\n        error: function () {\n            ui.shake($('.frame'));\n            ui.setProgress(progressBar, 100, 'Error');\n        }\n    });\n}\n\nactions.define('build', build);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build.js\n// module id = 49\n// module chunks = 4"],"sourceRoot":""}
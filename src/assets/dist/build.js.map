{"version":3,"sources":["webpack:///dist/build.js","webpack:///./common/actions.js?e0fb***","webpack:///./common/ui.js?8332**","webpack:///./common/paths.js?9de7**","webpack:///./build.js"],"names":["webpackJsonp","2","module","exports","__webpack_require__","bind","key","action","parts","toLowerCase","split","e","ctrlKey","altKey","shiftKey","length","i","keyMap","defineAction","name","callback","actions","$","click","preventDefault","stopPropagation","activate","enable","attr","forEach","disable","define","window","keydown","defaultPrevented","console","log","hasOwnProperty","24","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","touching","start","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleError","event","jqxhr","settings","thrownError","responseJSON","alert","message","responseText","3","dirName","path","replace","fileName","convert","cwd","trim","startsWith","names","stack","pop","push","join","49","build","ui","progressBar","ajax","url","PATH","method","data","request_token","TOKEN","xhr","upload","onprogress","lengthComputable","pct","loaded","total","success","error"],"mappings":"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","file":"dist/build.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 2:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(1);\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n/***/ },\n\n/***/ 24:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(1);\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleError = function (event, jqxhr, settings, thrownError) {\n    if (typeof jqxhr.responseJSON !== 'undefined') {\n        alert(jqxhr.responseJSON.message);\n    } else {\n        alert(jqxhr.responseText);\n    }\n    exports.shake($('.frame'));\n    console.log(event, jqxhr, settings, thrownError);\n};\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ },\n\n/***/ 49:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(1);\nvar actions = __webpack_require__(2);\nvar paths = __webpack_require__(3);\nvar ui = __webpack_require__(24);\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar TOKEN = $('#build').data('token');\n\nvar progressBar = $('#build-progress')[0];\n\nfunction build()\n{\n    ui.setProgress(progressBar, 0, 'Building...');\n    $.ajax({\n        url: PATH + '/api/build',\n        method: 'post',\n        data: {request_token: TOKEN},\n        progress: function (xhr) {\n            xhr.upload.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            }\n            xhr.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = 50 + e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            };\n        },\n        success: function (data) {\n            ui.setProgress(progressBar, 100, 'Done');\n        },\n        error: function () {\n            ui.shake($('.frame'));\n            ui.setProgress(progressBar, 100, 'Error');\n        }\n    });\n}\n\nactions.define('build', build);\n\n/***/ }\n\n},[49]);\n\n\n// WEBPACK FOOTER //\n// dist/build.js","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/actions.js\n// module id = 2\n// module chunks = 0 1 2 3 4 5","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleError = function (event, jqxhr, settings, thrownError) {\n    if (typeof jqxhr.responseJSON !== 'undefined') {\n        alert(jqxhr.responseJSON.message);\n    } else {\n        alert(jqxhr.responseText);\n    }\n    exports.shake($('.frame'));\n    console.log(event, jqxhr, settings, thrownError);\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 24\n// module chunks = 0 1 2 4 5","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 3\n// module chunks = 0 1 3 4","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar actions = require('./common/actions');\nvar paths = require('./common/paths');\nvar ui = require('./common/ui');\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar TOKEN = $('#build').data('token');\n\nvar progressBar = $('#build-progress')[0];\n\nfunction build()\n{\n    ui.setProgress(progressBar, 0, 'Building...');\n    $.ajax({\n        url: PATH + '/api/build',\n        method: 'post',\n        data: {request_token: TOKEN},\n        progress: function (xhr) {\n            xhr.upload.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            }\n            xhr.onprogress = function (e) {\n                if (e.lengthComputable) {\n                    var pct = 50 + e.loaded / e.total * 50;\n                    ui.setProgress(progressBar, pct);\n                }\n            };\n        },\n        success: function (data) {\n            ui.setProgress(progressBar, 100, 'Done');\n        },\n        error: function () {\n            ui.shake($('.frame'));\n            ui.setProgress(progressBar, 100, 'Error');\n        }\n    });\n}\n\nactions.define('build', build);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build.js\n// module id = 49\n// module chunks = 4"],"sourceRoot":""}
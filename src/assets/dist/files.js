webpackJsonp([2],{15:function(e,t,a){var n=a(1);t.shake=function(e,t){t="undefined"==typeof t?10:t;var a=2*t;return n(e).width(n(e).width()).css("position","absolute").animate({left:"+="+t},50).animate({left:"-="+a},50).animate({left:"+="+a},50).animate({left:"-="+t},50).queue(function(){n(e).css("position","").css("width","").css("left","").finish()})}},2:function(e,t,a){function n(e,t){o('[data-action="'+e+'"]').click(function(e){return e.preventDefault(),e.stopPropagation(),t(),!1})}function i(e){"string"==typeof e?o('[data-action="'+e+'"]').attr("disabled",!1):e.forEach(i)}function r(e){"string"==typeof e?o('[data-action="'+e+'"]').attr("disabled",!0):e.forEach(r)}var o=a(1);t.define=n,t.enable=i,t.disable=r},35:function(e,t,a){function n(e){location.href=C+"/open"+e}function i(e){e[0].ondragenter=function(t){return t.stopPropagation(),t.preventDefault(),t.dropEffect="copy",e.addClass("accept"),!1},e[0].ondragleave=function(t){return t.stopPropagation(),t.preventDefault(),e.removeClass("accept"),!1},e[0].ondragover=function(e){return e.stopPropagation(),e.preventDefault(),e.dropEffect="copy",!1},e[0].ondrop=function(t){t.stopPropagation(),t.preventDefault();var a=event.dataTransfer.files,n=new FormData;n.append("request_token",b);for(var i=0;i<a.length;i++)n.append("file"+i,a[i]),l(e,{name:a[i].name,path:e.data("path")+"/"+a[i].name,type:"uploading"});var r=new XMLHttpRequest;return r.open("POST",C+"/api/upload?path="+e.data("path")),r.send(n),r.onreadystatechange=function(){if(3===this.readyState||4===this.readyState){var t=e.data("path");e.data("path",null),v(e,t)}},!1}}function r(e,t){E[t.path]={link:e,data:t},e.hasClass("file-directory")||e.dblclick(function(){return n(y(this).data("path")),!1}),e.click(function(e){return e.shiftKey?c(t.path):f(t.path),!1})}function o(e){var t=y('<a class="file">');return t.text(e.name),P.filter(function(t){return t===e.path}).length>0&&t.addClass("active"),e.read||t.addClass("locked"),t.attr("data-path",e.path),t.attr("href",C+"/files"+e.path),t.addClass("file-"+e.type),r(t,e),t}function l(e,t){var a=y("<li>"),n=o(t);return a.append(n),e.children("ul").append(a),n}function d(e,t){var a=y('<li class="file-info">'),i=y('<span class="file">');i.addClass("file-"+t.type),t.read||i.addClass("locked");var r=y('<span class="file-name">');r.text(t.name);var o=y('<span class="file-modified">');o.text(new Date(1e3*t.modified).toString());var l=y('<span class="file-access">');if(l.text(t.modeString+" "+t.owner+":"+t.group+" ("+(t.read?"r":"-")+(t.write?"w":"-")+")"),a.append(i).append(r).append(o).append(l),t.read){var d=y("<button>Open in editor</button>");d.click(function(){n(t.path)}).appendTo(a)}e.children("ul").append(a)}function s(){P.length<=1||(P.pop(),D=P[P.length-1],h(),history.pushState({cwd:D},document.title,C+"/files"+D))}function p(){q.data("path",null),v(q,D)}function f(e){u(e),E.hasOwnProperty(e)&&E[e].link.addClass("active"),history.pushState({cwd:D},document.title,C+"/files"+D)}function c(e){T.push(e)}function u(e){T=[e];var t=e.split("/"),e="";P=["/"];for(var a=0;a<t.length;a++)".."===t[a]?P.length>1&&(P.pop(),e=P[P.length-1]):""!==t[a]&&"."!==t[a]&&(e+="/"+t[a],P.push(e));D=P[P.length-1],h()}function h(){console.log("stack",P,"cwd",D,"stackOffset",M);var e=x.children(),t=e.length;if(M=Math.max(0,P.length-t),x.find("a").removeClass("active"),P.length>=S)for(var a=0;a<t;a++){var n=e.eq(a);M+a<P.length?(v(n,P[M+a]),q=e.eq(a)):v(n,null)}else{q=e.eq(Math.min(t,P.length)-1);for(var a=t-1;a>=0;a--){var n=e.eq(a);M+a<P.length?v(n,P[M+a]):v(n,null)}}S=P.length,y(".header-path").text(D),document.title=D+" â€“ Files"}function v(e,t){if(e.data("path")!==t){var a=e.children("ul");a.empty(),e.data("path",null),e.removeClass("readonly"),e.next().data("path")===t?(e.data("path",t),e.next().children("ul").children().appendTo(a),e.next().hasClass("readonly")&&e.addClass("readonly")):e.prev().data("path")===t?(e.data("path",t),e.prev().children("ul").children().appendTo(a),e.prev().hasClass("readonly")&&e.addClass("readonly")):null!==t&&(e.addClass("loading"),y.ajax({url:C+"/api/list-files",data:{path:t},success:function(n){if(e.removeClass("loading"),a.empty(),e.removeClass("readonly"),e.data("path",t),n.write||e.addClass("readonly"),"directory"===n.type&&"undefined"!=typeof n.files)for(var i=0;i<n.files.length;i++){var r=n.files[i];l(e,r)}else d(e,n)}}))}E.hasOwnProperty(t)&&E[t].link.addClass("active")}function m(){var e=x.children().length,t=Math.max(1,Math.floor(x.width()/200));if(t>e)for(var a=t-e,n=0;n<a;n++){var r=y('<div class="files-panel">');r.append("<ul>"),r.appendTo(x),i(r)}else{if(!(t<e))return!1;for(var o=e-t,n=0;n<o;n++)x.children().last().remove()}return x.children().css("width",100/t+"%"),!0}function g(){x.height(y(window).height()-150)}var y=a(1),w=a(2),k=a(15),C=y("body").data("path").replace(/\/$/,""),x=y(".files-columns"),b=x.data("token"),q=x.children().first(),D=q.data("path");q.data("path",null);var P=[],S=0,E={},T=[],M=0,O=D;window.onpopstate=function(e){null!==e.state?u(e.state.cwd):O!==D&&u(O)},x.empty(),m(),u(D),g(),y(window).resize(function(){m()&&h(),g()}),y(document).keypress(function(e){!e.shiftKey&&!e.ctrlKey&&!e.altKey}),w.define("back",function(){history.back()}),w.define("foreward",function(){history.go(1)}),w.define("up",function(){s()}),w.define("home",function(){f("/")}),w.define("new-folder",function(){var e=prompt("Enter the new name:");if(null!==e){if(""===e)return void alert("Invalid name");var t;t="/"===D?D+e:D+"/"+e,y.ajax({url:C+"/api/make-dir",method:"post",data:{request_token:b,path:t},success:function(e){l(q,e),f(t)}})}}),w.define("new-file",function(){var e=prompt("Enter the new name:");if(null!==e){if(""===e)return void alert("Invalid name");var t;t="/"===D?D+e:D+"/"+e,y.ajax({url:C+"/api/make-file",method:"post",data:{request_token:b,path:t},success:function(e){l(q,e),f(t)},error:function(){k.shake(y(".frame"))}})}}),w.define("trash",function(){confirm("Delete file: "+D)&&y.ajax({url:C+"/api/delete",method:"post",data:{request_token:b,path:D},success:function(e){s(),p()}})})}},[35]);
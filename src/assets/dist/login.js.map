{"version":3,"sources":["webpack:///dist/login.js","webpack:///./common/ui.js?8332*****","webpack:///./login.js"],"names":["webpackJsonp","3","module","exports","__webpack_require__","$","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","path","data","replace","find","prop","show","submit","token","this","val","ajax","url","method","request_token","username","password","remember","is","success","overflow","whiteSpace","hide","off","error","xhr","select","global","handleError","event","settings","thrownError","focus","responseJSON","alert","message","responseText","console","log","53","ui","location","reload"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GCIhC,GAAAC,GAAAD,EAAA,EAEAD,GAAAG,MAAA,SAAAC,EAAAC,GACAA,EAAA,mBAAAA,GAAA,GAAAA,CACA,IAAAC,GAAA,EAAAD,CACA,OAAAH,GAAAE,GAAAG,MAAAL,EAAAE,GAAAG,SACAC,SAAsBC,WAAA,KAAAJ,GAA0B,IAChDG,SAAsBC,WAAA,KAAAH,GAAuB,IAC7CE,SAAsBC,WAAA,KAAAH,GAAuB,IAC7CE,SAAsBC,WAAA,KAAAJ,GAA0B,IAChDK,MAAA,WACAR,EAAAE,GAAAO,IAAA,YACAA,IAAA,kBACAC,YAIAZ,EAAAa,YAAA,SAAAT,EAAAU,GACA,GAAAC,IAAA,EAEAC,EAAA,SAAAC,GACAF,GAAA,GAGAG,EAAA,SAAAD,GACAF,GAAA,EAGAX,GAAAe,iBAAA,aAAAH,GACAZ,EAAAe,iBAAA,WAAAD,GACAd,EAAAe,iBAAA,cAAAD,GACAd,EAAAe,iBAAA,YAAAD,GACAd,EAAAe,iBAAA,uBAAAF,GACA,GAAAF,EACA,MAAAD,GAAAG,MAKAjB,EAAAoB,YAAA,SAAAhB,EAAAiB,EAAAC,GACA,GAAAC,GAAAnB,EAAAoB,SAAA,GACAC,EAAArB,EAAAoB,SAAA,EACAH,GAAAK,KAAAC,MAAAN,GACAA,GAAA,IACAjB,EAAAwB,UAAA,mBAEAxB,EAAAwB,UAAA,kBAEAL,EAAAM,MAAAtB,MAAAc,EAAA,IACAE,EAAAO,UAAAT,EAAA,IACA,mBAAAC,KACAG,EAAAK,UAAAR,IAIAtB,EAAA+B,YAAA,SAAAC,GACA,GAAAC,GAAA/B,EAAA,QAAAgC,KAAA,QAAAC,QAAA,SACAjC,GAAA,UAAAkC,KAAA,SAAAC,KAAA,eACAnC,EAAA,gBAAAoC,OACApC,EAAA,UAAAqC,OAAA,WACA,GAAAC,GAAAtC,EAAAuC,MAAAL,KAAA,0BAAAM,KA2BA,OA1BAxC,GAAAuC,MAAAL,KAAA,SAAAC,KAAA,eACAnC,EAAAyC,MACAC,IAAAX,EACAY,OAAA,OACAX,MACAY,cAAAN,EACAO,SAAA7C,EAAA,aAAAwC,MACAM,SAAA9C,EAAA,aAAAwC,MACAO,SAAA/C,EAAA,sBAAAgD,GAAA,aAAoED,SAAA,YAAuB,MAE3FE,QAAA,WACAjD,EAAA,gBAAAS,KAAuCyC,SAAA,SAAAC,WAAA,YAA0C7C,SAAWD,MAAA,GAAS,WACrGL,EAAAuC,MAAAa,OAAA3C,KAAwCyC,SAAA,GAAAC,WAAA,GAAA9C,MAAA,KACxCL,EAAA,UAAAqD,IAAA,UACArD,EAAA,aAAAwC,IAAA,IACAV,OAGAwB,MAAA,SAAAC,GACAvD,EAAA,UAAAkC,KAAA,SAAAC,KAAA,eACArC,EAAAG,MAAAD,EAAA,iBACAA,EAAA,aAAAwD,SACAxD,EAAA,aAAAwC,IAAA,KAEAiB,QAAA,KAEA,KAIA3D,EAAA4D,YAAA,SAAAC,EAAAJ,EAAAK,EAAAC,GACA,aAAAN,EAAAnC,QACApB,EAAA,kBAAAoC,OACApC,EAAA,aAAA8D,YACAhE,GAAA+B,YAAA,WACA7B,EAAA,kBAAAoD,OACApD,EAAAyC,KAAAmB,OAGK,mBAAAL,GAAAQ,aACLC,MAAAT,EAAAQ,aAAAE,SAEAD,MAAAT,EAAAW,cAEApE,EAAAG,MAAAD,EAAA,sBACAmE,SAAAC,IAAAT,EAAAJ,EAAAK,EAAAC,MDWMQ,GACA,SAASxE,EAAQC,EAASC,GEtHhC,GAAAC,GAAAD,EAAA,GACAuE,EAAAvE,EAAA,EAEAC,GAAA,oBAAA8D,QACAQ,EAAAzC,YAAA,WACA0C,SAAAC,cFoIG","file":"dist/login.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 3:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('.login-frame').show();\n    $('#login').submit(function () {\n        var token = $(this).find('[name=\"request_token\"]').val();\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                request_token: token,\n                username: $('#username').val(),\n                password: $('#password').val(),\n                remember: $('#remember_remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('.login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('.login-frame'));\n                $('#username').select();\n                $('#password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n        $('#password').focus();\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n/***/ },\n\n/***/ 53:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar ui = __webpack_require__(3);\n\n$('#login #username').focus();\nui.handleLogin(function () {\n    location.reload();\n});\n\n/***/ }\n\n},[53]);\n\n\n// WEBPACK FOOTER //\n// dist/login.js","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('.login-frame').show();\n    $('#login').submit(function () {\n        var token = $(this).find('[name=\"request_token\"]').val();\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                request_token: token,\n                username: $('#username').val(),\n                password: $('#password').val(),\n                remember: $('#remember_remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('.login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('.login-frame'));\n                $('#username').select();\n                $('#password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n        $('#password').focus();\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 3\n// module chunks = 0 1 2 4 5 6 7","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar ui = require('./common/ui');\n\n$('#login #username').focus();\nui.handleLogin(function () {\n    location.reload();\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./login.js\n// module id = 53\n// module chunks = 7"],"sourceRoot":""}
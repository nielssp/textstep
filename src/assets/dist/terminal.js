webpackJsonp([6],{2:function(e,n,t){var o=t(0),i=t(4);o.ajaxSetup({headers:{"X-Csrf-Token":i.get("csrf_token")}}),n.shake=function(e,n){n=void 0===n?10:n;var t=2*n;return o(e).width(o(e).width()).animate({marginLeft:"+="+n},50).animate({marginLeft:"-="+t},50).animate({marginLeft:"+="+t},50).animate({marginLeft:"-="+n},50).queue(function(){o(e).css("width","").css("margin-left","").finish()})},n.onLongPress=function(e,n){var t=!1,o=function(e){t=!0},i=function(e){t=!1};e.addEventListener("touchstart",o),e.addEventListener("touchend",i),e.addEventListener("touchcancel",i),e.addEventListener("touchmove",i),e.addEventListener("contextmenu",function(e){if(t)return n(e)})},n.setProgress=function(e,n,t){var o=e.children[0],i=e.children[1];n=Math.floor(n),e.className=n>=100?"progress success":"progress active",o.style.width=n+"%",o.innerText=n+"%",void 0!==t&&(i.innerText=t)},n.handleLogin=function(e){var t=o("body").data("path").replace(/\/$/,"");o("#login").find("input").prop("disabled",!1),o("#login-frame").show(),o("#login").submit(function(){return o(this).find("input").prop("disabled",!0),o.ajax({url:t,method:"post",data:{username:o("#login-username").val(),password:o("#login-password").val(),remember:o("#login-remember").is(":checked")?{remember:"remember"}:null},success:function(){o("#login-frame").css({overflow:"hidden",whiteSpace:"no-wrap"}).animate({width:0},function(){o(this).hide().css({overflow:"",whiteSpace:"",width:""}),o("#login").off("submit"),o("#login-password").val(""),e()})},error:function(e){o("#login").find("input").prop("disabled",!1),n.shake(o("#login-frame")),o("#login-username").select(),o("#login-password").val("")},global:!1}),!1})},n.handleError=function(e,t,r,a){var s=i.get("csrf_token");return r.headers["X-Csrf-Token"]!==s?(o.ajaxSetup({headers:{"X-Csrf-Token":s}}),r.headers["X-Csrf-Token"]=s,void o.ajax(r)):401===t.status?(o("#login-overlay").show(),""===o("#login-username").val()?o("#login-username").focus():o("#login-password").focus(),void n.handleLogin(function(){o("#login-overlay").hide(),o.ajax(r)})):(void 0!==t.responseJSON?alert(t.responseJSON.message):alert(t.responseText),n.shake(o("main > .frame")),void console.log(e,t,r,a))}},4:function(e,n,t){var o,i;!function(r){var a=!1;if(o=r,void 0!==(i="function"==typeof o?o.call(n,t,n,e):o)&&(e.exports=i),a=!0,e.exports=r(),a=!0,!a){var s=window.Cookies,c=window.Cookies=r();c.noConflict=function(){return window.Cookies=s,c}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(t){function o(n,i,r){var a;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},o.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}r.expires=r.expires?r.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=t.write?t.write(i,n):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape);var c="";for(var l in r)r[l]&&(c+="; "+l,!0!==r[l]&&(c+="="+r[l]));return document.cookie=n+"="+i+c}n||(a={});for(var u=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var p=u[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var m=p[0].replace(f,decodeURIComponent);if(h=t.read?t.read(h,m):t(h,m)||h.replace(f,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(n===m){a=h;break}n||(a[m]=h)}catch(e){}}return a}}return o.set=o,o.get=function(e){return o.call(o,e)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(n,t){o(n,"",e(t,{expires:-1}))},o.withConverter=n,o}return n(function(){})})},57:function(e,n,t){function o(e,n){f=e,h="",l("who-am-i",{},function(e){w=e})}function i(e){e=e.trim(),e.startsWith("~")?e=w.home+e.substr(1):e.startsWith("/")||(e=p+"/"+e);for(var n=e.split("/"),t=[],o=0;o<n.length;o++)".."===n[o]?t.length>=1&&t.pop():""!==n[o]&&"."!==n[o]&&t.push(n[o]);return"/"+t.join("/")}function r(){d.val(h),d[0].scrollTop=d[0].scrollHeight}function a(e){h+=e,r()}function s(e){a(e+"\n")}function c(e){d.attr("readonly",!1).focus(),g=e}function l(e,n,t){BLOGSTEP.post(e,n).done(t).fail(function(n){s(404===n.status?n.status+" "+e+": command not found":void 0!==n.responseJSON?n.status+"("+n.responseJSON.code+") "+n.responseJSON.message:n.status+" "+n.statusText+": "+n.responseText)}).always(u)}function u(){a(w.username+" "+p+"> "),v=-1,c(function(e){var n=e.trim().match(/^([^ ]+)(?: (.*))?/);if(null===n)s("Invalid command"),u();else{var t=n[1];if(k.hasOwnProperty(t))k[t](void 0===n[2]?"":n[2]);else try{l(t,void 0===n[2]?{}:JSON.parse(n[2]),function(e){s(JSON.stringify(e,null,"  "))})}catch(e){s(e),u()}}})}var f,d,p=(t(0),t(2),"/"),h="",m=[],v=-1,g=null,w={},y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k={clear:function(e){h="",r(),u()},cd:function(e){var n=i(e);l("list-files?path="+n,{},function(e){"directory"===e.type?p=n:s("not a directory")})},pwd:function(e){s(p),u()},ls:function(e){l("list-files?path="+p,{},function(e){void 0!==e.files&&e.files.forEach(function(e){var n=e.modeString;n+=" \t"+e.owner,n+=" \t"+e.group;var t=new Date(1e3*e.modified);n+=" \t"+t.getFullYear(),n+=" "+y[t.getMonth()],n+=" "+t.getDate(),n+=" \t"+e.name,"directory"===e.type&&(n+="/"),s(n)})})},touch:function(e){l("make-file",{path:i(e)},function(e){})},mkdir:function(e){l("make-dir",{path:i(e)},function(e){})},rm:function(e){l("delete",{path:i(e)},function(e){})},cp:function(e){e=e.split(" "),l("copy",{path:i(e[0]),destination:i(e[1])},function(e){})},mv:function(e){e=e.split(" "),l("move",{path:i(e[0]),destination:i(e[1])},function(e){})},cat:function(e){l("download?path="+i(e),{},function(e){s(e)})},exit:function(e){f.close()}};BLOGSTEP.init("terminal",function(e){e.onOpen=o,d=e.frame.find("textarea"),d.attr("readonly",!0),d.click(function(){var e=d[0].selectionStart;e===d[0].selectionEnd&&e<h.length&&(d[0].selectionStart=d.val().length)}),d.keydown(function(e){if("Enter"===e.key&&!e.shiftKey){if(null!==g){d.attr("readonly",!0).blur();var n=d.val().substr(h.length);m.push(n),h+=n+"\n",r();var t=g;g=null,t(n)}return!1}if("ArrowUp"===e.key)return null!==g&&m.length>0&&(v<0?v=m.length-1:v>0&&v--,d.val(h+m[v])),!1;if("ArrowDown"===e.key)return null!==g&&m.length>0&&v>=0&&(v<m.length-1?(v++,d.val(h+m[v])):(v=-1,d.val(h))),!1;if("ArrowLeft"===e.key||"Backspace"===e.key){var o=d[0].selectionStart;if(o===d[0].selectionEnd&&o<=h.length)return!1}return!0})})}},[57]);
//# sourceMappingURL=terminal.js.map
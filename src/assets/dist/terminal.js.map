{"version":3,"sources":["webpack:///dist/terminal.js","webpack:///./common/ui.js?8332","webpack:////home/www/blogstep/~/js-cookie/src/js.cookie.js?cd36","webpack:///./terminal.js"],"names":["webpackJsonp","3","module","exports","__webpack_require__","$","Cookies","ajaxSetup","headers","X-Csrf-Token","get","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","path","data","replace","find","prop","show","submit","this","ajax","url","method","username","val","password","remember","is","success","overflow","whiteSpace","hide","off","error","xhr","select","global","handleError","event","settings","thrownError","newToken","focus","responseJSON","alert","message","responseText","console","log","4","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","factory","registeredInModuleLoader","undefined","call","OldCookies","window","api","noConflict","extend","i","result","arguments","length","attributes","key","init","converter","value","document","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","write","encodeURIComponent","String","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","split","rdecode","parts","slice","join","json","charAt","name","read","parse","set","getJSON","apply","remove","withConverter","56","open","app","args","self","buffer","exec","user","cwd","resume","$terminal","convertPath","trim","startsWith","home","substr","names","stack","pop","push","flush","scrollTop","scrollHeight","content","writeLine","readLine","attr","readCallback","command","BLOGSTEP","post","fail","code","statusText","always","prompt","cmdHistoryPos","line","m","match","commands","hasOwnProperty","cmdHistory","months","clear","cd","nwd","type","setTitle","setArgs","pwd","ls","files","forEach","file","modeString","owner","group","date","modified","getFullYear","getMonth","getDate","touch","mkdir","rm","cp","destination","mv","cat","exit","close","edit","run","ps","tasks","getTasks","state","addMenu","addItem","onOpen","onResume","frame","click","selectionStart","selectionEnd","keydown","shiftKey","blur"],"mappings":"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","file":"dist/terminal.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ }),\n\n/***/ 56:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar ui = __webpack_require__(3);\n\nvar self;\nvar $terminal;\n\nvar cwd = '/';\nvar buffer = '';\nvar cmdHistory = [];\nvar cmdHistoryPos = -1;\nvar readCallback = null;\n\nvar user = {};\n\nvar months = [\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n];\n\nvar commands = {\n    clear: function (args) {\n        buffer = '';\n        flush();\n        prompt();\n    },\n    cd: function (args) {\n        var nwd = convertPath(args);\n        exec('list-files?path=' + nwd, {}, function (data) {\n            if (data.type === 'directory') {\n                cwd = nwd;\n\t\tself.setTitle(cwd + ' – Terminal');\n\t\tself.setArgs({ path: cwd });\n            } else {\n                writeLine('not a directory');\n            }\n        });\n    },\n    pwd: function (args) {\n        writeLine(cwd);\n        prompt();\n    },\n    ls: function (args) {\n        exec('list-files?path=' + cwd, {}, function (data) {\n            if (typeof data.files !== 'undefined') {\n                data.files.forEach(function (file) {\n                    var line = file.modeString;\n                    line += ' \\t' + file.owner;\n                    line += ' \\t' + file.group;\n                    var date = new Date(file.modified * 1000);\n                    line += ' \\t' + date.getFullYear();\n                    line += ' ' + months[date.getMonth()];\n                    line += ' ' + date.getDate();\n                    line += ' \\t' + file.name;\n                    if (file.type === 'directory') {\n                        line += '/';\n                    }\n                    writeLine(line);\n                });\n            }\n        });\n    },\n    touch: function (args) {\n        exec('make-file', {path: convertPath(args)}, function (data) {\n        });\n    },\n    mkdir: function (args) {\n        exec('make-dir', {path: convertPath(args)}, function (data) {\n        });\n    },\n    rm: function (args) {\n        exec('delete', {path: convertPath(args)}, function (data) {\n        });\n    },\n    cp: function (args) {\n        args = args.split(' ');\n        exec('copy', {path: convertPath(args[0]), destination: convertPath(args[1])}, function (data) {\n        });\n    },\n    mv: function (args) {\n        args = args.split(' ');\n        exec('move', {path: convertPath(args[0]), destination: convertPath(args[1])}, function (data) {\n        });\n    },\n    cat: function (args) {\n        exec('download?path=' + convertPath(args), {}, function (data) {\n            writeLine(data);\n        });\n    },\n    exit: function (args) {\n\tself.close();\n    },\n    open: function (args) {\n\tBLOGSTEP.open(convertPath(args));\n\tprompt();\n    },\n    edit: function (args) {\n\tBLOGSTEP.run('code-editor', {path: convertPath(args)});\n\tprompt();\n    },\n    run: function (args) {\n        args = args.split(' ');\n\tBLOGSTEP.run(args[0], args.length > 1 ? { path: convertPath(args[1]) } : {});\n\tprompt();\n    },\n    ps: function (args) {\n        var tasks = BLOGSTEP.getTasks();\n        for (var i = 0; i < tasks.length; i++) {\n            writeLine(tasks[i].name + ' (' + tasks[i].state + ')');\n        }\n        prompt();\n    }\n};\n\nfunction open(app, args)\n{\n    self = app;\n    buffer = '';\n    exec('who-am-i', {}, function (data) {\n\tuser = data;\n\tif (typeof args.path === 'string') {\n\t    cwd = args.path;\n\t}\n    });\n}\n\nfunction resume(app)\n{\n    $terminal.focus();\n}\n\nfunction convertPath(path)\n{\n    path = path.trim();\n    if (path.startsWith('~')) {\n        path = user.home + path.substr(1);\n    } else if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\nfunction flush()\n{\n    $terminal.val(buffer);\n    $terminal[0].scrollTop = $terminal[0].scrollHeight;\n}\n\nfunction write(content)\n{\n    buffer += content;\n    flush();\n}\n\nfunction writeLine(content)\n{\n    write(content + '\\n');\n}\n\nfunction readLine(callback)\n{\n    $terminal.attr('readonly', false).focus();\n    readCallback = callback;\n}\n\nfunction exec(command, data, success)\n{\n    BLOGSTEP.post(command, data).done(success).fail(function (xhr) {\n\tif (xhr.status === 404) {\n\t    writeLine(xhr.status + ' ' + command + ': command not found');\n\t} else if (typeof xhr.responseJSON !== 'undefined') {\n\t    writeLine(xhr.status + '(' + xhr.responseJSON.code + ') ' + xhr.responseJSON.message);\n\t} else {\n\t    writeLine(xhr.status + ' ' + xhr.statusText + ': ' + xhr.responseText);\n\t}\n    }).always(prompt);\n}\n\nfunction prompt()\n{\n    write(user.username + ' ' + cwd + '> ');\n    cmdHistoryPos = -1;\n    readLine(function (line) {\n        var m = line.trim().match(/^([^ ]+)(?: (.*))?/);\n        if (m === null) {\n            writeLine('Invalid command');\n            prompt();\n        } else {\n            var command = m[1];\n            if (commands.hasOwnProperty(command)) {\n                commands[command]((typeof m[2] === 'undefined')? '' : m[2]);\n            } else {\n                try {\n                    var data = (typeof m[2] === 'undefined') ? {} : JSON.parse(m[2]);\n                    exec(command, data, function (data) {\n                        writeLine(JSON.stringify(data, null, '  '));\n                    });\n                } catch (e) {\n                    writeLine(e);\n                    prompt();\n                }\n            }\n        }\n    });\n}\n\nBLOGSTEP.init('terminal', function (app) {\n    var menu = app.addMenu('Terminal');\n    menu.addItem('Close', 'close');\n    \n    app.onOpen = open;\n    \n    app.onResume = resume;\n    \n    $terminal = app.frame.find('textarea');\n    \n    $terminal.attr('readonly', true);\n\n    $terminal.click(function () {\n\tvar start = $terminal[0].selectionStart;\n\tvar end = $terminal[0].selectionEnd;\n\tif (start === end) {\n\t    if (start < buffer.length) {\n\t\t$terminal[0].selectionStart = $terminal.val().length;\n\t    }\n\t}\n    });\n    $terminal.keydown(function (e) {\n\tif (e.key === 'Enter' && !e.shiftKey) {\n\t    if (readCallback !== null) {\n\t\t$terminal.attr('readonly', true).blur();\n\t\tvar line = $terminal.val().substr(buffer.length);\n\t\tcmdHistory.push(line);\n\t\tbuffer += line + '\\n';\n\t\tflush();\n\t\tvar callback = readCallback;\n\t\treadCallback = null;\n\t\tcallback(line);\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowUp') {\n\t    if (readCallback !== null) {\n\t\tif (cmdHistory.length > 0) {\n\t\t    if (cmdHistoryPos < 0) {\n\t\t\tcmdHistoryPos = cmdHistory.length - 1;\n\t\t    } else if (cmdHistoryPos > 0) {\n\t\t\tcmdHistoryPos--;\n\t\t    }\n\t\t    $terminal.val(buffer + cmdHistory[cmdHistoryPos]);\n\t\t}\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowDown') {\n\t    if (readCallback !== null) {\n\t\tif (cmdHistory.length > 0 && cmdHistoryPos >= 0) {\n\t\t    if (cmdHistoryPos < cmdHistory.length - 1) {\n\t\t\tcmdHistoryPos++;\n\t\t\t$terminal.val(buffer + cmdHistory[cmdHistoryPos]);\n\t\t    } else {\n\t\t\tcmdHistoryPos = -1;\n\t\t\t$terminal.val(buffer);\n\t\t    }\n\t\t}\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowLeft' || e.key === 'Backspace') {\n\t    var start = $terminal[0].selectionStart;\n\t    var end = $terminal[0].selectionEnd;\n\t    if (start === end) {\n\t\tif (start <= buffer.length) {\n\t\t    return false;\n\t\t}\n\t    }\n\t}\n\treturn true;\n    });\n\n});\n\n/***/ })\n\n},[56]);\n\n\n// WEBPACK FOOTER //\n// dist/terminal.js","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 3\n// module chunks = 0 1 2 3 4 6","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/js-cookie/src/js.cookie.js\n// module id = 4\n// module chunks = 0 1 2 3 4 6","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar ui = require('./common/ui');\n\nvar self;\nvar $terminal;\n\nvar cwd = '/';\nvar buffer = '';\nvar cmdHistory = [];\nvar cmdHistoryPos = -1;\nvar readCallback = null;\n\nvar user = {};\n\nvar months = [\n    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n];\n\nvar commands = {\n    clear: function (args) {\n        buffer = '';\n        flush();\n        prompt();\n    },\n    cd: function (args) {\n        var nwd = convertPath(args);\n        exec('list-files?path=' + nwd, {}, function (data) {\n            if (data.type === 'directory') {\n                cwd = nwd;\n\t\tself.setTitle(cwd + ' – Terminal');\n\t\tself.setArgs({ path: cwd });\n            } else {\n                writeLine('not a directory');\n            }\n        });\n    },\n    pwd: function (args) {\n        writeLine(cwd);\n        prompt();\n    },\n    ls: function (args) {\n        exec('list-files?path=' + cwd, {}, function (data) {\n            if (typeof data.files !== 'undefined') {\n                data.files.forEach(function (file) {\n                    var line = file.modeString;\n                    line += ' \\t' + file.owner;\n                    line += ' \\t' + file.group;\n                    var date = new Date(file.modified * 1000);\n                    line += ' \\t' + date.getFullYear();\n                    line += ' ' + months[date.getMonth()];\n                    line += ' ' + date.getDate();\n                    line += ' \\t' + file.name;\n                    if (file.type === 'directory') {\n                        line += '/';\n                    }\n                    writeLine(line);\n                });\n            }\n        });\n    },\n    touch: function (args) {\n        exec('make-file', {path: convertPath(args)}, function (data) {\n        });\n    },\n    mkdir: function (args) {\n        exec('make-dir', {path: convertPath(args)}, function (data) {\n        });\n    },\n    rm: function (args) {\n        exec('delete', {path: convertPath(args)}, function (data) {\n        });\n    },\n    cp: function (args) {\n        args = args.split(' ');\n        exec('copy', {path: convertPath(args[0]), destination: convertPath(args[1])}, function (data) {\n        });\n    },\n    mv: function (args) {\n        args = args.split(' ');\n        exec('move', {path: convertPath(args[0]), destination: convertPath(args[1])}, function (data) {\n        });\n    },\n    cat: function (args) {\n        exec('download?path=' + convertPath(args), {}, function (data) {\n            writeLine(data);\n        });\n    },\n    exit: function (args) {\n\tself.close();\n    },\n    open: function (args) {\n\tBLOGSTEP.open(convertPath(args));\n\tprompt();\n    },\n    edit: function (args) {\n\tBLOGSTEP.run('code-editor', {path: convertPath(args)});\n\tprompt();\n    },\n    run: function (args) {\n        args = args.split(' ');\n\tBLOGSTEP.run(args[0], args.length > 1 ? { path: convertPath(args[1]) } : {});\n\tprompt();\n    },\n    ps: function (args) {\n        var tasks = BLOGSTEP.getTasks();\n        for (var i = 0; i < tasks.length; i++) {\n            writeLine(tasks[i].name + ' (' + tasks[i].state + ')');\n        }\n        prompt();\n    }\n};\n\nfunction open(app, args)\n{\n    self = app;\n    buffer = '';\n    exec('who-am-i', {}, function (data) {\n\tuser = data;\n\tif (typeof args.path === 'string') {\n\t    cwd = args.path;\n\t}\n    });\n}\n\nfunction resume(app)\n{\n    $terminal.focus();\n}\n\nfunction convertPath(path)\n{\n    path = path.trim();\n    if (path.startsWith('~')) {\n        path = user.home + path.substr(1);\n    } else if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\nfunction flush()\n{\n    $terminal.val(buffer);\n    $terminal[0].scrollTop = $terminal[0].scrollHeight;\n}\n\nfunction write(content)\n{\n    buffer += content;\n    flush();\n}\n\nfunction writeLine(content)\n{\n    write(content + '\\n');\n}\n\nfunction readLine(callback)\n{\n    $terminal.attr('readonly', false).focus();\n    readCallback = callback;\n}\n\nfunction exec(command, data, success)\n{\n    BLOGSTEP.post(command, data).done(success).fail(function (xhr) {\n\tif (xhr.status === 404) {\n\t    writeLine(xhr.status + ' ' + command + ': command not found');\n\t} else if (typeof xhr.responseJSON !== 'undefined') {\n\t    writeLine(xhr.status + '(' + xhr.responseJSON.code + ') ' + xhr.responseJSON.message);\n\t} else {\n\t    writeLine(xhr.status + ' ' + xhr.statusText + ': ' + xhr.responseText);\n\t}\n    }).always(prompt);\n}\n\nfunction prompt()\n{\n    write(user.username + ' ' + cwd + '> ');\n    cmdHistoryPos = -1;\n    readLine(function (line) {\n        var m = line.trim().match(/^([^ ]+)(?: (.*))?/);\n        if (m === null) {\n            writeLine('Invalid command');\n            prompt();\n        } else {\n            var command = m[1];\n            if (commands.hasOwnProperty(command)) {\n                commands[command]((typeof m[2] === 'undefined')? '' : m[2]);\n            } else {\n                try {\n                    var data = (typeof m[2] === 'undefined') ? {} : JSON.parse(m[2]);\n                    exec(command, data, function (data) {\n                        writeLine(JSON.stringify(data, null, '  '));\n                    });\n                } catch (e) {\n                    writeLine(e);\n                    prompt();\n                }\n            }\n        }\n    });\n}\n\nBLOGSTEP.init('terminal', function (app) {\n    var menu = app.addMenu('Terminal');\n    menu.addItem('Close', 'close');\n    \n    app.onOpen = open;\n    \n    app.onResume = resume;\n    \n    $terminal = app.frame.find('textarea');\n    \n    $terminal.attr('readonly', true);\n\n    $terminal.click(function () {\n\tvar start = $terminal[0].selectionStart;\n\tvar end = $terminal[0].selectionEnd;\n\tif (start === end) {\n\t    if (start < buffer.length) {\n\t\t$terminal[0].selectionStart = $terminal.val().length;\n\t    }\n\t}\n    });\n    $terminal.keydown(function (e) {\n\tif (e.key === 'Enter' && !e.shiftKey) {\n\t    if (readCallback !== null) {\n\t\t$terminal.attr('readonly', true).blur();\n\t\tvar line = $terminal.val().substr(buffer.length);\n\t\tcmdHistory.push(line);\n\t\tbuffer += line + '\\n';\n\t\tflush();\n\t\tvar callback = readCallback;\n\t\treadCallback = null;\n\t\tcallback(line);\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowUp') {\n\t    if (readCallback !== null) {\n\t\tif (cmdHistory.length > 0) {\n\t\t    if (cmdHistoryPos < 0) {\n\t\t\tcmdHistoryPos = cmdHistory.length - 1;\n\t\t    } else if (cmdHistoryPos > 0) {\n\t\t\tcmdHistoryPos--;\n\t\t    }\n\t\t    $terminal.val(buffer + cmdHistory[cmdHistoryPos]);\n\t\t}\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowDown') {\n\t    if (readCallback !== null) {\n\t\tif (cmdHistory.length > 0 && cmdHistoryPos >= 0) {\n\t\t    if (cmdHistoryPos < cmdHistory.length - 1) {\n\t\t\tcmdHistoryPos++;\n\t\t\t$terminal.val(buffer + cmdHistory[cmdHistoryPos]);\n\t\t    } else {\n\t\t\tcmdHistoryPos = -1;\n\t\t\t$terminal.val(buffer);\n\t\t    }\n\t\t}\n\t    }\n\t    return false;\n\t} else if (e.key === 'ArrowLeft' || e.key === 'Backspace') {\n\t    var start = $terminal[0].selectionStart;\n\t    var end = $terminal[0].selectionEnd;\n\t    if (start === end) {\n\t\tif (start <= buffer.length) {\n\t\t    return false;\n\t\t}\n\t    }\n\t}\n\treturn true;\n    });\n\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./terminal.js\n// module id = 56\n// module chunks = 6"],"sourceRoot":""}
{"version":3,"sources":["webpack:///dist/viewer.js","webpack:///./common/actions.js?e0fb**","webpack:////home/www/blogstep/~/viewerjs/dist/viewer.js","webpack:///./common/paths.js?9de7*","webpack:///./viewer.js"],"names":["webpackJsonp","1","module","exports","__webpack_require__","bind","key","action","parts","toLowerCase","split","e","ctrlKey","altKey","shiftKey","length","i","keyMap","defineAction","name","callback","groups","actions","$","click","preventDefault","stopPropagation","forEach","group","actionGroups","hasOwnProperty","push","activate","enableGroup","enable","disableGroup","disable","attr","define","window","keydown","defaultPrevented","metaKey","21","24","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","factory","document","Error","this","noGlobal","typeOf","obj","toString","call","slice","isString","str","isNumber","num","isNaN","isUndefined","isObject","isPlainObject","constructor","prototype","isFunction","fn","isArray","arr","Array","toArray","offset","from","inArray","value","index","indexOf","each","n","trim","replace","REGEXP_TRIM","extend","args","arguments","Object","assign","apply","shift","arg","prop","proxy","context","concat","setStyle","element","styles","style","property","REGEXP_SUFFIX","test","getStyle","getComputedStyle","currentStyle","hasClass","classList","contains","className","addClass","elem","add","removeClass","remove","toggleClass","added","hyphenate","REGEXP_HYPHENATE","getData","dataset","getAttribute","setData","data","setAttribute","removeData","removeAttribute","addListener","type","handler","once","types","REGEXP_SPACES","originalHandler","removeListener","addEventListener","attachEvent","removeEventListener","detachEvent","dispatchEvent","event","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initEvent","initCustomEvent","fireEvent","returnValue","getEvent","doc","target","srcElement","pageX","documentElement","clientX","scrollX","scrollLeft","clientLeft","pageY","clientY","scrollY","scrollTop","clientTop","getOffset","box","getBoundingClientRect","left","top","getTouchesCenter","touches","touch","getByTag","tagName","getElementsByTagName","getByClass","getElementsByClassName","querySelectorAll","appendChild","el","removeChild","parentNode","empty","firstChild","setText","text","textContent","innerText","forceReflow","offsetWidth","getImageName","url","getImageSize","image","newImage","naturalWidth","naturalHeight","createElement","onload","width","height","src","getTransform","transforms","rotate","scaleX","scaleY","join","getResponsiveClass","option","CLASS_HIDE_XS_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_MD_DOWN","Viewer","options","_this","DEFAULTS","isImg","isBuilt","isShown","isViewed","isFulled","isPlayed","wheeling","playing","fading","tooltiping","transitioning","timeout","init","NAMESPACE","CLASS_FIXED","CLASS_OPEN","CLASS_SHOW","CLASS_HIDE","CLASS_FADE","CLASS_IN","CLASS_MOVE","CLASS_ACTIVE","CLASS_INVISIBLE","CLASS_TRANSITION","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_CLOSE","EVENT_MOUSEDOWN","EVENT_MOUSEMOVE","EVENT_MOUSEUP","EVENT_WHEEL","EVENT_TRANSITIONEND","EVENT_LOAD","EVENT_KEYDOWN","EVENT_CLICK","EVENT_RESIZE","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","SUPPORT_TRANSITION","transition","min","Math","max","abs","sqrt","round","objectProto","images","ready","count","body","scrollbarWidth","innerWidth","clientWidth","inline","view","complete","_start","start","build","template","parent","viewer","button","toolbar","navbar","title","innerHTML","TEMPLATE","canvas","footer","tooltipBox","player","list","querySelector","zoomable","scalable","rotatable","zIndex","zIndexInline","position","insertBefore","nextSibling","render","unbuild","viewed","_click","_wheel","wheel","_mousedown","mousedown","_mousemove","mousemove","_mouseup","mouseup","_keydown","_resize","resize","unbind","initContainer","initViewer","initList","renderViewer","containerData","innerHeight","viewerData","parentData","minWidth","offsetHeight","minHeight","items","alt","loadImage","renderList","outerWidth","marginLeft","resetList","initImage","footerHeight","viewerWidth","viewerHeight","oldImageData","imageData","initialImageData","aspectRatio","ratio","renderImage","transform","marginTop","WebkitTransform","msTransform","resetImage","show","stop","exit","full","hide","zoom","toggle","reset","prev","play","next","load","clearTimeout","cssText","movable","originalImage","parentWidth","parentHeight","filled","Number","zoomRatio","delta","setTimeout","deltaY","wheelDelta","keyCode","which","charCode","keyboard","touchesLength","startX2","startY2","isSwitchable","startX","startY","endX2","endY2","endX","endY","change","open","shown","hidden","zoomTo","item","img","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","center","minZoomRatio","maxZoomRatio","tooltip","degree","rotateTo","scale","total","fullscreen","requestFullscreen","interval","exitFullscreen","close","update","indexes","destroy","paddingRight","isVisible","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","originalEvent","x1","y1","x2","y2","z1","z2","built","_Viewer","noConflict","setDefaults","undefined","4","dirName","path","fileName","convert","cwd","startsWith","names","stack","pop","56","PATH","first","console","log","children","$image","location","href"],"mappings":"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","file":"dist/viewer.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 1:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n/***/ },\n\n/***/ 21:\n/***/ function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 24:\n/***/ function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * Viewer.js v0.5.0\n * https://github.com/fengyuanchen/viewerjs\n *\n * Copyright (c) 2015-2016 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2016-07-22T08:46:05.003Z\n */\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (window) {\n      if (!window.document) {\n        throw new Error('Viewer requires a window with a document');\n      }\n\n      return factory(window);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n\n  'use strict';\n\n  var document = window.document;\n  var Event = window.Event;\n\n  // Constants\n  var NAMESPACE = 'viewer';\n\n  // Classes\n  var CLASS_FIXED = NAMESPACE + '-fixed';\n  var CLASS_OPEN = NAMESPACE + '-open';\n  var CLASS_SHOW = NAMESPACE + '-show';\n  var CLASS_HIDE = NAMESPACE + '-hide';\n  var CLASS_HIDE_XS_DOWN = 'viewer-hide-xs-down';\n  var CLASS_HIDE_SM_DOWN = 'viewer-hide-sm-down';\n  var CLASS_HIDE_MD_DOWN = 'viewer-hide-md-down';\n  var CLASS_FADE = NAMESPACE + '-fade';\n  var CLASS_IN = NAMESPACE + '-in';\n  var CLASS_MOVE = NAMESPACE + '-move';\n  var CLASS_ACTIVE = NAMESPACE + '-active';\n  var CLASS_INVISIBLE = NAMESPACE + '-invisible';\n  var CLASS_TRANSITION = NAMESPACE + '-transition';\n  var CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';\n  var CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';\n  var CLASS_CLOSE = NAMESPACE + '-close';\n\n  // Events\n  var EVENT_MOUSEDOWN = 'mousedown touchstart pointerdown MSPointerDown';\n  var EVENT_MOUSEMOVE = 'mousemove touchmove pointermove MSPointerMove';\n  var EVENT_MOUSEUP = 'mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel';\n  var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n  var EVENT_TRANSITIONEND = 'transitionend';\n  var EVENT_LOAD = 'load';\n  var EVENT_KEYDOWN = 'keydown';\n  var EVENT_CLICK = 'click';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n\n  // RegExps\n  var REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  var REGEXP_TRIM = /^\\s+(.*)\\s+$/;\n  var REGEXP_SPACES = /\\s+/;\n\n  // Supports\n  var SUPPORT_TRANSITION = typeof document.createElement(NAMESPACE).style.transition !== 'undefined';\n\n  // Maths\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n  var round = Math.round;\n\n  // Utilities\n  var objectProto = Object.prototype;\n  var toString = objectProto.toString;\n  var hasOwnProperty = objectProto.hasOwnProperty;\n  var slice = Array.prototype.slice;\n\n  function typeOf(obj) {\n    return toString.call(obj).slice(8, -1).toLowerCase();\n  }\n\n  function isString(str) {\n    return typeof str === 'string';\n  }\n\n  function isNumber(num) {\n    return typeof num === 'number' && !isNaN(num);\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n  }\n\n  function isPlainObject(obj) {\n    var constructor;\n    var prototype;\n\n    if (!isObject(obj)) {\n      return false;\n    }\n\n    try {\n      constructor = obj.constructor;\n      prototype = constructor.prototype;\n\n      return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function isFunction(fn) {\n    return typeOf(fn) === 'function';\n  }\n\n  function isArray(arr) {\n    return Array.isArray ? Array.isArray(arr) : typeOf(arr) === 'array';\n  }\n\n  function toArray(obj, offset) {\n    offset = offset >= 0 ? offset : 0;\n\n    if (Array.from) {\n      return Array.from(obj).slice(offset);\n    }\n\n    return slice.call(obj, offset);\n  }\n\n  function inArray(value, arr) {\n    var index = -1;\n\n    if (arr.indexOf) {\n      return arr.indexOf(value);\n    } else {\n      each(arr, function (n, i) {\n        if (n === value) {\n          index = i;\n          return false;\n        }\n      });\n    }\n\n    return index;\n  }\n\n  function trim(str) {\n    if (isString(str)) {\n      str = str.trim ? str.trim() : str.replace(REGEXP_TRIM, '1');\n    }\n\n    return str;\n  }\n\n  function each(obj, callback) {\n    var length;\n    var i;\n\n    if (obj && isFunction(callback)) {\n      if (isArray(obj) || isNumber(obj.length)/* array-like */) {\n        for (i = 0, length = obj.length; i < length; i++) {\n          if (callback.call(obj, obj[i], i, obj) === false) {\n            break;\n          }\n        }\n      } else if (isObject(obj)) {\n        for (i in obj) {\n          if (obj.hasOwnProperty(i)) {\n            if (callback.call(obj, obj[i], i, obj) === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function extend(obj) {\n    var args;\n\n    if (arguments.length > 1) {\n      args = toArray(arguments);\n\n      if (Object.assign) {\n        return Object.assign.apply(Object, args);\n      }\n\n      args.shift();\n\n      each(args, function (arg) {\n        each(arg, function (prop, i) {\n          obj[i] = prop;\n        });\n      });\n    }\n\n    return obj;\n  }\n\n  function proxy(fn, context) {\n    var args = toArray(arguments, 2);\n\n    return function () {\n      return fn.apply(context, args.concat(toArray(arguments)));\n    };\n  }\n\n  function setStyle(element, styles) {\n    var style = element.style;\n\n    each(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n\n  function getStyle(element) {\n    return window.getComputedStyle ?\n      window.getComputedStyle(element, null) :\n      element.currentStyle;\n  }\n\n  function hasClass(element, value) {\n    return element.classList ?\n      element.classList.contains(value) :\n      element.className.indexOf(value) > -1;\n  }\n\n  function addClass(element, value) {\n    var className;\n\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        addClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.add(value);\n    }\n\n    className = trim(element.className);\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = className + ' ' + value;\n    }\n  }\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        removeClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.remove(value);\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  function toggleClass(element, value, added) {\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n\n  function hyphenate(str) {\n    return str.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    } else if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute('data-' + hyphenate(name));\n  }\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute('data-' + hyphenate(name), data);\n    }\n  }\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      delete element[name];\n    } else if (element.dataset) {\n      delete element.dataset[name];\n    } else {\n      element.removeAttribute('data-' + hyphenate(name));\n    }\n  }\n\n  function addListener(element, type, handler, once) {\n    var types = trim(type).split(REGEXP_SPACES);\n    var originalHandler = handler;\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        addListener(element, type, handler);\n      });\n    }\n\n    if (once) {\n      handler = function () {\n        removeListener(element, type, handler);\n\n        return originalHandler.apply(element, arguments);\n      };\n    }\n\n    if (element.addEventListener) {\n      element.addEventListener(type, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent('on' + type, handler);\n    }\n  }\n\n  function removeListener(element, type, handler) {\n    var types = trim(type).split(REGEXP_SPACES);\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        removeListener(element, type, handler);\n      });\n    }\n\n    if (element.removeEventListener) {\n      element.removeEventListener(type, handler, false);\n    } else if (element.detachEvent) {\n      element.detachEvent('on' + type, handler);\n    }\n  }\n\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    if (element.dispatchEvent) {\n\n      // Event and CustomEvent on IE9-11 are global objects, not constructors\n      if (isFunction(Event) && isFunction(CustomEvent)) {\n        if (isUndefined(data)) {\n          event = new Event(type, {\n            bubbles: true,\n            cancelable: true\n          });\n        } else {\n          event = new CustomEvent(type, {\n            detail: data,\n            bubbles: true,\n            cancelable: true\n          });\n        }\n      } else {\n        // IE9-11\n        if (isUndefined(data)) {\n          event = document.createEvent('Event');\n          event.initEvent(type, true, true);\n        } else {\n          event = document.createEvent('CustomEvent');\n          event.initCustomEvent(type, true, true, data);\n        }\n      }\n\n      // IE9+\n      return element.dispatchEvent(event);\n    } else if (element.fireEvent) {\n\n      // IE6-10 (native events only)\n      return element.fireEvent('on' + type);\n    }\n  }\n\n  function preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function getEvent(event) {\n    var e = event || window.event;\n    var doc;\n\n    // Fix target property (IE8)\n    if (!e.target) {\n      e.target = e.srcElement || document;\n    }\n\n    if (!isNumber(e.pageX)) {\n      doc = document.documentElement;\n      e.pageX = e.clientX + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0);\n      e.pageY = e.clientY + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0);\n    }\n\n    return e;\n  }\n\n  function getOffset(element) {\n    var doc = document.documentElement;\n    var box = element.getBoundingClientRect();\n\n    return {\n      left: box.left + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0),\n      top: box.top + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0)\n    };\n  }\n\n  function getTouchesCenter(touches) {\n    var length = touches.length;\n    var pageX = 0;\n    var pageY = 0;\n\n    if (length) {\n      each(touches, function (touch) {\n        pageX += touch.pageX;\n        pageY += touch.pageY;\n      });\n\n      pageX /= length;\n      pageY /= length;\n    }\n\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  function getByTag(element, tagName) {\n    return element.getElementsByTagName(tagName);\n  }\n\n  function getByClass(element, className) {\n    return element.getElementsByClassName ?\n      element.getElementsByClassName(className) :\n      element.querySelectorAll('.' + className);\n  }\n\n  function appendChild(element, elem) {\n    if (elem.length) {\n      return each(elem, function (el) {\n        appendChild(element, el);\n      });\n    }\n\n    element.appendChild(elem);\n  }\n\n  function removeChild(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  function empty(element) {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  function setText(element, text) {\n    if (!isUndefined(element.textContent)) {\n      element.textContent = text;\n    } else {\n      element.innerText = text;\n    }\n  }\n\n  // Force reflow to enable CSS3 transition\n  function forceReflow(element) {\n    return element.offsetWidth;\n  }\n\n  // e.g.: http://domain.com/path/to/picture.jpg?size=1280×960 -> picture.jpg\n  function getImageName(url) {\n    return isString(url) ? url.replace(/^.*\\//, '').replace(/[\\?&#].*$/, '') : '';\n  }\n\n  function getImageSize(image, callback) {\n    var newImage;\n\n    // Modern browsers\n    if (image.naturalWidth) {\n      return callback(image.naturalWidth, image.naturalHeight);\n    }\n\n    // IE8: Don't use `new Image()` here\n    newImage = document.createElement('img');\n\n    newImage.onload = function () {\n      callback(this.width, this.height);\n    };\n\n    newImage.src = image.src;\n  }\n\n  function getTransform(data) {\n    var transforms = [];\n    var rotate = data.rotate;\n    var scaleX = data.scaleX;\n    var scaleY = data.scaleY;\n\n    // Rotate should come first before scale\n    if (isNumber(rotate)) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (isNumber(scaleX)) {\n      transforms.push('scaleX(' + scaleX + ')');\n    }\n\n    if (isNumber(scaleY)) {\n      transforms.push('scaleY(' + scaleY + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n\n  function getResponsiveClass(option) {\n    switch (option) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n    }\n  }\n\n  function Viewer(element, options) {\n    var _this = this;\n\n    _this.element = element;\n    _this.options = extend({}, Viewer.DEFAULTS, isPlainObject(options) && options);\n    _this.isImg = false;\n    _this.isBuilt = false;\n    _this.isShown = false;\n    _this.isViewed = false;\n    _this.isFulled = false;\n    _this.isPlayed = false;\n    _this.wheeling = false;\n    _this.playing = false;\n    _this.fading = false;\n    _this.tooltiping = false;\n    _this.transitioning = false;\n    _this.action = false;\n    _this.target = false;\n    _this.timeout = false;\n    _this.index = 0;\n    _this.length = 0;\n    _this.init();\n  }\n\n  Viewer.prototype = {\n    constructor: Viewer,\n\n    init: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var isImg = element.tagName.toLowerCase() === 'img';\n      var images = isImg ? [element] : getByTag(element, 'img');\n      var length = images.length;\n      var ready = proxy(_this.ready, _this);\n\n      if (getData(element, NAMESPACE)) {\n        return;\n      }\n\n      setData(element, NAMESPACE, _this);\n\n      if (!length) {\n        return;\n      }\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, true);\n      }\n\n      // Override `transition` option if it is not supported\n      if (!SUPPORT_TRANSITION) {\n        options.transition = false;\n      }\n\n      _this.isImg = isImg;\n      _this.length = length;\n      _this.count = 0;\n      _this.images = images;\n      _this.body = document.body;\n      _this.scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n      if (options.inline) {\n        addListener(element, EVENT_READY, function () {\n          _this.view();\n        }, true);\n\n        each(images, function (image) {\n          if (image.complete) {\n            ready();\n          } else {\n            addListener(image, EVENT_LOAD, ready, true);\n          }\n        });\n      } else {\n        addListener(element, EVENT_CLICK, (_this._start = proxy(_this.start, _this)));\n      }\n    },\n\n    ready: function () {\n      var _this = this;\n\n      _this.count++;\n\n      if (_this.count === _this.length) {\n        _this.build();\n      }\n    },\n\n    build: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var template;\n      var parent;\n      var viewer;\n      var button;\n      var toolbar;\n      var navbar;\n      var title;\n      var rotate;\n\n      if (_this.isBuilt) {\n        return;\n      }\n\n      template = document.createElement('div');\n      template.innerHTML = Viewer.TEMPLATE;\n\n      _this.parent = parent = element.parentNode;\n      _this.viewer = viewer = getByClass(template, 'viewer-container')[0];\n      _this.canvas = getByClass(viewer, 'viewer-canvas')[0];\n      _this.footer = getByClass(viewer, 'viewer-footer')[0];\n      _this.title = title = getByClass(viewer, 'viewer-title')[0];\n      _this.toolbar = toolbar = getByClass(viewer, 'viewer-toolbar')[0];\n      _this.navbar = navbar = getByClass(viewer, 'viewer-navbar')[0];\n      _this.button = button = getByClass(viewer, 'viewer-button')[0];\n      _this.tooltipBox = getByClass(viewer, 'viewer-tooltip')[0];\n      _this.player = getByClass(viewer, 'viewer-player')[0];\n      _this.list = getByClass(viewer, 'viewer-list')[0];\n\n      addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n      addClass(toolbar, !options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));\n      addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n      toggleClass(button, CLASS_HIDE, !options.button);\n\n      toggleClass(toolbar.querySelector('.viewer-one-to-one'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"zoom\"]'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"flip\"]'), CLASS_INVISIBLE, !options.scalable);\n\n      if (!options.rotatable) {\n        rotate = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n        addClass(rotate, CLASS_INVISIBLE);\n        appendChild(toolbar, rotate);\n      }\n\n      if (options.inline) {\n        addClass(button, CLASS_FULLSCREEN);\n        setStyle(viewer, {\n          zIndex: options.zIndexInline\n        });\n\n        if (getStyle(parent).position === 'static') {\n          setStyle(parent, {\n            position: 'relative'\n          });\n        }\n      } else {\n        addClass(button, CLASS_CLOSE);\n        addClass(viewer, CLASS_FIXED);\n        addClass(viewer, CLASS_FADE);\n        addClass(viewer, CLASS_HIDE);\n\n        setStyle(viewer, {\n          zIndex: options.zIndex\n        });\n      }\n\n      // Inserts the viewer after to the current element\n      parent.insertBefore(viewer, element.nextSibling);\n\n      if (options.inline) {\n        _this.render();\n        _this.bind();\n        _this.isShown = true;\n      }\n\n      _this.isBuilt = true;\n\n      dispatchEvent(element, EVENT_READY);\n    },\n\n    unbuild: function () {\n      var _this = this;\n\n      if (!_this.isBuilt) {\n        return;\n      }\n\n      _this.isBuilt = false;\n      removeChild(_this.viewer);\n    },\n\n    bind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        addListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      addListener(viewer, EVENT_CLICK, (_this._click = proxy(_this.click, _this)));\n      addListener(viewer, EVENT_WHEEL, (_this._wheel = proxy(_this.wheel, _this)));\n      addListener(_this.canvas, EVENT_MOUSEDOWN, (_this._mousedown = proxy(_this.mousedown, _this)));\n      addListener(document, EVENT_MOUSEMOVE, (_this._mousemove = proxy(_this.mousemove, _this)));\n      addListener(document, EVENT_MOUSEUP, (_this._mouseup = proxy(_this.mouseup, _this)));\n      addListener(document, EVENT_KEYDOWN, (_this._keydown = proxy(_this.keydown, _this)));\n      addListener(window, EVENT_RESIZE, (_this._resize = proxy(_this.resize, _this)));\n    },\n\n    unbind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        removeListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        removeListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      removeListener(viewer, EVENT_CLICK, _this._click);\n      removeListener(viewer, EVENT_WHEEL, _this._wheel);\n      removeListener(_this.canvas, EVENT_MOUSEDOWN, _this._mousedown);\n      removeListener(document, EVENT_MOUSEMOVE, _this._mousemove);\n      removeListener(document, EVENT_MOUSEUP, _this._mouseup);\n      removeListener(document, EVENT_KEYDOWN, _this._keydown);\n      removeListener(window, EVENT_RESIZE, _this._resize);\n    },\n\n    render: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.initList();\n      _this.renderViewer();\n    },\n\n    initContainer: function () {\n      var _this = this;\n\n      _this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n\n    initViewer: function () {\n      var _this = this;\n      var options = _this.options;\n      var parent = _this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        _this.parentData = viewerData = {\n          width: max(parent.offsetWidth, options.minWidth),\n          height: max(parent.offsetHeight, options.minHeight)\n        };\n      }\n\n      if (_this.isFulled || !viewerData) {\n        viewerData = _this.containerData;\n      }\n\n      _this.viewerData = extend({}, viewerData);\n    },\n\n    renderViewer: function () {\n      var _this = this;\n\n      if (_this.options.inline && !_this.isFulled) {\n        setStyle(_this.viewer, _this.viewerData);\n      }\n    },\n\n    initList: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var list = _this.list;\n      var items = [];\n\n      each(_this.images, function (image, i) {\n        var src = image.src;\n        var alt = image.alt || getImageName(src);\n        var url = options.url;\n\n        if (!src) {\n          return;\n        }\n\n        if (isString(url)) {\n          url = image.getAttribute(url);\n        } else if (isFunction(url)) {\n          url = url.call(image, image);\n        }\n\n        items.push(\n          '<li>' +\n            '<img' +\n              ' src=\"' + src + '\"' +\n              ' data-action=\"view\"' +\n              ' data-index=\"' +  i + '\"' +\n              ' data-original-url=\"' +  (url || src) + '\"' +\n              ' alt=\"' +  alt + '\"' +\n            '>' +\n          '</li>'\n        );\n      });\n\n      list.innerHTML = items.join('');\n\n      each(getByTag(list, 'img'), function (image) {\n        setData(image, 'filled', true);\n        addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n      });\n\n      _this.items = getByTag(list, 'li');\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, true);\n      }\n    },\n\n    renderList: function (index) {\n      var _this = this;\n      var i = index || _this.index;\n      var width = _this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n      // Place the active item in the center of the screen\n      setStyle(_this.list, {\n        width: outerWidth * _this.length,\n        marginLeft: (_this.viewerData.width - width) / 2 - outerWidth * i\n      });\n    },\n\n    resetList: function () {\n      var _this = this;\n\n      empty(_this.list);\n      removeClass(_this.list, CLASS_TRANSITION);\n      setStyle({\n        marginLeft: 0\n      });\n    },\n\n    initImage: function (callback) {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var viewerData = _this.viewerData;\n      var footerHeight = _this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = _this.imageData || {};\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        var initialImageData;\n        var imageData;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = min(width * 0.9, naturalWidth);\n        height = min(height * 0.9, naturalHeight);\n\n        imageData = {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: aspectRatio,\n          ratio: width / naturalWidth,\n          width: width,\n          height: height,\n          left: (viewerWidth - width) / 2,\n          top: (viewerHeight - height) / 2\n        };\n\n        initialImageData = extend({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this.imageData = imageData;\n        _this.initialImageData = initialImageData;\n\n        if (isFunction(callback)) {\n          callback();\n        }\n      });\n    },\n\n    renderImage: function (callback) {\n      var _this = this;\n      var image = _this.image;\n      var imageData = _this.imageData;\n      var transform = getTransform(imageData);\n\n      setStyle(image, {\n        width: imageData.width,\n        height: imageData.height,\n        marginLeft: imageData.left,\n        marginTop: imageData.top,\n        WebkitTransform: transform,\n        msTransform: transform,\n        transform: transform\n      });\n\n      if (isFunction(callback)) {\n        if (_this.transitioning) {\n          addListener(image, EVENT_TRANSITIONEND, callback, true);\n        } else {\n          callback();\n        }\n      }\n    },\n\n    resetImage: function () {\n      var _this = this;\n\n      // this.image only defined after viewed\n      if (_this.image) {\n        removeChild(_this.image);\n        _this.image = null;\n      }\n    },\n\n    start: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n\n      if (target.tagName.toLowerCase() === 'img') {\n        _this.target = target;\n        _this.show();\n      }\n    },\n\n    click: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n      var action = getData(target, 'action');\n      var imageData = _this.imageData;\n\n      switch (action) {\n        case 'mix':\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (_this.options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              } else {\n                _this.full();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        case 'view':\n          _this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          _this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          _this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          _this.toggle();\n          break;\n\n        case 'reset':\n          _this.reset();\n          break;\n\n        case 'prev':\n          _this.prev();\n          break;\n\n        case 'play':\n          _this.play();\n          break;\n\n        case 'next':\n          _this.next();\n          break;\n\n        case 'rotate-left':\n          _this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          _this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          _this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          _this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n      }\n    },\n\n    load: function () {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var index = _this.index;\n      var viewerData = _this.viewerData;\n\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n        _this.timeout = false;\n      }\n\n      removeClass(image, CLASS_INVISIBLE);\n\n      image.style.cssText = (\n        'width:0;' +\n        'height:0;' +\n        'margin-left:' + viewerData.width / 2 + 'px;' +\n        'margin-top:' + viewerData.height / 2 + 'px;' +\n        'max-width:none!important;' +\n        'visibility:visible;'\n      );\n\n      _this.initImage(function () {\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        toggleClass(image, CLASS_MOVE, options.movable);\n\n        _this.renderImage(function () {\n          _this.isViewed = true;\n          dispatchEvent(_this.element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          });\n        });\n      });\n    },\n\n    loadImage: function (event) {\n      var e = getEvent(event);\n      var image = e.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else {\n          if (filled) {\n            height = parentWidth / aspectRatio;\n          } else {\n            width = parentHeight * aspectRatio;\n          }\n        }\n\n        setStyle(image, {\n          width: width,\n          height: height,\n          marginLeft: (parentWidth - width) / 2,\n          marginTop: (parentHeight - height) / 2\n        });\n      });\n    },\n\n    resize: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.renderViewer();\n      _this.renderList();\n\n      if (_this.isViewed) {\n        _this.initImage(function () {\n          _this.renderImage();\n        });\n      }\n\n      if (_this.isPlayed) {\n        each(getByTag(_this.player, 'img'), function (image) {\n          addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n\n    wheel: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var ratio = Number(_this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      preventDefault(e);\n\n      // Limit wheel speed to prevent zoom too fast\n      if (_this.wheeling) {\n        return;\n      }\n\n      _this.wheeling = true;\n\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (e.deltaY) {\n        delta = e.deltaY > 0 ? 1 : -1;\n      } else if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n      } else if (e.detail) {\n        delta = e.detail > 0 ? 1 : -1;\n      }\n\n      _this.zoom(-delta * ratio, true, e);\n    },\n\n    keydown: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var options = _this.options;\n      var key = e.keyCode || e.which || e.charCode;\n\n      if (!_this.isFulled || !options.keyboard) {\n        return;\n      }\n\n      switch (key) {\n\n        // (Key: Esc)\n        case 27:\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        // (Key: Space)\n        case 32:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n\n          break;\n\n        // View previous (Key: ←)\n        case 37:\n          _this.prev();\n          break;\n\n        // Zoom in (Key: ↑)\n        case 38:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(options.zoomRatio, true);\n          break;\n\n        // View next (Key: →)\n        case 39:\n          _this.next();\n          break;\n\n        // Zoom out (Key: ↓)\n        case 40:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Zoom out to initial size (Key: Ctrl + 0)\n        case 48:\n          // Go to next\n\n        // Zoom in to natural size (Key: Ctrl + 1)\n        case 49:\n          if (e.ctrlKey || e.shiftKey) {\n            preventDefault(e);\n            _this.toggle();\n          }\n\n          break;\n\n        // No default\n      }\n    },\n\n    mousedown: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = options.movable ? 'move' : false;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.startX2 = touch.pageX;\n            _this.startY2 = touch.pageY;\n            action = 'zoom';\n          } else {\n            return;\n          }\n        } else {\n          if (_this.isSwitchable()) {\n            action = 'switch';\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n        _this.action = action;\n        _this.startX = touch ? touch.pageX : e.pageX;\n        _this.startY = touch ? touch.pageY : e.pageY;\n      }\n    },\n\n    mousemove: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = _this.action;\n      var image = _this.image;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.endX2 = touch.pageX;\n            _this.endY2 = touch.pageY;\n          } else {\n            return;\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && options.transition && hasClass(image, CLASS_TRANSITION)) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n\n        _this.endX = touch ? touch.pageX : e.pageX;\n        _this.endY = touch ? touch.pageY : e.pageY;\n\n        _this.change(e);\n      }\n    },\n\n    mouseup: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var action = _this.action;\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && _this.options.transition) {\n          addClass(_this.image, CLASS_TRANSITION);\n        }\n\n        _this.action = false;\n      }\n    },\n\n    // Show the viewer (only available in modal mode)\n    show: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer;\n\n      if (options.inline || _this.transitioning) {\n        return _this;\n      }\n\n      if (!_this.isBuilt) {\n        _this.build();\n      }\n\n      viewer = _this.viewer;\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, true);\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false) {\n        return _this;\n      }\n\n      _this.open();\n      removeClass(viewer, CLASS_HIDE);\n\n      addListener(element, EVENT_SHOWN, function () {\n        _this.view(_this.target ? inArray(_this.target, toArray(_this.images)) : _this.index);\n        _this.target = false;\n      }, true);\n\n      if (options.transition) {\n        _this.transitioning = true;\n        addClass(viewer, CLASS_TRANSITION);\n        forceReflow(viewer);\n        addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.shown, _this), true);\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        _this.shown();\n      }\n\n      return _this;\n    },\n\n    // Hide the viewer (only available in modal mode)\n    hide: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (options.inline || _this.transitioning || !_this.isShown) {\n        return _this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, true);\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return _this;\n      }\n\n      if (_this.isViewed && options.transition) {\n        _this.transitioning = true;\n        addListener(_this.image, EVENT_TRANSITIONEND, function () {\n          addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.hidden, _this), true);\n          removeClass(viewer, CLASS_IN);\n        }, true);\n        _this.zoomTo(0, false, false, true);\n      } else {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      }\n\n      return _this;\n    },\n\n    /**\n     * View one of the images with image's index\n     *\n     * @param {Number} index\n     */\n    view: function (index) {\n      var _this = this;\n      var element = _this.element;\n      var title = _this.title;\n      var canvas = _this.canvas;\n      var image;\n      var item;\n      var img;\n      var url;\n      var alt;\n\n      index = Number(index) || 0;\n\n      if (!_this.isShown || _this.isPlayed || index < 0 || index >= _this.length ||\n        _this.isViewed && index === _this.index) {\n        return _this;\n      }\n\n      item = _this.items[index];\n      img = getByTag(item, 'img')[0];\n      url = getData(img, 'originalUrl');\n      alt = img.getAttribute('alt');\n\n      image = document.createElement('img');\n      image.src = url;\n      image.alt = alt;\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: _this.images[index],\n        index: index,\n        image: image\n      }) === false) {\n        return _this;\n      }\n\n      _this.image = image;\n\n      if (_this.isViewed) {\n        removeClass(_this.items[_this.index], CLASS_ACTIVE);\n      }\n\n      addClass(item, CLASS_ACTIVE);\n\n      _this.isViewed = false;\n      _this.index = index;\n      _this.imageData = null;\n\n      addClass(image, CLASS_INVISIBLE);\n      empty(canvas);\n      appendChild(canvas, image);\n\n      // Center current item\n      _this.renderList();\n\n      // Clear title\n      empty(title);\n\n      // Generate title after viewed\n      addListener(element, EVENT_VIEWED, function () {\n        var imageData = _this.imageData;\n        var width = imageData.naturalWidth;\n        var height = imageData.naturalHeight;\n\n        setText(title, alt + ' (' + width + ' × ' + height + ')');\n      }, true);\n\n      if (image.complete) {\n        _this.load();\n      } else {\n        addListener(image, EVENT_LOAD, proxy(_this.load, _this), true);\n\n        if (_this.timeout) {\n          clearTimeout(_this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        _this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this.timeout = false;\n        }, 1000);\n      }\n\n      return _this;\n    },\n\n    // View the previous image\n    prev: function () {\n      var _this = this;\n\n      _this.view(max(_this.index - 1, 0));\n\n      return _this;\n    },\n\n    // View the next image\n    next: function () {\n      var _this = this;\n\n      _this.view(min(_this.index + 1, _this.length - 1));\n\n      return _this;\n    },\n\n    /**\n     * Move the image with relative offsets\n     *\n     * @param {Number} offsetX\n     * @param {Number} offsetY (optional)\n     */\n    move: function (offsetX, offsetY) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      _this.moveTo(\n        isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n        isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY)\n      );\n\n      return _this;\n    },\n\n    /**\n     * Move the image to an absolute point\n     *\n     * @param {Number} x\n     * @param {Number} y (optional)\n     */\n    moveTo: function (x, y) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"y\" is not present, its default value is \"x\"\n      if (isUndefined(y)) {\n        y = x;\n      }\n\n      x = Number(x);\n      y = Number(y);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.movable) {\n        if (isNumber(x)) {\n          imageData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          imageData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     */\n    zoom: function (ratio, hasTooltip, _originalEvent) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio =  1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      _this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     * @param {Boolean} _zoomable (private)\n     */\n    zoomTo: function (ratio, hasTooltip, _originalEvent, _zoomable) {\n      var _this = this;\n      var options = _this.options;\n      var minZoomRatio = 0.01;\n      var maxZoomRatio = 100;\n      var imageData = _this.imageData;\n      var newWidth;\n      var newHeight;\n      var offset;\n      var center;\n\n      ratio = max(0, ratio);\n\n      if (isNumber(ratio) && _this.isViewed && !_this.isPlayed && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          minZoomRatio = max(minZoomRatio, options.minZoomRatio);\n          maxZoomRatio = min(maxZoomRatio, options.maxZoomRatio);\n          ratio = min(max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        newWidth = imageData.naturalWidth * ratio;\n        newHeight = imageData.naturalHeight * ratio;\n\n        if (_originalEvent) {\n          offset = getOffset(_this.viewer);\n          center = _originalEvent.touches ? getTouchesCenter(_originalEvent.touches) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.left -= (newWidth - imageData.width) * (\n            ((center.pageX - offset.left) - imageData.left) / imageData.width\n          );\n          imageData.top -= (newHeight - imageData.height) * (\n            ((center.pageY - offset.top) - imageData.top) / imageData.height\n          );\n        } else {\n\n          // Zoom from the center of the image\n          imageData.left -= (newWidth - imageData.width) / 2;\n          imageData.top -= (newHeight - imageData.height) / 2;\n        }\n\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        _this.renderImage();\n\n        if (hasTooltip) {\n          _this.tooltip();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image with a relative degree\n     *\n     * @param {Number} degree\n     */\n    rotate: function (degree) {\n      var _this = this;\n\n      _this.rotateTo((_this.imageData.rotate || 0) + Number(degree));\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n     *\n     * @param {Number} degree\n     */\n    rotateTo: function (degree) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      degree = Number(degree);\n\n      if (isNumber(degree) && _this.isViewed && !_this.isPlayed && _this.options.rotatable) {\n        imageData.rotate = degree;\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the image\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n     *\n     * @param {Number} scaleX\n     * @param {Number} scaleY (optional)\n     */\n    scale: function (scaleX, scaleY) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"scaleY\" is not present, its default value is \"scaleX\"\n      if (isUndefined(scaleY)) {\n        scaleY = scaleX;\n      }\n\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          changed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the abscissa of the image\n     *\n     * @param {Number} scaleX\n     */\n    scaleX: function (scaleX) {\n      var _this = this;\n\n      _this.scale(scaleX, _this.imageData.scaleY);\n\n      return _this;\n    },\n\n    /**\n     * Scale the ordinate of the image\n     *\n     * @param {Number} scaleY\n     */\n    scaleY: function (scaleY) {\n      var _this = this;\n\n      _this.scale(_this.imageData.scaleX, scaleY);\n\n      return _this;\n    },\n\n    // Play the images\n    play: function () {\n      var _this = this;\n      var options = _this.options;\n      var player = _this.player;\n      var load = proxy(_this.loadImage, _this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      var playing;\n\n      if (!_this.isShown || _this.isPlayed) {\n        return _this;\n      }\n\n      if (options.fullscreen) {\n        _this.requestFullscreen();\n      }\n\n      _this.isPlayed = true;\n      addClass(player, CLASS_SHOW);\n\n      each(_this.items, function (item, i) {\n        var img = getByTag(item, 'img')[0];\n        var image = document.createElement('img');\n\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        total++;\n\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, load, true);\n        appendChild(player, image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        playing = function () {\n          _this.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index++;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n\n            playing();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          playing();\n        }\n      }\n\n      return _this;\n    },\n\n    // Stop play\n    stop: function () {\n      var _this = this;\n      var player = _this.player;\n\n      if (!_this.isPlayed) {\n        return _this;\n      }\n\n      if (_this.options.fullscreen) {\n        _this.exitFullscreen();\n      }\n\n      _this.isPlayed = false;\n      clearTimeout(_this.playing);\n      removeClass(player, CLASS_SHOW);\n      empty(player);\n\n      return _this;\n    },\n\n    // Enter modal mode (only available in inline mode)\n    full: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isShown || _this.isPlayed || _this.isFulled || !options.inline) {\n        return _this;\n      }\n\n      _this.isFulled = true;\n      _this.open();\n      addClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('style', '');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      _this.initContainer();\n      _this.viewerData = extend({}, _this.containerData);\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Exit modal mode (only available in inline mode)\n    exit: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isFulled) {\n        return _this;\n      }\n\n      _this.isFulled = false;\n      _this.close();\n      removeClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n\n      _this.viewerData = extend({}, _this.parentData);\n      _this.renderViewer();\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Show the current ratio of the image with percentage\n    tooltip: function () {\n      var _this = this;\n      var options = _this.options;\n      var tooltipBox = _this.tooltipBox;\n      var imageData = _this.imageData;\n\n      if (!_this.isViewed || _this.isPlayed || !options.tooltip) {\n        return _this;\n      }\n\n      setText(tooltipBox, round(imageData.ratio * 100) + '%');\n\n      if (!_this.tooltiping) {\n        if (options.transition) {\n          if (_this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITIONEND);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          forceReflow(tooltipBox);\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n        }\n      } else {\n        clearTimeout(_this.tooltiping);\n      }\n\n      _this.tooltiping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITIONEND, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            _this.fading = false;\n          }, true);\n\n          removeClass(tooltipBox, CLASS_IN);\n          _this.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n        }\n\n        _this.tooltiping = false;\n      }, 1000);\n\n      return _this;\n    },\n\n    // Toggle the image size between its natural size and initial size\n    toggle: function () {\n      var _this = this;\n\n      if (_this.imageData.ratio === 1) {\n        _this.zoomTo(_this.initialImageData.ratio, true);\n      } else {\n        _this.zoomTo(1, true);\n      }\n\n      return _this;\n    },\n\n    // Reset the image to its initial state\n    reset: function () {\n      var _this = this;\n\n      if (_this.isViewed && !_this.isPlayed) {\n        _this.imageData = extend({}, _this.initialImageData);\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    // Update viewer when images changed\n    update: function () {\n      var _this = this;\n      var indexes = [];\n      var index;\n\n      // Destroy viewer if the target image was deleted\n      if (_this.isImg && !_this.element.parentNode) {\n        return _this.destroy();\n      }\n\n      _this.length = _this.images.length;\n\n      if (_this.isBuilt) {\n        each(_this.items, function (item, i) {\n          var img = getByTag(item, 'img')[0];\n          var image = _this.images[i];\n\n          if (image) {\n            if (image.src !== img.src) {\n              indexes.push(i);\n            }\n          } else {\n            indexes.push(i);\n          }\n        });\n\n        setStyle(_this.list, {\n          width: 'auto'\n        });\n\n        _this.initList();\n\n        if (_this.isShown) {\n          if (_this.length) {\n            if (_this.isViewed) {\n              index = inArray(_this.index, indexes);\n\n              if (index >= 0) {\n                _this.isViewed = false;\n                _this.view(max(_this.index - (index + 1), 0));\n              } else {\n                addClass(_this.items[_this.index], CLASS_ACTIVE);\n              }\n            }\n          } else {\n            _this.image = null;\n            _this.isViewed = false;\n            _this.index = 0;\n            _this.imageData = null;\n            empty(_this.canvas);\n            empty(_this.title);\n          }\n        }\n      }\n\n      return _this;\n    },\n\n    // Destroy the viewer\n    destroy: function () {\n      var _this = this;\n      var element = _this.element;\n\n      if (_this.options.inline) {\n        _this.unbind();\n      } else {\n        if (_this.isShown) {\n          _this.unbind();\n        }\n\n        removeListener(element, EVENT_CLICK, _this._start);\n      }\n\n      _this.unbuild();\n      removeData(element, NAMESPACE);\n\n      return _this;\n    },\n\n    open: function () {\n      var body = this.body;\n\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.scrollbarWidth + 'px';\n    },\n\n    close: function () {\n      var body = this.body;\n\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = 0;\n    },\n\n    shown: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isFulled = true;\n      _this.isShown = true;\n      _this.isVisible = true;\n      _this.render();\n      _this.bind();\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, true);\n      }\n\n      dispatchEvent(element, EVENT_SHOWN);\n    },\n\n    hidden: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isViewed = false;\n      _this.isFulled = false;\n      _this.isShown = false;\n      _this.isVisible = false;\n      _this.unbind();\n      _this.close();\n      addClass(_this.viewer, CLASS_HIDE);\n      _this.resetList();\n      _this.resetImage();\n\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, true);\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    },\n\n    requestFullscreen: function () {\n      var _this = this;\n      var documentElement = document.documentElement;\n\n      if (_this.isFulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement && !document.msFullscreenElement) {\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        }\n      }\n    },\n\n    exitFullscreen: function () {\n      var _this = this;\n\n      if (_this.isFulled) {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n      }\n    },\n\n    change: function (originalEvent) {\n      var _this = this;\n      var offsetX = _this.endX - _this.startX;\n      var offsetY = _this.endY - _this.startY;\n\n      switch (_this.action) {\n\n        // Move the current image\n        case 'move':\n          _this.move(offsetX, offsetY);\n          break;\n\n        // Zoom the current image\n        case 'zoom':\n          _this.zoom(function (x1, y1, x2, y2) {\n            var z1 = sqrt(x1 * x1 + y1 * y1);\n            var z2 = sqrt(x2 * x2 + y2 * y2);\n\n            return (z2 - z1) / z1;\n          }(\n            abs(_this.startX - _this.startX2),\n            abs(_this.startY - _this.startY2),\n            abs(_this.endX - _this.endX2),\n            abs(_this.endY - _this.endY2)\n          ), false, originalEvent);\n\n          _this.startX2 = _this.endX2;\n          _this.startY2 = _this.endY2;\n          break;\n\n        case 'switch':\n          _this.action = 'switched';\n\n          if (abs(offsetX) > abs(offsetY)) {\n            if (offsetX > 1) {\n              _this.prev();\n            } else if (offsetX < -1) {\n              _this.next();\n            }\n          }\n\n          break;\n\n        // No default\n      }\n\n      // Override\n      _this.startX = _this.endX;\n      _this.startY = _this.endY;\n    },\n\n    isSwitchable: function () {\n      var _this = this;\n      var imageData = _this.imageData;\n      var viewerData = _this.viewerData;\n\n      return imageData.left >= 0 && imageData.top >= 0 &&\n        imageData.width <= viewerData.width &&\n        imageData.height <= viewerData.height;\n    }\n  };\n\n  Viewer.DEFAULTS = {\n\n    // Enable inline mode\n    inline: false,\n\n    // Show the button on the top-right of the viewer\n    button: true,\n\n    // Show the navbar\n    navbar: true,\n\n    // Show the title\n    title: true,\n\n    // Show the toolbar\n    toolbar: true,\n\n    // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n    tooltip: true,\n\n    // Enable to move the image\n    movable: true,\n\n    // Enable to zoom the image\n    zoomable: true,\n\n    // Enable to rotate the image\n    rotatable: true,\n\n    // Enable to scale the image\n    scalable: true,\n\n    // Enable CSS3 Transition for some special elements\n    transition: true,\n\n    // Enable to request fullscreen when play\n    fullscreen: true,\n\n    // Enable keyboard support\n    keyboard: true,\n\n    // Define interval of each image when playing\n    interval: 5000,\n\n    // Min width of the viewer in inline mode\n    minWidth: 200,\n\n    // Min height of the viewer in inline mode\n    minHeight: 100,\n\n    // Define the ratio when zoom the image by wheeling mouse\n    zoomRatio: 0.1,\n\n    // Define the min ratio of the image when zoom out\n    minZoomRatio: 0.01,\n\n    // Define the max ratio of the image when zoom in\n    maxZoomRatio: 100,\n\n    // Define the CSS `z-index` value of viewer in modal mode.\n    zIndex: 2015,\n\n    // Define the CSS `z-index` value of viewer in inline mode.\n    zIndexInline: 0,\n\n    // Define where to get the original image URL for viewing\n    // Type: String (an image attribute) or Function (should return an image URL)\n    url: 'src',\n\n    // Event shortcuts\n    build: null,\n    built: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null\n  };\n\n  Viewer.TEMPLATE = (\n    '<div class=\"viewer-container\">' +\n      '<div class=\"viewer-canvas\"></div>' +\n      '<div class=\"viewer-footer\">' +\n        '<div class=\"viewer-title\"></div>' +\n        '<ul class=\"viewer-toolbar\">' +\n          '<li class=\"viewer-zoom-in\" data-action=\"zoom-in\"></li>' +\n          '<li class=\"viewer-zoom-out\" data-action=\"zoom-out\"></li>' +\n          '<li class=\"viewer-one-to-one\" data-action=\"one-to-one\"></li>' +\n          '<li class=\"viewer-reset\" data-action=\"reset\"></li>' +\n          '<li class=\"viewer-prev\" data-action=\"prev\"></li>' +\n          '<li class=\"viewer-play\" data-action=\"play\"></li>' +\n          '<li class=\"viewer-next\" data-action=\"next\"></li>' +\n          '<li class=\"viewer-rotate-left\" data-action=\"rotate-left\"></li>' +\n          '<li class=\"viewer-rotate-right\" data-action=\"rotate-right\"></li>' +\n          '<li class=\"viewer-flip-horizontal\" data-action=\"flip-horizontal\"></li>' +\n          '<li class=\"viewer-flip-vertical\" data-action=\"flip-vertical\"></li>' +\n        '</ul>' +\n        '<div class=\"viewer-navbar\">' +\n          '<ul class=\"viewer-list\"></ul>' +\n        '</div>' +\n      '</div>' +\n      '<div class=\"viewer-tooltip\"></div>' +\n      '<div class=\"viewer-button\" data-action=\"mix\"></div>' +\n      '<div class=\"viewer-player\"></div>' +\n    '</div>'\n  );\n\n  var _Viewer = window.Viewer;\n\n  Viewer.noConflict = function () {\n    window.Viewer = _Viewer;\n    return Viewer;\n  };\n\n  Viewer.setDefaults = function (options) {\n    extend(Viewer.DEFAULTS, options);\n  };\n\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n      return Viewer;\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n\n  if (!noGlobal) {\n    window.Viewer = Viewer;\n  }\n\n  return Viewer;\n\n});\n\n\n/***/ },\n\n/***/ 4:\n/***/ function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ },\n\n/***/ 56:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar actions = __webpack_require__(1);\nvar paths = __webpack_require__(4);\n\n__webpack_require__(21);\n\nvar Viewer = __webpack_require__(24);\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar first = true;\n\n$(function () {\n\n    var viewer = new Viewer($('#viewer')[0], {\n        inline: true,\n        viewed: function (e) {\n            console.log('viewed');\n            if (first) {\n                viewer.view($('#viewer').children('.active').index());\n                first = false;\n                e.stopPropagation();\n                return false;\n            }\n            $('#viewer img.active').removeClass('active');\n            var $image = $(e.detail.originalImage);\n            $image.addClass('active');\n            $('#viewer-name').text($image.attr('alt'));\n        }\n    });\n\n    actions.define('close', function () {\n        location.href = PATH + '/files?path=' + $('#viewer img.active').data('path');\n    });\n\n});\n\n/***/ }\n\n},[56]);\n\n\n// WEBPACK FOOTER //\n// dist/viewer.js","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/actions.js\n// module id = 1\n// module chunks = 0 1 2 3 4 5 6 7","/*!\n * Viewer.js v0.5.0\n * https://github.com/fengyuanchen/viewerjs\n *\n * Copyright (c) 2015-2016 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2016-07-22T08:46:05.003Z\n */\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (window) {\n      if (!window.document) {\n        throw new Error('Viewer requires a window with a document');\n      }\n\n      return factory(window);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n\n  'use strict';\n\n  var document = window.document;\n  var Event = window.Event;\n\n  // Constants\n  var NAMESPACE = 'viewer';\n\n  // Classes\n  var CLASS_FIXED = NAMESPACE + '-fixed';\n  var CLASS_OPEN = NAMESPACE + '-open';\n  var CLASS_SHOW = NAMESPACE + '-show';\n  var CLASS_HIDE = NAMESPACE + '-hide';\n  var CLASS_HIDE_XS_DOWN = 'viewer-hide-xs-down';\n  var CLASS_HIDE_SM_DOWN = 'viewer-hide-sm-down';\n  var CLASS_HIDE_MD_DOWN = 'viewer-hide-md-down';\n  var CLASS_FADE = NAMESPACE + '-fade';\n  var CLASS_IN = NAMESPACE + '-in';\n  var CLASS_MOVE = NAMESPACE + '-move';\n  var CLASS_ACTIVE = NAMESPACE + '-active';\n  var CLASS_INVISIBLE = NAMESPACE + '-invisible';\n  var CLASS_TRANSITION = NAMESPACE + '-transition';\n  var CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';\n  var CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';\n  var CLASS_CLOSE = NAMESPACE + '-close';\n\n  // Events\n  var EVENT_MOUSEDOWN = 'mousedown touchstart pointerdown MSPointerDown';\n  var EVENT_MOUSEMOVE = 'mousemove touchmove pointermove MSPointerMove';\n  var EVENT_MOUSEUP = 'mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel';\n  var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n  var EVENT_TRANSITIONEND = 'transitionend';\n  var EVENT_LOAD = 'load';\n  var EVENT_KEYDOWN = 'keydown';\n  var EVENT_CLICK = 'click';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n\n  // RegExps\n  var REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  var REGEXP_TRIM = /^\\s+(.*)\\s+$/;\n  var REGEXP_SPACES = /\\s+/;\n\n  // Supports\n  var SUPPORT_TRANSITION = typeof document.createElement(NAMESPACE).style.transition !== 'undefined';\n\n  // Maths\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n  var round = Math.round;\n\n  // Utilities\n  var objectProto = Object.prototype;\n  var toString = objectProto.toString;\n  var hasOwnProperty = objectProto.hasOwnProperty;\n  var slice = Array.prototype.slice;\n\n  function typeOf(obj) {\n    return toString.call(obj).slice(8, -1).toLowerCase();\n  }\n\n  function isString(str) {\n    return typeof str === 'string';\n  }\n\n  function isNumber(num) {\n    return typeof num === 'number' && !isNaN(num);\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n  }\n\n  function isPlainObject(obj) {\n    var constructor;\n    var prototype;\n\n    if (!isObject(obj)) {\n      return false;\n    }\n\n    try {\n      constructor = obj.constructor;\n      prototype = constructor.prototype;\n\n      return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function isFunction(fn) {\n    return typeOf(fn) === 'function';\n  }\n\n  function isArray(arr) {\n    return Array.isArray ? Array.isArray(arr) : typeOf(arr) === 'array';\n  }\n\n  function toArray(obj, offset) {\n    offset = offset >= 0 ? offset : 0;\n\n    if (Array.from) {\n      return Array.from(obj).slice(offset);\n    }\n\n    return slice.call(obj, offset);\n  }\n\n  function inArray(value, arr) {\n    var index = -1;\n\n    if (arr.indexOf) {\n      return arr.indexOf(value);\n    } else {\n      each(arr, function (n, i) {\n        if (n === value) {\n          index = i;\n          return false;\n        }\n      });\n    }\n\n    return index;\n  }\n\n  function trim(str) {\n    if (isString(str)) {\n      str = str.trim ? str.trim() : str.replace(REGEXP_TRIM, '1');\n    }\n\n    return str;\n  }\n\n  function each(obj, callback) {\n    var length;\n    var i;\n\n    if (obj && isFunction(callback)) {\n      if (isArray(obj) || isNumber(obj.length)/* array-like */) {\n        for (i = 0, length = obj.length; i < length; i++) {\n          if (callback.call(obj, obj[i], i, obj) === false) {\n            break;\n          }\n        }\n      } else if (isObject(obj)) {\n        for (i in obj) {\n          if (obj.hasOwnProperty(i)) {\n            if (callback.call(obj, obj[i], i, obj) === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function extend(obj) {\n    var args;\n\n    if (arguments.length > 1) {\n      args = toArray(arguments);\n\n      if (Object.assign) {\n        return Object.assign.apply(Object, args);\n      }\n\n      args.shift();\n\n      each(args, function (arg) {\n        each(arg, function (prop, i) {\n          obj[i] = prop;\n        });\n      });\n    }\n\n    return obj;\n  }\n\n  function proxy(fn, context) {\n    var args = toArray(arguments, 2);\n\n    return function () {\n      return fn.apply(context, args.concat(toArray(arguments)));\n    };\n  }\n\n  function setStyle(element, styles) {\n    var style = element.style;\n\n    each(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n\n  function getStyle(element) {\n    return window.getComputedStyle ?\n      window.getComputedStyle(element, null) :\n      element.currentStyle;\n  }\n\n  function hasClass(element, value) {\n    return element.classList ?\n      element.classList.contains(value) :\n      element.className.indexOf(value) > -1;\n  }\n\n  function addClass(element, value) {\n    var className;\n\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        addClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.add(value);\n    }\n\n    className = trim(element.className);\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = className + ' ' + value;\n    }\n  }\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        removeClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.remove(value);\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  function toggleClass(element, value, added) {\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n\n  function hyphenate(str) {\n    return str.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    } else if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute('data-' + hyphenate(name));\n  }\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute('data-' + hyphenate(name), data);\n    }\n  }\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      delete element[name];\n    } else if (element.dataset) {\n      delete element.dataset[name];\n    } else {\n      element.removeAttribute('data-' + hyphenate(name));\n    }\n  }\n\n  function addListener(element, type, handler, once) {\n    var types = trim(type).split(REGEXP_SPACES);\n    var originalHandler = handler;\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        addListener(element, type, handler);\n      });\n    }\n\n    if (once) {\n      handler = function () {\n        removeListener(element, type, handler);\n\n        return originalHandler.apply(element, arguments);\n      };\n    }\n\n    if (element.addEventListener) {\n      element.addEventListener(type, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent('on' + type, handler);\n    }\n  }\n\n  function removeListener(element, type, handler) {\n    var types = trim(type).split(REGEXP_SPACES);\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        removeListener(element, type, handler);\n      });\n    }\n\n    if (element.removeEventListener) {\n      element.removeEventListener(type, handler, false);\n    } else if (element.detachEvent) {\n      element.detachEvent('on' + type, handler);\n    }\n  }\n\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    if (element.dispatchEvent) {\n\n      // Event and CustomEvent on IE9-11 are global objects, not constructors\n      if (isFunction(Event) && isFunction(CustomEvent)) {\n        if (isUndefined(data)) {\n          event = new Event(type, {\n            bubbles: true,\n            cancelable: true\n          });\n        } else {\n          event = new CustomEvent(type, {\n            detail: data,\n            bubbles: true,\n            cancelable: true\n          });\n        }\n      } else {\n        // IE9-11\n        if (isUndefined(data)) {\n          event = document.createEvent('Event');\n          event.initEvent(type, true, true);\n        } else {\n          event = document.createEvent('CustomEvent');\n          event.initCustomEvent(type, true, true, data);\n        }\n      }\n\n      // IE9+\n      return element.dispatchEvent(event);\n    } else if (element.fireEvent) {\n\n      // IE6-10 (native events only)\n      return element.fireEvent('on' + type);\n    }\n  }\n\n  function preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function getEvent(event) {\n    var e = event || window.event;\n    var doc;\n\n    // Fix target property (IE8)\n    if (!e.target) {\n      e.target = e.srcElement || document;\n    }\n\n    if (!isNumber(e.pageX)) {\n      doc = document.documentElement;\n      e.pageX = e.clientX + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0);\n      e.pageY = e.clientY + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0);\n    }\n\n    return e;\n  }\n\n  function getOffset(element) {\n    var doc = document.documentElement;\n    var box = element.getBoundingClientRect();\n\n    return {\n      left: box.left + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0),\n      top: box.top + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0)\n    };\n  }\n\n  function getTouchesCenter(touches) {\n    var length = touches.length;\n    var pageX = 0;\n    var pageY = 0;\n\n    if (length) {\n      each(touches, function (touch) {\n        pageX += touch.pageX;\n        pageY += touch.pageY;\n      });\n\n      pageX /= length;\n      pageY /= length;\n    }\n\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  function getByTag(element, tagName) {\n    return element.getElementsByTagName(tagName);\n  }\n\n  function getByClass(element, className) {\n    return element.getElementsByClassName ?\n      element.getElementsByClassName(className) :\n      element.querySelectorAll('.' + className);\n  }\n\n  function appendChild(element, elem) {\n    if (elem.length) {\n      return each(elem, function (el) {\n        appendChild(element, el);\n      });\n    }\n\n    element.appendChild(elem);\n  }\n\n  function removeChild(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  function empty(element) {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  function setText(element, text) {\n    if (!isUndefined(element.textContent)) {\n      element.textContent = text;\n    } else {\n      element.innerText = text;\n    }\n  }\n\n  // Force reflow to enable CSS3 transition\n  function forceReflow(element) {\n    return element.offsetWidth;\n  }\n\n  // e.g.: http://domain.com/path/to/picture.jpg?size=1280×960 -> picture.jpg\n  function getImageName(url) {\n    return isString(url) ? url.replace(/^.*\\//, '').replace(/[\\?&#].*$/, '') : '';\n  }\n\n  function getImageSize(image, callback) {\n    var newImage;\n\n    // Modern browsers\n    if (image.naturalWidth) {\n      return callback(image.naturalWidth, image.naturalHeight);\n    }\n\n    // IE8: Don't use `new Image()` here\n    newImage = document.createElement('img');\n\n    newImage.onload = function () {\n      callback(this.width, this.height);\n    };\n\n    newImage.src = image.src;\n  }\n\n  function getTransform(data) {\n    var transforms = [];\n    var rotate = data.rotate;\n    var scaleX = data.scaleX;\n    var scaleY = data.scaleY;\n\n    // Rotate should come first before scale\n    if (isNumber(rotate)) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (isNumber(scaleX)) {\n      transforms.push('scaleX(' + scaleX + ')');\n    }\n\n    if (isNumber(scaleY)) {\n      transforms.push('scaleY(' + scaleY + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n\n  function getResponsiveClass(option) {\n    switch (option) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n    }\n  }\n\n  function Viewer(element, options) {\n    var _this = this;\n\n    _this.element = element;\n    _this.options = extend({}, Viewer.DEFAULTS, isPlainObject(options) && options);\n    _this.isImg = false;\n    _this.isBuilt = false;\n    _this.isShown = false;\n    _this.isViewed = false;\n    _this.isFulled = false;\n    _this.isPlayed = false;\n    _this.wheeling = false;\n    _this.playing = false;\n    _this.fading = false;\n    _this.tooltiping = false;\n    _this.transitioning = false;\n    _this.action = false;\n    _this.target = false;\n    _this.timeout = false;\n    _this.index = 0;\n    _this.length = 0;\n    _this.init();\n  }\n\n  Viewer.prototype = {\n    constructor: Viewer,\n\n    init: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var isImg = element.tagName.toLowerCase() === 'img';\n      var images = isImg ? [element] : getByTag(element, 'img');\n      var length = images.length;\n      var ready = proxy(_this.ready, _this);\n\n      if (getData(element, NAMESPACE)) {\n        return;\n      }\n\n      setData(element, NAMESPACE, _this);\n\n      if (!length) {\n        return;\n      }\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, true);\n      }\n\n      // Override `transition` option if it is not supported\n      if (!SUPPORT_TRANSITION) {\n        options.transition = false;\n      }\n\n      _this.isImg = isImg;\n      _this.length = length;\n      _this.count = 0;\n      _this.images = images;\n      _this.body = document.body;\n      _this.scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n      if (options.inline) {\n        addListener(element, EVENT_READY, function () {\n          _this.view();\n        }, true);\n\n        each(images, function (image) {\n          if (image.complete) {\n            ready();\n          } else {\n            addListener(image, EVENT_LOAD, ready, true);\n          }\n        });\n      } else {\n        addListener(element, EVENT_CLICK, (_this._start = proxy(_this.start, _this)));\n      }\n    },\n\n    ready: function () {\n      var _this = this;\n\n      _this.count++;\n\n      if (_this.count === _this.length) {\n        _this.build();\n      }\n    },\n\n    build: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var template;\n      var parent;\n      var viewer;\n      var button;\n      var toolbar;\n      var navbar;\n      var title;\n      var rotate;\n\n      if (_this.isBuilt) {\n        return;\n      }\n\n      template = document.createElement('div');\n      template.innerHTML = Viewer.TEMPLATE;\n\n      _this.parent = parent = element.parentNode;\n      _this.viewer = viewer = getByClass(template, 'viewer-container')[0];\n      _this.canvas = getByClass(viewer, 'viewer-canvas')[0];\n      _this.footer = getByClass(viewer, 'viewer-footer')[0];\n      _this.title = title = getByClass(viewer, 'viewer-title')[0];\n      _this.toolbar = toolbar = getByClass(viewer, 'viewer-toolbar')[0];\n      _this.navbar = navbar = getByClass(viewer, 'viewer-navbar')[0];\n      _this.button = button = getByClass(viewer, 'viewer-button')[0];\n      _this.tooltipBox = getByClass(viewer, 'viewer-tooltip')[0];\n      _this.player = getByClass(viewer, 'viewer-player')[0];\n      _this.list = getByClass(viewer, 'viewer-list')[0];\n\n      addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n      addClass(toolbar, !options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));\n      addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n      toggleClass(button, CLASS_HIDE, !options.button);\n\n      toggleClass(toolbar.querySelector('.viewer-one-to-one'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"zoom\"]'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"flip\"]'), CLASS_INVISIBLE, !options.scalable);\n\n      if (!options.rotatable) {\n        rotate = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n        addClass(rotate, CLASS_INVISIBLE);\n        appendChild(toolbar, rotate);\n      }\n\n      if (options.inline) {\n        addClass(button, CLASS_FULLSCREEN);\n        setStyle(viewer, {\n          zIndex: options.zIndexInline\n        });\n\n        if (getStyle(parent).position === 'static') {\n          setStyle(parent, {\n            position: 'relative'\n          });\n        }\n      } else {\n        addClass(button, CLASS_CLOSE);\n        addClass(viewer, CLASS_FIXED);\n        addClass(viewer, CLASS_FADE);\n        addClass(viewer, CLASS_HIDE);\n\n        setStyle(viewer, {\n          zIndex: options.zIndex\n        });\n      }\n\n      // Inserts the viewer after to the current element\n      parent.insertBefore(viewer, element.nextSibling);\n\n      if (options.inline) {\n        _this.render();\n        _this.bind();\n        _this.isShown = true;\n      }\n\n      _this.isBuilt = true;\n\n      dispatchEvent(element, EVENT_READY);\n    },\n\n    unbuild: function () {\n      var _this = this;\n\n      if (!_this.isBuilt) {\n        return;\n      }\n\n      _this.isBuilt = false;\n      removeChild(_this.viewer);\n    },\n\n    bind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        addListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      addListener(viewer, EVENT_CLICK, (_this._click = proxy(_this.click, _this)));\n      addListener(viewer, EVENT_WHEEL, (_this._wheel = proxy(_this.wheel, _this)));\n      addListener(_this.canvas, EVENT_MOUSEDOWN, (_this._mousedown = proxy(_this.mousedown, _this)));\n      addListener(document, EVENT_MOUSEMOVE, (_this._mousemove = proxy(_this.mousemove, _this)));\n      addListener(document, EVENT_MOUSEUP, (_this._mouseup = proxy(_this.mouseup, _this)));\n      addListener(document, EVENT_KEYDOWN, (_this._keydown = proxy(_this.keydown, _this)));\n      addListener(window, EVENT_RESIZE, (_this._resize = proxy(_this.resize, _this)));\n    },\n\n    unbind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        removeListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        removeListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      removeListener(viewer, EVENT_CLICK, _this._click);\n      removeListener(viewer, EVENT_WHEEL, _this._wheel);\n      removeListener(_this.canvas, EVENT_MOUSEDOWN, _this._mousedown);\n      removeListener(document, EVENT_MOUSEMOVE, _this._mousemove);\n      removeListener(document, EVENT_MOUSEUP, _this._mouseup);\n      removeListener(document, EVENT_KEYDOWN, _this._keydown);\n      removeListener(window, EVENT_RESIZE, _this._resize);\n    },\n\n    render: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.initList();\n      _this.renderViewer();\n    },\n\n    initContainer: function () {\n      var _this = this;\n\n      _this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n\n    initViewer: function () {\n      var _this = this;\n      var options = _this.options;\n      var parent = _this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        _this.parentData = viewerData = {\n          width: max(parent.offsetWidth, options.minWidth),\n          height: max(parent.offsetHeight, options.minHeight)\n        };\n      }\n\n      if (_this.isFulled || !viewerData) {\n        viewerData = _this.containerData;\n      }\n\n      _this.viewerData = extend({}, viewerData);\n    },\n\n    renderViewer: function () {\n      var _this = this;\n\n      if (_this.options.inline && !_this.isFulled) {\n        setStyle(_this.viewer, _this.viewerData);\n      }\n    },\n\n    initList: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var list = _this.list;\n      var items = [];\n\n      each(_this.images, function (image, i) {\n        var src = image.src;\n        var alt = image.alt || getImageName(src);\n        var url = options.url;\n\n        if (!src) {\n          return;\n        }\n\n        if (isString(url)) {\n          url = image.getAttribute(url);\n        } else if (isFunction(url)) {\n          url = url.call(image, image);\n        }\n\n        items.push(\n          '<li>' +\n            '<img' +\n              ' src=\"' + src + '\"' +\n              ' data-action=\"view\"' +\n              ' data-index=\"' +  i + '\"' +\n              ' data-original-url=\"' +  (url || src) + '\"' +\n              ' alt=\"' +  alt + '\"' +\n            '>' +\n          '</li>'\n        );\n      });\n\n      list.innerHTML = items.join('');\n\n      each(getByTag(list, 'img'), function (image) {\n        setData(image, 'filled', true);\n        addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n      });\n\n      _this.items = getByTag(list, 'li');\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, true);\n      }\n    },\n\n    renderList: function (index) {\n      var _this = this;\n      var i = index || _this.index;\n      var width = _this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n      // Place the active item in the center of the screen\n      setStyle(_this.list, {\n        width: outerWidth * _this.length,\n        marginLeft: (_this.viewerData.width - width) / 2 - outerWidth * i\n      });\n    },\n\n    resetList: function () {\n      var _this = this;\n\n      empty(_this.list);\n      removeClass(_this.list, CLASS_TRANSITION);\n      setStyle({\n        marginLeft: 0\n      });\n    },\n\n    initImage: function (callback) {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var viewerData = _this.viewerData;\n      var footerHeight = _this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = _this.imageData || {};\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        var initialImageData;\n        var imageData;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = min(width * 0.9, naturalWidth);\n        height = min(height * 0.9, naturalHeight);\n\n        imageData = {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: aspectRatio,\n          ratio: width / naturalWidth,\n          width: width,\n          height: height,\n          left: (viewerWidth - width) / 2,\n          top: (viewerHeight - height) / 2\n        };\n\n        initialImageData = extend({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this.imageData = imageData;\n        _this.initialImageData = initialImageData;\n\n        if (isFunction(callback)) {\n          callback();\n        }\n      });\n    },\n\n    renderImage: function (callback) {\n      var _this = this;\n      var image = _this.image;\n      var imageData = _this.imageData;\n      var transform = getTransform(imageData);\n\n      setStyle(image, {\n        width: imageData.width,\n        height: imageData.height,\n        marginLeft: imageData.left,\n        marginTop: imageData.top,\n        WebkitTransform: transform,\n        msTransform: transform,\n        transform: transform\n      });\n\n      if (isFunction(callback)) {\n        if (_this.transitioning) {\n          addListener(image, EVENT_TRANSITIONEND, callback, true);\n        } else {\n          callback();\n        }\n      }\n    },\n\n    resetImage: function () {\n      var _this = this;\n\n      // this.image only defined after viewed\n      if (_this.image) {\n        removeChild(_this.image);\n        _this.image = null;\n      }\n    },\n\n    start: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n\n      if (target.tagName.toLowerCase() === 'img') {\n        _this.target = target;\n        _this.show();\n      }\n    },\n\n    click: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n      var action = getData(target, 'action');\n      var imageData = _this.imageData;\n\n      switch (action) {\n        case 'mix':\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (_this.options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              } else {\n                _this.full();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        case 'view':\n          _this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          _this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          _this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          _this.toggle();\n          break;\n\n        case 'reset':\n          _this.reset();\n          break;\n\n        case 'prev':\n          _this.prev();\n          break;\n\n        case 'play':\n          _this.play();\n          break;\n\n        case 'next':\n          _this.next();\n          break;\n\n        case 'rotate-left':\n          _this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          _this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          _this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          _this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n      }\n    },\n\n    load: function () {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var index = _this.index;\n      var viewerData = _this.viewerData;\n\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n        _this.timeout = false;\n      }\n\n      removeClass(image, CLASS_INVISIBLE);\n\n      image.style.cssText = (\n        'width:0;' +\n        'height:0;' +\n        'margin-left:' + viewerData.width / 2 + 'px;' +\n        'margin-top:' + viewerData.height / 2 + 'px;' +\n        'max-width:none!important;' +\n        'visibility:visible;'\n      );\n\n      _this.initImage(function () {\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        toggleClass(image, CLASS_MOVE, options.movable);\n\n        _this.renderImage(function () {\n          _this.isViewed = true;\n          dispatchEvent(_this.element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          });\n        });\n      });\n    },\n\n    loadImage: function (event) {\n      var e = getEvent(event);\n      var image = e.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else {\n          if (filled) {\n            height = parentWidth / aspectRatio;\n          } else {\n            width = parentHeight * aspectRatio;\n          }\n        }\n\n        setStyle(image, {\n          width: width,\n          height: height,\n          marginLeft: (parentWidth - width) / 2,\n          marginTop: (parentHeight - height) / 2\n        });\n      });\n    },\n\n    resize: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.renderViewer();\n      _this.renderList();\n\n      if (_this.isViewed) {\n        _this.initImage(function () {\n          _this.renderImage();\n        });\n      }\n\n      if (_this.isPlayed) {\n        each(getByTag(_this.player, 'img'), function (image) {\n          addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n\n    wheel: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var ratio = Number(_this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      preventDefault(e);\n\n      // Limit wheel speed to prevent zoom too fast\n      if (_this.wheeling) {\n        return;\n      }\n\n      _this.wheeling = true;\n\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (e.deltaY) {\n        delta = e.deltaY > 0 ? 1 : -1;\n      } else if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n      } else if (e.detail) {\n        delta = e.detail > 0 ? 1 : -1;\n      }\n\n      _this.zoom(-delta * ratio, true, e);\n    },\n\n    keydown: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var options = _this.options;\n      var key = e.keyCode || e.which || e.charCode;\n\n      if (!_this.isFulled || !options.keyboard) {\n        return;\n      }\n\n      switch (key) {\n\n        // (Key: Esc)\n        case 27:\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        // (Key: Space)\n        case 32:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n\n          break;\n\n        // View previous (Key: ←)\n        case 37:\n          _this.prev();\n          break;\n\n        // Zoom in (Key: ↑)\n        case 38:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(options.zoomRatio, true);\n          break;\n\n        // View next (Key: →)\n        case 39:\n          _this.next();\n          break;\n\n        // Zoom out (Key: ↓)\n        case 40:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Zoom out to initial size (Key: Ctrl + 0)\n        case 48:\n          // Go to next\n\n        // Zoom in to natural size (Key: Ctrl + 1)\n        case 49:\n          if (e.ctrlKey || e.shiftKey) {\n            preventDefault(e);\n            _this.toggle();\n          }\n\n          break;\n\n        // No default\n      }\n    },\n\n    mousedown: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = options.movable ? 'move' : false;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.startX2 = touch.pageX;\n            _this.startY2 = touch.pageY;\n            action = 'zoom';\n          } else {\n            return;\n          }\n        } else {\n          if (_this.isSwitchable()) {\n            action = 'switch';\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n        _this.action = action;\n        _this.startX = touch ? touch.pageX : e.pageX;\n        _this.startY = touch ? touch.pageY : e.pageY;\n      }\n    },\n\n    mousemove: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = _this.action;\n      var image = _this.image;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.endX2 = touch.pageX;\n            _this.endY2 = touch.pageY;\n          } else {\n            return;\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && options.transition && hasClass(image, CLASS_TRANSITION)) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n\n        _this.endX = touch ? touch.pageX : e.pageX;\n        _this.endY = touch ? touch.pageY : e.pageY;\n\n        _this.change(e);\n      }\n    },\n\n    mouseup: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var action = _this.action;\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && _this.options.transition) {\n          addClass(_this.image, CLASS_TRANSITION);\n        }\n\n        _this.action = false;\n      }\n    },\n\n    // Show the viewer (only available in modal mode)\n    show: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer;\n\n      if (options.inline || _this.transitioning) {\n        return _this;\n      }\n\n      if (!_this.isBuilt) {\n        _this.build();\n      }\n\n      viewer = _this.viewer;\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, true);\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false) {\n        return _this;\n      }\n\n      _this.open();\n      removeClass(viewer, CLASS_HIDE);\n\n      addListener(element, EVENT_SHOWN, function () {\n        _this.view(_this.target ? inArray(_this.target, toArray(_this.images)) : _this.index);\n        _this.target = false;\n      }, true);\n\n      if (options.transition) {\n        _this.transitioning = true;\n        addClass(viewer, CLASS_TRANSITION);\n        forceReflow(viewer);\n        addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.shown, _this), true);\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        _this.shown();\n      }\n\n      return _this;\n    },\n\n    // Hide the viewer (only available in modal mode)\n    hide: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (options.inline || _this.transitioning || !_this.isShown) {\n        return _this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, true);\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return _this;\n      }\n\n      if (_this.isViewed && options.transition) {\n        _this.transitioning = true;\n        addListener(_this.image, EVENT_TRANSITIONEND, function () {\n          addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.hidden, _this), true);\n          removeClass(viewer, CLASS_IN);\n        }, true);\n        _this.zoomTo(0, false, false, true);\n      } else {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      }\n\n      return _this;\n    },\n\n    /**\n     * View one of the images with image's index\n     *\n     * @param {Number} index\n     */\n    view: function (index) {\n      var _this = this;\n      var element = _this.element;\n      var title = _this.title;\n      var canvas = _this.canvas;\n      var image;\n      var item;\n      var img;\n      var url;\n      var alt;\n\n      index = Number(index) || 0;\n\n      if (!_this.isShown || _this.isPlayed || index < 0 || index >= _this.length ||\n        _this.isViewed && index === _this.index) {\n        return _this;\n      }\n\n      item = _this.items[index];\n      img = getByTag(item, 'img')[0];\n      url = getData(img, 'originalUrl');\n      alt = img.getAttribute('alt');\n\n      image = document.createElement('img');\n      image.src = url;\n      image.alt = alt;\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: _this.images[index],\n        index: index,\n        image: image\n      }) === false) {\n        return _this;\n      }\n\n      _this.image = image;\n\n      if (_this.isViewed) {\n        removeClass(_this.items[_this.index], CLASS_ACTIVE);\n      }\n\n      addClass(item, CLASS_ACTIVE);\n\n      _this.isViewed = false;\n      _this.index = index;\n      _this.imageData = null;\n\n      addClass(image, CLASS_INVISIBLE);\n      empty(canvas);\n      appendChild(canvas, image);\n\n      // Center current item\n      _this.renderList();\n\n      // Clear title\n      empty(title);\n\n      // Generate title after viewed\n      addListener(element, EVENT_VIEWED, function () {\n        var imageData = _this.imageData;\n        var width = imageData.naturalWidth;\n        var height = imageData.naturalHeight;\n\n        setText(title, alt + ' (' + width + ' × ' + height + ')');\n      }, true);\n\n      if (image.complete) {\n        _this.load();\n      } else {\n        addListener(image, EVENT_LOAD, proxy(_this.load, _this), true);\n\n        if (_this.timeout) {\n          clearTimeout(_this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        _this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this.timeout = false;\n        }, 1000);\n      }\n\n      return _this;\n    },\n\n    // View the previous image\n    prev: function () {\n      var _this = this;\n\n      _this.view(max(_this.index - 1, 0));\n\n      return _this;\n    },\n\n    // View the next image\n    next: function () {\n      var _this = this;\n\n      _this.view(min(_this.index + 1, _this.length - 1));\n\n      return _this;\n    },\n\n    /**\n     * Move the image with relative offsets\n     *\n     * @param {Number} offsetX\n     * @param {Number} offsetY (optional)\n     */\n    move: function (offsetX, offsetY) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      _this.moveTo(\n        isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n        isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY)\n      );\n\n      return _this;\n    },\n\n    /**\n     * Move the image to an absolute point\n     *\n     * @param {Number} x\n     * @param {Number} y (optional)\n     */\n    moveTo: function (x, y) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"y\" is not present, its default value is \"x\"\n      if (isUndefined(y)) {\n        y = x;\n      }\n\n      x = Number(x);\n      y = Number(y);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.movable) {\n        if (isNumber(x)) {\n          imageData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          imageData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     */\n    zoom: function (ratio, hasTooltip, _originalEvent) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio =  1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      _this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     * @param {Boolean} _zoomable (private)\n     */\n    zoomTo: function (ratio, hasTooltip, _originalEvent, _zoomable) {\n      var _this = this;\n      var options = _this.options;\n      var minZoomRatio = 0.01;\n      var maxZoomRatio = 100;\n      var imageData = _this.imageData;\n      var newWidth;\n      var newHeight;\n      var offset;\n      var center;\n\n      ratio = max(0, ratio);\n\n      if (isNumber(ratio) && _this.isViewed && !_this.isPlayed && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          minZoomRatio = max(minZoomRatio, options.minZoomRatio);\n          maxZoomRatio = min(maxZoomRatio, options.maxZoomRatio);\n          ratio = min(max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        newWidth = imageData.naturalWidth * ratio;\n        newHeight = imageData.naturalHeight * ratio;\n\n        if (_originalEvent) {\n          offset = getOffset(_this.viewer);\n          center = _originalEvent.touches ? getTouchesCenter(_originalEvent.touches) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.left -= (newWidth - imageData.width) * (\n            ((center.pageX - offset.left) - imageData.left) / imageData.width\n          );\n          imageData.top -= (newHeight - imageData.height) * (\n            ((center.pageY - offset.top) - imageData.top) / imageData.height\n          );\n        } else {\n\n          // Zoom from the center of the image\n          imageData.left -= (newWidth - imageData.width) / 2;\n          imageData.top -= (newHeight - imageData.height) / 2;\n        }\n\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        _this.renderImage();\n\n        if (hasTooltip) {\n          _this.tooltip();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image with a relative degree\n     *\n     * @param {Number} degree\n     */\n    rotate: function (degree) {\n      var _this = this;\n\n      _this.rotateTo((_this.imageData.rotate || 0) + Number(degree));\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n     *\n     * @param {Number} degree\n     */\n    rotateTo: function (degree) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      degree = Number(degree);\n\n      if (isNumber(degree) && _this.isViewed && !_this.isPlayed && _this.options.rotatable) {\n        imageData.rotate = degree;\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the image\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n     *\n     * @param {Number} scaleX\n     * @param {Number} scaleY (optional)\n     */\n    scale: function (scaleX, scaleY) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"scaleY\" is not present, its default value is \"scaleX\"\n      if (isUndefined(scaleY)) {\n        scaleY = scaleX;\n      }\n\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          changed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the abscissa of the image\n     *\n     * @param {Number} scaleX\n     */\n    scaleX: function (scaleX) {\n      var _this = this;\n\n      _this.scale(scaleX, _this.imageData.scaleY);\n\n      return _this;\n    },\n\n    /**\n     * Scale the ordinate of the image\n     *\n     * @param {Number} scaleY\n     */\n    scaleY: function (scaleY) {\n      var _this = this;\n\n      _this.scale(_this.imageData.scaleX, scaleY);\n\n      return _this;\n    },\n\n    // Play the images\n    play: function () {\n      var _this = this;\n      var options = _this.options;\n      var player = _this.player;\n      var load = proxy(_this.loadImage, _this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      var playing;\n\n      if (!_this.isShown || _this.isPlayed) {\n        return _this;\n      }\n\n      if (options.fullscreen) {\n        _this.requestFullscreen();\n      }\n\n      _this.isPlayed = true;\n      addClass(player, CLASS_SHOW);\n\n      each(_this.items, function (item, i) {\n        var img = getByTag(item, 'img')[0];\n        var image = document.createElement('img');\n\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        total++;\n\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, load, true);\n        appendChild(player, image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        playing = function () {\n          _this.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index++;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n\n            playing();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          playing();\n        }\n      }\n\n      return _this;\n    },\n\n    // Stop play\n    stop: function () {\n      var _this = this;\n      var player = _this.player;\n\n      if (!_this.isPlayed) {\n        return _this;\n      }\n\n      if (_this.options.fullscreen) {\n        _this.exitFullscreen();\n      }\n\n      _this.isPlayed = false;\n      clearTimeout(_this.playing);\n      removeClass(player, CLASS_SHOW);\n      empty(player);\n\n      return _this;\n    },\n\n    // Enter modal mode (only available in inline mode)\n    full: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isShown || _this.isPlayed || _this.isFulled || !options.inline) {\n        return _this;\n      }\n\n      _this.isFulled = true;\n      _this.open();\n      addClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('style', '');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      _this.initContainer();\n      _this.viewerData = extend({}, _this.containerData);\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Exit modal mode (only available in inline mode)\n    exit: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isFulled) {\n        return _this;\n      }\n\n      _this.isFulled = false;\n      _this.close();\n      removeClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n\n      _this.viewerData = extend({}, _this.parentData);\n      _this.renderViewer();\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Show the current ratio of the image with percentage\n    tooltip: function () {\n      var _this = this;\n      var options = _this.options;\n      var tooltipBox = _this.tooltipBox;\n      var imageData = _this.imageData;\n\n      if (!_this.isViewed || _this.isPlayed || !options.tooltip) {\n        return _this;\n      }\n\n      setText(tooltipBox, round(imageData.ratio * 100) + '%');\n\n      if (!_this.tooltiping) {\n        if (options.transition) {\n          if (_this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITIONEND);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          forceReflow(tooltipBox);\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n        }\n      } else {\n        clearTimeout(_this.tooltiping);\n      }\n\n      _this.tooltiping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITIONEND, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            _this.fading = false;\n          }, true);\n\n          removeClass(tooltipBox, CLASS_IN);\n          _this.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n        }\n\n        _this.tooltiping = false;\n      }, 1000);\n\n      return _this;\n    },\n\n    // Toggle the image size between its natural size and initial size\n    toggle: function () {\n      var _this = this;\n\n      if (_this.imageData.ratio === 1) {\n        _this.zoomTo(_this.initialImageData.ratio, true);\n      } else {\n        _this.zoomTo(1, true);\n      }\n\n      return _this;\n    },\n\n    // Reset the image to its initial state\n    reset: function () {\n      var _this = this;\n\n      if (_this.isViewed && !_this.isPlayed) {\n        _this.imageData = extend({}, _this.initialImageData);\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    // Update viewer when images changed\n    update: function () {\n      var _this = this;\n      var indexes = [];\n      var index;\n\n      // Destroy viewer if the target image was deleted\n      if (_this.isImg && !_this.element.parentNode) {\n        return _this.destroy();\n      }\n\n      _this.length = _this.images.length;\n\n      if (_this.isBuilt) {\n        each(_this.items, function (item, i) {\n          var img = getByTag(item, 'img')[0];\n          var image = _this.images[i];\n\n          if (image) {\n            if (image.src !== img.src) {\n              indexes.push(i);\n            }\n          } else {\n            indexes.push(i);\n          }\n        });\n\n        setStyle(_this.list, {\n          width: 'auto'\n        });\n\n        _this.initList();\n\n        if (_this.isShown) {\n          if (_this.length) {\n            if (_this.isViewed) {\n              index = inArray(_this.index, indexes);\n\n              if (index >= 0) {\n                _this.isViewed = false;\n                _this.view(max(_this.index - (index + 1), 0));\n              } else {\n                addClass(_this.items[_this.index], CLASS_ACTIVE);\n              }\n            }\n          } else {\n            _this.image = null;\n            _this.isViewed = false;\n            _this.index = 0;\n            _this.imageData = null;\n            empty(_this.canvas);\n            empty(_this.title);\n          }\n        }\n      }\n\n      return _this;\n    },\n\n    // Destroy the viewer\n    destroy: function () {\n      var _this = this;\n      var element = _this.element;\n\n      if (_this.options.inline) {\n        _this.unbind();\n      } else {\n        if (_this.isShown) {\n          _this.unbind();\n        }\n\n        removeListener(element, EVENT_CLICK, _this._start);\n      }\n\n      _this.unbuild();\n      removeData(element, NAMESPACE);\n\n      return _this;\n    },\n\n    open: function () {\n      var body = this.body;\n\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.scrollbarWidth + 'px';\n    },\n\n    close: function () {\n      var body = this.body;\n\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = 0;\n    },\n\n    shown: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isFulled = true;\n      _this.isShown = true;\n      _this.isVisible = true;\n      _this.render();\n      _this.bind();\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, true);\n      }\n\n      dispatchEvent(element, EVENT_SHOWN);\n    },\n\n    hidden: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isViewed = false;\n      _this.isFulled = false;\n      _this.isShown = false;\n      _this.isVisible = false;\n      _this.unbind();\n      _this.close();\n      addClass(_this.viewer, CLASS_HIDE);\n      _this.resetList();\n      _this.resetImage();\n\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, true);\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    },\n\n    requestFullscreen: function () {\n      var _this = this;\n      var documentElement = document.documentElement;\n\n      if (_this.isFulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement && !document.msFullscreenElement) {\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        }\n      }\n    },\n\n    exitFullscreen: function () {\n      var _this = this;\n\n      if (_this.isFulled) {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n      }\n    },\n\n    change: function (originalEvent) {\n      var _this = this;\n      var offsetX = _this.endX - _this.startX;\n      var offsetY = _this.endY - _this.startY;\n\n      switch (_this.action) {\n\n        // Move the current image\n        case 'move':\n          _this.move(offsetX, offsetY);\n          break;\n\n        // Zoom the current image\n        case 'zoom':\n          _this.zoom(function (x1, y1, x2, y2) {\n            var z1 = sqrt(x1 * x1 + y1 * y1);\n            var z2 = sqrt(x2 * x2 + y2 * y2);\n\n            return (z2 - z1) / z1;\n          }(\n            abs(_this.startX - _this.startX2),\n            abs(_this.startY - _this.startY2),\n            abs(_this.endX - _this.endX2),\n            abs(_this.endY - _this.endY2)\n          ), false, originalEvent);\n\n          _this.startX2 = _this.endX2;\n          _this.startY2 = _this.endY2;\n          break;\n\n        case 'switch':\n          _this.action = 'switched';\n\n          if (abs(offsetX) > abs(offsetY)) {\n            if (offsetX > 1) {\n              _this.prev();\n            } else if (offsetX < -1) {\n              _this.next();\n            }\n          }\n\n          break;\n\n        // No default\n      }\n\n      // Override\n      _this.startX = _this.endX;\n      _this.startY = _this.endY;\n    },\n\n    isSwitchable: function () {\n      var _this = this;\n      var imageData = _this.imageData;\n      var viewerData = _this.viewerData;\n\n      return imageData.left >= 0 && imageData.top >= 0 &&\n        imageData.width <= viewerData.width &&\n        imageData.height <= viewerData.height;\n    }\n  };\n\n  Viewer.DEFAULTS = {\n\n    // Enable inline mode\n    inline: false,\n\n    // Show the button on the top-right of the viewer\n    button: true,\n\n    // Show the navbar\n    navbar: true,\n\n    // Show the title\n    title: true,\n\n    // Show the toolbar\n    toolbar: true,\n\n    // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n    tooltip: true,\n\n    // Enable to move the image\n    movable: true,\n\n    // Enable to zoom the image\n    zoomable: true,\n\n    // Enable to rotate the image\n    rotatable: true,\n\n    // Enable to scale the image\n    scalable: true,\n\n    // Enable CSS3 Transition for some special elements\n    transition: true,\n\n    // Enable to request fullscreen when play\n    fullscreen: true,\n\n    // Enable keyboard support\n    keyboard: true,\n\n    // Define interval of each image when playing\n    interval: 5000,\n\n    // Min width of the viewer in inline mode\n    minWidth: 200,\n\n    // Min height of the viewer in inline mode\n    minHeight: 100,\n\n    // Define the ratio when zoom the image by wheeling mouse\n    zoomRatio: 0.1,\n\n    // Define the min ratio of the image when zoom out\n    minZoomRatio: 0.01,\n\n    // Define the max ratio of the image when zoom in\n    maxZoomRatio: 100,\n\n    // Define the CSS `z-index` value of viewer in modal mode.\n    zIndex: 2015,\n\n    // Define the CSS `z-index` value of viewer in inline mode.\n    zIndexInline: 0,\n\n    // Define where to get the original image URL for viewing\n    // Type: String (an image attribute) or Function (should return an image URL)\n    url: 'src',\n\n    // Event shortcuts\n    build: null,\n    built: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null\n  };\n\n  Viewer.TEMPLATE = (\n    '<div class=\"viewer-container\">' +\n      '<div class=\"viewer-canvas\"></div>' +\n      '<div class=\"viewer-footer\">' +\n        '<div class=\"viewer-title\"></div>' +\n        '<ul class=\"viewer-toolbar\">' +\n          '<li class=\"viewer-zoom-in\" data-action=\"zoom-in\"></li>' +\n          '<li class=\"viewer-zoom-out\" data-action=\"zoom-out\"></li>' +\n          '<li class=\"viewer-one-to-one\" data-action=\"one-to-one\"></li>' +\n          '<li class=\"viewer-reset\" data-action=\"reset\"></li>' +\n          '<li class=\"viewer-prev\" data-action=\"prev\"></li>' +\n          '<li class=\"viewer-play\" data-action=\"play\"></li>' +\n          '<li class=\"viewer-next\" data-action=\"next\"></li>' +\n          '<li class=\"viewer-rotate-left\" data-action=\"rotate-left\"></li>' +\n          '<li class=\"viewer-rotate-right\" data-action=\"rotate-right\"></li>' +\n          '<li class=\"viewer-flip-horizontal\" data-action=\"flip-horizontal\"></li>' +\n          '<li class=\"viewer-flip-vertical\" data-action=\"flip-vertical\"></li>' +\n        '</ul>' +\n        '<div class=\"viewer-navbar\">' +\n          '<ul class=\"viewer-list\"></ul>' +\n        '</div>' +\n      '</div>' +\n      '<div class=\"viewer-tooltip\"></div>' +\n      '<div class=\"viewer-button\" data-action=\"mix\"></div>' +\n      '<div class=\"viewer-player\"></div>' +\n    '</div>'\n  );\n\n  var _Viewer = window.Viewer;\n\n  Viewer.noConflict = function () {\n    window.Viewer = _Viewer;\n    return Viewer;\n  };\n\n  Viewer.setDefaults = function (options) {\n    extend(Viewer.DEFAULTS, options);\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define('viewer', [], function () {\n      return Viewer;\n    });\n  }\n\n  if (!noGlobal) {\n    window.Viewer = Viewer;\n  }\n\n  return Viewer;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/viewerjs/dist/viewer.js\n// module id = 24\n// module chunks = 3","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 4\n// module chunks = 0 1 3 4 5","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar actions = require('./common/actions');\nvar paths = require('./common/paths');\n\nrequire('viewerjs/dist/viewer.min.css');\n\nvar Viewer = require('viewerjs');\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar first = true;\n\n$(function () {\n\n    var viewer = new Viewer($('#viewer')[0], {\n        inline: true,\n        viewed: function (e) {\n            console.log('viewed');\n            if (first) {\n                viewer.view($('#viewer').children('.active').index());\n                first = false;\n                e.stopPropagation();\n                return false;\n            }\n            $('#viewer img.active').removeClass('active');\n            var $image = $(e.detail.originalImage);\n            $image.addClass('active');\n            $('#viewer-name').text($image.attr('alt'));\n        }\n    });\n\n    actions.define('close', function () {\n        location.href = PATH + '/files?path=' + $('#viewer img.active').data('path');\n    });\n\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./viewer.js\n// module id = 56\n// module chunks = 3"],"sourceRoot":""}
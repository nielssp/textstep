{"version":3,"sources":["webpack:///dist/viewer.js","webpack:////home/www/blogstep/~/viewerjs/dist/viewer.js","webpack:///./common/actions.js?e0fb**","webpack:///./common/paths.js?9de7*","webpack:///./viewer.js"],"names":["webpackJsonp","21","module","exports","24","__webpack_require__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","global","factory","document","window","Error","this","noGlobal","typeOf","obj","toString","call","slice","toLowerCase","isString","str","isNumber","num","isNaN","isUndefined","isObject","isPlainObject","constructor","prototype","hasOwnProperty","e","isFunction","fn","isArray","arr","Array","toArray","offset","from","inArray","value","index","indexOf","each","n","i","trim","replace","REGEXP_TRIM","callback","length","extend","args","arguments","Object","assign","apply","shift","arg","prop","proxy","context","concat","setStyle","element","styles","style","property","REGEXP_SUFFIX","test","getStyle","getComputedStyle","currentStyle","hasClass","classList","contains","className","addClass","elem","add","removeClass","remove","toggleClass","added","hyphenate","REGEXP_HYPHENATE","getData","name","dataset","getAttribute","setData","data","setAttribute","removeData","removeAttribute","addListener","type","handler","once","types","split","REGEXP_SPACES","originalHandler","removeListener","addEventListener","attachEvent","removeEventListener","detachEvent","dispatchEvent","event","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initEvent","initCustomEvent","fireEvent","preventDefault","returnValue","getEvent","doc","target","srcElement","pageX","documentElement","clientX","scrollX","scrollLeft","clientLeft","pageY","clientY","scrollY","scrollTop","clientTop","getOffset","box","getBoundingClientRect","left","top","getTouchesCenter","touches","touch","getByTag","tagName","getElementsByTagName","getByClass","getElementsByClassName","querySelectorAll","appendChild","el","removeChild","parentNode","empty","firstChild","setText","text","textContent","innerText","forceReflow","offsetWidth","getImageName","url","getImageSize","image","newImage","naturalWidth","naturalHeight","createElement","onload","width","height","src","getTransform","transforms","rotate","scaleX","scaleY","push","join","getResponsiveClass","option","CLASS_HIDE_XS_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_MD_DOWN","Viewer","options","_this","DEFAULTS","isImg","isBuilt","isShown","isViewed","isFulled","isPlayed","wheeling","playing","fading","tooltiping","transitioning","action","timeout","init","NAMESPACE","CLASS_FIXED","CLASS_OPEN","CLASS_SHOW","CLASS_HIDE","CLASS_FADE","CLASS_IN","CLASS_MOVE","CLASS_ACTIVE","CLASS_INVISIBLE","CLASS_TRANSITION","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_CLOSE","EVENT_MOUSEDOWN","EVENT_MOUSEMOVE","EVENT_MOUSEUP","EVENT_WHEEL","EVENT_TRANSITIONEND","EVENT_LOAD","EVENT_KEYDOWN","EVENT_CLICK","EVENT_RESIZE","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","SUPPORT_TRANSITION","transition","min","Math","max","abs","sqrt","round","objectProto","images","ready","count","body","scrollbarWidth","innerWidth","clientWidth","inline","view","complete","_start","start","build","template","parent","viewer","button","toolbar","navbar","title","innerHTML","TEMPLATE","canvas","footer","tooltipBox","player","list","querySelector","zoomable","scalable","rotatable","zIndex","zIndexInline","position","insertBefore","nextSibling","render","bind","unbuild","viewed","_click","click","_wheel","wheel","_mousedown","mousedown","_mousemove","mousemove","_mouseup","mouseup","_keydown","keydown","_resize","resize","unbind","initContainer","initViewer","initList","renderViewer","containerData","innerHeight","viewerData","parentData","minWidth","offsetHeight","minHeight","items","alt","loadImage","renderList","outerWidth","marginLeft","resetList","initImage","footerHeight","viewerWidth","viewerHeight","oldImageData","imageData","initialImageData","aspectRatio","ratio","renderImage","transform","marginTop","WebkitTransform","msTransform","resetImage","show","stop","exit","full","hide","zoom","toggle","reset","prev","play","next","load","clearTimeout","cssText","movable","originalImage","parentWidth","parentHeight","filled","Number","zoomRatio","delta","setTimeout","deltaY","wheelDelta","key","keyCode","which","charCode","keyboard","ctrlKey","shiftKey","touchesLength","startX2","startY2","isSwitchable","startX","startY","endX2","endY2","endX","endY","change","open","shown","hidden","zoomTo","item","img","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","center","minZoomRatio","maxZoomRatio","tooltip","degree","rotateTo","scale","total","fullscreen","requestFullscreen","interval","exitFullscreen","close","update","indexes","destroy","paddingRight","isVisible","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","originalEvent","x1","y1","x2","y2","z1","z2","built","_Viewer","noConflict","setDefaults","undefined","3","parts","altKey","keyMap","defineAction","groups","actions","$","stopPropagation","forEach","group","actionGroups","activate","enableGroup","enable","disableGroup","disable","attr","define","defaultPrevented","metaKey","console","log","4","dirName","path","fileName","convert","cwd","startsWith","names","stack","pop","56","PATH","first","children","$image","location","href"],"mappings":"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","file":"dist/viewer.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 21:\n/***/ function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 24:\n/***/ function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * Viewer.js v0.5.0\n * https://github.com/fengyuanchen/viewerjs\n *\n * Copyright (c) 2015-2016 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2016-07-22T08:46:05.003Z\n */\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (window) {\n      if (!window.document) {\n        throw new Error('Viewer requires a window with a document');\n      }\n\n      return factory(window);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n\n  'use strict';\n\n  var document = window.document;\n  var Event = window.Event;\n\n  // Constants\n  var NAMESPACE = 'viewer';\n\n  // Classes\n  var CLASS_FIXED = NAMESPACE + '-fixed';\n  var CLASS_OPEN = NAMESPACE + '-open';\n  var CLASS_SHOW = NAMESPACE + '-show';\n  var CLASS_HIDE = NAMESPACE + '-hide';\n  var CLASS_HIDE_XS_DOWN = 'viewer-hide-xs-down';\n  var CLASS_HIDE_SM_DOWN = 'viewer-hide-sm-down';\n  var CLASS_HIDE_MD_DOWN = 'viewer-hide-md-down';\n  var CLASS_FADE = NAMESPACE + '-fade';\n  var CLASS_IN = NAMESPACE + '-in';\n  var CLASS_MOVE = NAMESPACE + '-move';\n  var CLASS_ACTIVE = NAMESPACE + '-active';\n  var CLASS_INVISIBLE = NAMESPACE + '-invisible';\n  var CLASS_TRANSITION = NAMESPACE + '-transition';\n  var CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';\n  var CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';\n  var CLASS_CLOSE = NAMESPACE + '-close';\n\n  // Events\n  var EVENT_MOUSEDOWN = 'mousedown touchstart pointerdown MSPointerDown';\n  var EVENT_MOUSEMOVE = 'mousemove touchmove pointermove MSPointerMove';\n  var EVENT_MOUSEUP = 'mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel';\n  var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n  var EVENT_TRANSITIONEND = 'transitionend';\n  var EVENT_LOAD = 'load';\n  var EVENT_KEYDOWN = 'keydown';\n  var EVENT_CLICK = 'click';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n\n  // RegExps\n  var REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  var REGEXP_TRIM = /^\\s+(.*)\\s+$/;\n  var REGEXP_SPACES = /\\s+/;\n\n  // Supports\n  var SUPPORT_TRANSITION = typeof document.createElement(NAMESPACE).style.transition !== 'undefined';\n\n  // Maths\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n  var round = Math.round;\n\n  // Utilities\n  var objectProto = Object.prototype;\n  var toString = objectProto.toString;\n  var hasOwnProperty = objectProto.hasOwnProperty;\n  var slice = Array.prototype.slice;\n\n  function typeOf(obj) {\n    return toString.call(obj).slice(8, -1).toLowerCase();\n  }\n\n  function isString(str) {\n    return typeof str === 'string';\n  }\n\n  function isNumber(num) {\n    return typeof num === 'number' && !isNaN(num);\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n  }\n\n  function isPlainObject(obj) {\n    var constructor;\n    var prototype;\n\n    if (!isObject(obj)) {\n      return false;\n    }\n\n    try {\n      constructor = obj.constructor;\n      prototype = constructor.prototype;\n\n      return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function isFunction(fn) {\n    return typeOf(fn) === 'function';\n  }\n\n  function isArray(arr) {\n    return Array.isArray ? Array.isArray(arr) : typeOf(arr) === 'array';\n  }\n\n  function toArray(obj, offset) {\n    offset = offset >= 0 ? offset : 0;\n\n    if (Array.from) {\n      return Array.from(obj).slice(offset);\n    }\n\n    return slice.call(obj, offset);\n  }\n\n  function inArray(value, arr) {\n    var index = -1;\n\n    if (arr.indexOf) {\n      return arr.indexOf(value);\n    } else {\n      each(arr, function (n, i) {\n        if (n === value) {\n          index = i;\n          return false;\n        }\n      });\n    }\n\n    return index;\n  }\n\n  function trim(str) {\n    if (isString(str)) {\n      str = str.trim ? str.trim() : str.replace(REGEXP_TRIM, '1');\n    }\n\n    return str;\n  }\n\n  function each(obj, callback) {\n    var length;\n    var i;\n\n    if (obj && isFunction(callback)) {\n      if (isArray(obj) || isNumber(obj.length)/* array-like */) {\n        for (i = 0, length = obj.length; i < length; i++) {\n          if (callback.call(obj, obj[i], i, obj) === false) {\n            break;\n          }\n        }\n      } else if (isObject(obj)) {\n        for (i in obj) {\n          if (obj.hasOwnProperty(i)) {\n            if (callback.call(obj, obj[i], i, obj) === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function extend(obj) {\n    var args;\n\n    if (arguments.length > 1) {\n      args = toArray(arguments);\n\n      if (Object.assign) {\n        return Object.assign.apply(Object, args);\n      }\n\n      args.shift();\n\n      each(args, function (arg) {\n        each(arg, function (prop, i) {\n          obj[i] = prop;\n        });\n      });\n    }\n\n    return obj;\n  }\n\n  function proxy(fn, context) {\n    var args = toArray(arguments, 2);\n\n    return function () {\n      return fn.apply(context, args.concat(toArray(arguments)));\n    };\n  }\n\n  function setStyle(element, styles) {\n    var style = element.style;\n\n    each(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n\n  function getStyle(element) {\n    return window.getComputedStyle ?\n      window.getComputedStyle(element, null) :\n      element.currentStyle;\n  }\n\n  function hasClass(element, value) {\n    return element.classList ?\n      element.classList.contains(value) :\n      element.className.indexOf(value) > -1;\n  }\n\n  function addClass(element, value) {\n    var className;\n\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        addClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.add(value);\n    }\n\n    className = trim(element.className);\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = className + ' ' + value;\n    }\n  }\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        removeClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.remove(value);\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  function toggleClass(element, value, added) {\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n\n  function hyphenate(str) {\n    return str.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    } else if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute('data-' + hyphenate(name));\n  }\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute('data-' + hyphenate(name), data);\n    }\n  }\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      delete element[name];\n    } else if (element.dataset) {\n      delete element.dataset[name];\n    } else {\n      element.removeAttribute('data-' + hyphenate(name));\n    }\n  }\n\n  function addListener(element, type, handler, once) {\n    var types = trim(type).split(REGEXP_SPACES);\n    var originalHandler = handler;\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        addListener(element, type, handler);\n      });\n    }\n\n    if (once) {\n      handler = function () {\n        removeListener(element, type, handler);\n\n        return originalHandler.apply(element, arguments);\n      };\n    }\n\n    if (element.addEventListener) {\n      element.addEventListener(type, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent('on' + type, handler);\n    }\n  }\n\n  function removeListener(element, type, handler) {\n    var types = trim(type).split(REGEXP_SPACES);\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        removeListener(element, type, handler);\n      });\n    }\n\n    if (element.removeEventListener) {\n      element.removeEventListener(type, handler, false);\n    } else if (element.detachEvent) {\n      element.detachEvent('on' + type, handler);\n    }\n  }\n\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    if (element.dispatchEvent) {\n\n      // Event and CustomEvent on IE9-11 are global objects, not constructors\n      if (isFunction(Event) && isFunction(CustomEvent)) {\n        if (isUndefined(data)) {\n          event = new Event(type, {\n            bubbles: true,\n            cancelable: true\n          });\n        } else {\n          event = new CustomEvent(type, {\n            detail: data,\n            bubbles: true,\n            cancelable: true\n          });\n        }\n      } else {\n        // IE9-11\n        if (isUndefined(data)) {\n          event = document.createEvent('Event');\n          event.initEvent(type, true, true);\n        } else {\n          event = document.createEvent('CustomEvent');\n          event.initCustomEvent(type, true, true, data);\n        }\n      }\n\n      // IE9+\n      return element.dispatchEvent(event);\n    } else if (element.fireEvent) {\n\n      // IE6-10 (native events only)\n      return element.fireEvent('on' + type);\n    }\n  }\n\n  function preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function getEvent(event) {\n    var e = event || window.event;\n    var doc;\n\n    // Fix target property (IE8)\n    if (!e.target) {\n      e.target = e.srcElement || document;\n    }\n\n    if (!isNumber(e.pageX)) {\n      doc = document.documentElement;\n      e.pageX = e.clientX + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0);\n      e.pageY = e.clientY + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0);\n    }\n\n    return e;\n  }\n\n  function getOffset(element) {\n    var doc = document.documentElement;\n    var box = element.getBoundingClientRect();\n\n    return {\n      left: box.left + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0),\n      top: box.top + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0)\n    };\n  }\n\n  function getTouchesCenter(touches) {\n    var length = touches.length;\n    var pageX = 0;\n    var pageY = 0;\n\n    if (length) {\n      each(touches, function (touch) {\n        pageX += touch.pageX;\n        pageY += touch.pageY;\n      });\n\n      pageX /= length;\n      pageY /= length;\n    }\n\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  function getByTag(element, tagName) {\n    return element.getElementsByTagName(tagName);\n  }\n\n  function getByClass(element, className) {\n    return element.getElementsByClassName ?\n      element.getElementsByClassName(className) :\n      element.querySelectorAll('.' + className);\n  }\n\n  function appendChild(element, elem) {\n    if (elem.length) {\n      return each(elem, function (el) {\n        appendChild(element, el);\n      });\n    }\n\n    element.appendChild(elem);\n  }\n\n  function removeChild(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  function empty(element) {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  function setText(element, text) {\n    if (!isUndefined(element.textContent)) {\n      element.textContent = text;\n    } else {\n      element.innerText = text;\n    }\n  }\n\n  // Force reflow to enable CSS3 transition\n  function forceReflow(element) {\n    return element.offsetWidth;\n  }\n\n  // e.g.: http://domain.com/path/to/picture.jpg?size=1280×960 -> picture.jpg\n  function getImageName(url) {\n    return isString(url) ? url.replace(/^.*\\//, '').replace(/[\\?&#].*$/, '') : '';\n  }\n\n  function getImageSize(image, callback) {\n    var newImage;\n\n    // Modern browsers\n    if (image.naturalWidth) {\n      return callback(image.naturalWidth, image.naturalHeight);\n    }\n\n    // IE8: Don't use `new Image()` here\n    newImage = document.createElement('img');\n\n    newImage.onload = function () {\n      callback(this.width, this.height);\n    };\n\n    newImage.src = image.src;\n  }\n\n  function getTransform(data) {\n    var transforms = [];\n    var rotate = data.rotate;\n    var scaleX = data.scaleX;\n    var scaleY = data.scaleY;\n\n    // Rotate should come first before scale\n    if (isNumber(rotate)) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (isNumber(scaleX)) {\n      transforms.push('scaleX(' + scaleX + ')');\n    }\n\n    if (isNumber(scaleY)) {\n      transforms.push('scaleY(' + scaleY + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n\n  function getResponsiveClass(option) {\n    switch (option) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n    }\n  }\n\n  function Viewer(element, options) {\n    var _this = this;\n\n    _this.element = element;\n    _this.options = extend({}, Viewer.DEFAULTS, isPlainObject(options) && options);\n    _this.isImg = false;\n    _this.isBuilt = false;\n    _this.isShown = false;\n    _this.isViewed = false;\n    _this.isFulled = false;\n    _this.isPlayed = false;\n    _this.wheeling = false;\n    _this.playing = false;\n    _this.fading = false;\n    _this.tooltiping = false;\n    _this.transitioning = false;\n    _this.action = false;\n    _this.target = false;\n    _this.timeout = false;\n    _this.index = 0;\n    _this.length = 0;\n    _this.init();\n  }\n\n  Viewer.prototype = {\n    constructor: Viewer,\n\n    init: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var isImg = element.tagName.toLowerCase() === 'img';\n      var images = isImg ? [element] : getByTag(element, 'img');\n      var length = images.length;\n      var ready = proxy(_this.ready, _this);\n\n      if (getData(element, NAMESPACE)) {\n        return;\n      }\n\n      setData(element, NAMESPACE, _this);\n\n      if (!length) {\n        return;\n      }\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, true);\n      }\n\n      // Override `transition` option if it is not supported\n      if (!SUPPORT_TRANSITION) {\n        options.transition = false;\n      }\n\n      _this.isImg = isImg;\n      _this.length = length;\n      _this.count = 0;\n      _this.images = images;\n      _this.body = document.body;\n      _this.scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n      if (options.inline) {\n        addListener(element, EVENT_READY, function () {\n          _this.view();\n        }, true);\n\n        each(images, function (image) {\n          if (image.complete) {\n            ready();\n          } else {\n            addListener(image, EVENT_LOAD, ready, true);\n          }\n        });\n      } else {\n        addListener(element, EVENT_CLICK, (_this._start = proxy(_this.start, _this)));\n      }\n    },\n\n    ready: function () {\n      var _this = this;\n\n      _this.count++;\n\n      if (_this.count === _this.length) {\n        _this.build();\n      }\n    },\n\n    build: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var template;\n      var parent;\n      var viewer;\n      var button;\n      var toolbar;\n      var navbar;\n      var title;\n      var rotate;\n\n      if (_this.isBuilt) {\n        return;\n      }\n\n      template = document.createElement('div');\n      template.innerHTML = Viewer.TEMPLATE;\n\n      _this.parent = parent = element.parentNode;\n      _this.viewer = viewer = getByClass(template, 'viewer-container')[0];\n      _this.canvas = getByClass(viewer, 'viewer-canvas')[0];\n      _this.footer = getByClass(viewer, 'viewer-footer')[0];\n      _this.title = title = getByClass(viewer, 'viewer-title')[0];\n      _this.toolbar = toolbar = getByClass(viewer, 'viewer-toolbar')[0];\n      _this.navbar = navbar = getByClass(viewer, 'viewer-navbar')[0];\n      _this.button = button = getByClass(viewer, 'viewer-button')[0];\n      _this.tooltipBox = getByClass(viewer, 'viewer-tooltip')[0];\n      _this.player = getByClass(viewer, 'viewer-player')[0];\n      _this.list = getByClass(viewer, 'viewer-list')[0];\n\n      addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n      addClass(toolbar, !options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));\n      addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n      toggleClass(button, CLASS_HIDE, !options.button);\n\n      toggleClass(toolbar.querySelector('.viewer-one-to-one'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"zoom\"]'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"flip\"]'), CLASS_INVISIBLE, !options.scalable);\n\n      if (!options.rotatable) {\n        rotate = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n        addClass(rotate, CLASS_INVISIBLE);\n        appendChild(toolbar, rotate);\n      }\n\n      if (options.inline) {\n        addClass(button, CLASS_FULLSCREEN);\n        setStyle(viewer, {\n          zIndex: options.zIndexInline\n        });\n\n        if (getStyle(parent).position === 'static') {\n          setStyle(parent, {\n            position: 'relative'\n          });\n        }\n      } else {\n        addClass(button, CLASS_CLOSE);\n        addClass(viewer, CLASS_FIXED);\n        addClass(viewer, CLASS_FADE);\n        addClass(viewer, CLASS_HIDE);\n\n        setStyle(viewer, {\n          zIndex: options.zIndex\n        });\n      }\n\n      // Inserts the viewer after to the current element\n      parent.insertBefore(viewer, element.nextSibling);\n\n      if (options.inline) {\n        _this.render();\n        _this.bind();\n        _this.isShown = true;\n      }\n\n      _this.isBuilt = true;\n\n      dispatchEvent(element, EVENT_READY);\n    },\n\n    unbuild: function () {\n      var _this = this;\n\n      if (!_this.isBuilt) {\n        return;\n      }\n\n      _this.isBuilt = false;\n      removeChild(_this.viewer);\n    },\n\n    bind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        addListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      addListener(viewer, EVENT_CLICK, (_this._click = proxy(_this.click, _this)));\n      addListener(viewer, EVENT_WHEEL, (_this._wheel = proxy(_this.wheel, _this)));\n      addListener(_this.canvas, EVENT_MOUSEDOWN, (_this._mousedown = proxy(_this.mousedown, _this)));\n      addListener(document, EVENT_MOUSEMOVE, (_this._mousemove = proxy(_this.mousemove, _this)));\n      addListener(document, EVENT_MOUSEUP, (_this._mouseup = proxy(_this.mouseup, _this)));\n      addListener(document, EVENT_KEYDOWN, (_this._keydown = proxy(_this.keydown, _this)));\n      addListener(window, EVENT_RESIZE, (_this._resize = proxy(_this.resize, _this)));\n    },\n\n    unbind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        removeListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        removeListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      removeListener(viewer, EVENT_CLICK, _this._click);\n      removeListener(viewer, EVENT_WHEEL, _this._wheel);\n      removeListener(_this.canvas, EVENT_MOUSEDOWN, _this._mousedown);\n      removeListener(document, EVENT_MOUSEMOVE, _this._mousemove);\n      removeListener(document, EVENT_MOUSEUP, _this._mouseup);\n      removeListener(document, EVENT_KEYDOWN, _this._keydown);\n      removeListener(window, EVENT_RESIZE, _this._resize);\n    },\n\n    render: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.initList();\n      _this.renderViewer();\n    },\n\n    initContainer: function () {\n      var _this = this;\n\n      _this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n\n    initViewer: function () {\n      var _this = this;\n      var options = _this.options;\n      var parent = _this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        _this.parentData = viewerData = {\n          width: max(parent.offsetWidth, options.minWidth),\n          height: max(parent.offsetHeight, options.minHeight)\n        };\n      }\n\n      if (_this.isFulled || !viewerData) {\n        viewerData = _this.containerData;\n      }\n\n      _this.viewerData = extend({}, viewerData);\n    },\n\n    renderViewer: function () {\n      var _this = this;\n\n      if (_this.options.inline && !_this.isFulled) {\n        setStyle(_this.viewer, _this.viewerData);\n      }\n    },\n\n    initList: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var list = _this.list;\n      var items = [];\n\n      each(_this.images, function (image, i) {\n        var src = image.src;\n        var alt = image.alt || getImageName(src);\n        var url = options.url;\n\n        if (!src) {\n          return;\n        }\n\n        if (isString(url)) {\n          url = image.getAttribute(url);\n        } else if (isFunction(url)) {\n          url = url.call(image, image);\n        }\n\n        items.push(\n          '<li>' +\n            '<img' +\n              ' src=\"' + src + '\"' +\n              ' data-action=\"view\"' +\n              ' data-index=\"' +  i + '\"' +\n              ' data-original-url=\"' +  (url || src) + '\"' +\n              ' alt=\"' +  alt + '\"' +\n            '>' +\n          '</li>'\n        );\n      });\n\n      list.innerHTML = items.join('');\n\n      each(getByTag(list, 'img'), function (image) {\n        setData(image, 'filled', true);\n        addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n      });\n\n      _this.items = getByTag(list, 'li');\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, true);\n      }\n    },\n\n    renderList: function (index) {\n      var _this = this;\n      var i = index || _this.index;\n      var width = _this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n      // Place the active item in the center of the screen\n      setStyle(_this.list, {\n        width: outerWidth * _this.length,\n        marginLeft: (_this.viewerData.width - width) / 2 - outerWidth * i\n      });\n    },\n\n    resetList: function () {\n      var _this = this;\n\n      empty(_this.list);\n      removeClass(_this.list, CLASS_TRANSITION);\n      setStyle({\n        marginLeft: 0\n      });\n    },\n\n    initImage: function (callback) {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var viewerData = _this.viewerData;\n      var footerHeight = _this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = _this.imageData || {};\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        var initialImageData;\n        var imageData;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = min(width * 0.9, naturalWidth);\n        height = min(height * 0.9, naturalHeight);\n\n        imageData = {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: aspectRatio,\n          ratio: width / naturalWidth,\n          width: width,\n          height: height,\n          left: (viewerWidth - width) / 2,\n          top: (viewerHeight - height) / 2\n        };\n\n        initialImageData = extend({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this.imageData = imageData;\n        _this.initialImageData = initialImageData;\n\n        if (isFunction(callback)) {\n          callback();\n        }\n      });\n    },\n\n    renderImage: function (callback) {\n      var _this = this;\n      var image = _this.image;\n      var imageData = _this.imageData;\n      var transform = getTransform(imageData);\n\n      setStyle(image, {\n        width: imageData.width,\n        height: imageData.height,\n        marginLeft: imageData.left,\n        marginTop: imageData.top,\n        WebkitTransform: transform,\n        msTransform: transform,\n        transform: transform\n      });\n\n      if (isFunction(callback)) {\n        if (_this.transitioning) {\n          addListener(image, EVENT_TRANSITIONEND, callback, true);\n        } else {\n          callback();\n        }\n      }\n    },\n\n    resetImage: function () {\n      var _this = this;\n\n      // this.image only defined after viewed\n      if (_this.image) {\n        removeChild(_this.image);\n        _this.image = null;\n      }\n    },\n\n    start: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n\n      if (target.tagName.toLowerCase() === 'img') {\n        _this.target = target;\n        _this.show();\n      }\n    },\n\n    click: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n      var action = getData(target, 'action');\n      var imageData = _this.imageData;\n\n      switch (action) {\n        case 'mix':\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (_this.options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              } else {\n                _this.full();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        case 'view':\n          _this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          _this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          _this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          _this.toggle();\n          break;\n\n        case 'reset':\n          _this.reset();\n          break;\n\n        case 'prev':\n          _this.prev();\n          break;\n\n        case 'play':\n          _this.play();\n          break;\n\n        case 'next':\n          _this.next();\n          break;\n\n        case 'rotate-left':\n          _this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          _this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          _this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          _this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n      }\n    },\n\n    load: function () {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var index = _this.index;\n      var viewerData = _this.viewerData;\n\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n        _this.timeout = false;\n      }\n\n      removeClass(image, CLASS_INVISIBLE);\n\n      image.style.cssText = (\n        'width:0;' +\n        'height:0;' +\n        'margin-left:' + viewerData.width / 2 + 'px;' +\n        'margin-top:' + viewerData.height / 2 + 'px;' +\n        'max-width:none!important;' +\n        'visibility:visible;'\n      );\n\n      _this.initImage(function () {\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        toggleClass(image, CLASS_MOVE, options.movable);\n\n        _this.renderImage(function () {\n          _this.isViewed = true;\n          dispatchEvent(_this.element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          });\n        });\n      });\n    },\n\n    loadImage: function (event) {\n      var e = getEvent(event);\n      var image = e.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else {\n          if (filled) {\n            height = parentWidth / aspectRatio;\n          } else {\n            width = parentHeight * aspectRatio;\n          }\n        }\n\n        setStyle(image, {\n          width: width,\n          height: height,\n          marginLeft: (parentWidth - width) / 2,\n          marginTop: (parentHeight - height) / 2\n        });\n      });\n    },\n\n    resize: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.renderViewer();\n      _this.renderList();\n\n      if (_this.isViewed) {\n        _this.initImage(function () {\n          _this.renderImage();\n        });\n      }\n\n      if (_this.isPlayed) {\n        each(getByTag(_this.player, 'img'), function (image) {\n          addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n\n    wheel: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var ratio = Number(_this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      preventDefault(e);\n\n      // Limit wheel speed to prevent zoom too fast\n      if (_this.wheeling) {\n        return;\n      }\n\n      _this.wheeling = true;\n\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (e.deltaY) {\n        delta = e.deltaY > 0 ? 1 : -1;\n      } else if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n      } else if (e.detail) {\n        delta = e.detail > 0 ? 1 : -1;\n      }\n\n      _this.zoom(-delta * ratio, true, e);\n    },\n\n    keydown: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var options = _this.options;\n      var key = e.keyCode || e.which || e.charCode;\n\n      if (!_this.isFulled || !options.keyboard) {\n        return;\n      }\n\n      switch (key) {\n\n        // (Key: Esc)\n        case 27:\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        // (Key: Space)\n        case 32:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n\n          break;\n\n        // View previous (Key: ←)\n        case 37:\n          _this.prev();\n          break;\n\n        // Zoom in (Key: ↑)\n        case 38:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(options.zoomRatio, true);\n          break;\n\n        // View next (Key: →)\n        case 39:\n          _this.next();\n          break;\n\n        // Zoom out (Key: ↓)\n        case 40:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Zoom out to initial size (Key: Ctrl + 0)\n        case 48:\n          // Go to next\n\n        // Zoom in to natural size (Key: Ctrl + 1)\n        case 49:\n          if (e.ctrlKey || e.shiftKey) {\n            preventDefault(e);\n            _this.toggle();\n          }\n\n          break;\n\n        // No default\n      }\n    },\n\n    mousedown: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = options.movable ? 'move' : false;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.startX2 = touch.pageX;\n            _this.startY2 = touch.pageY;\n            action = 'zoom';\n          } else {\n            return;\n          }\n        } else {\n          if (_this.isSwitchable()) {\n            action = 'switch';\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n        _this.action = action;\n        _this.startX = touch ? touch.pageX : e.pageX;\n        _this.startY = touch ? touch.pageY : e.pageY;\n      }\n    },\n\n    mousemove: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = _this.action;\n      var image = _this.image;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.endX2 = touch.pageX;\n            _this.endY2 = touch.pageY;\n          } else {\n            return;\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && options.transition && hasClass(image, CLASS_TRANSITION)) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n\n        _this.endX = touch ? touch.pageX : e.pageX;\n        _this.endY = touch ? touch.pageY : e.pageY;\n\n        _this.change(e);\n      }\n    },\n\n    mouseup: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var action = _this.action;\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && _this.options.transition) {\n          addClass(_this.image, CLASS_TRANSITION);\n        }\n\n        _this.action = false;\n      }\n    },\n\n    // Show the viewer (only available in modal mode)\n    show: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer;\n\n      if (options.inline || _this.transitioning) {\n        return _this;\n      }\n\n      if (!_this.isBuilt) {\n        _this.build();\n      }\n\n      viewer = _this.viewer;\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, true);\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false) {\n        return _this;\n      }\n\n      _this.open();\n      removeClass(viewer, CLASS_HIDE);\n\n      addListener(element, EVENT_SHOWN, function () {\n        _this.view(_this.target ? inArray(_this.target, toArray(_this.images)) : _this.index);\n        _this.target = false;\n      }, true);\n\n      if (options.transition) {\n        _this.transitioning = true;\n        addClass(viewer, CLASS_TRANSITION);\n        forceReflow(viewer);\n        addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.shown, _this), true);\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        _this.shown();\n      }\n\n      return _this;\n    },\n\n    // Hide the viewer (only available in modal mode)\n    hide: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (options.inline || _this.transitioning || !_this.isShown) {\n        return _this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, true);\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return _this;\n      }\n\n      if (_this.isViewed && options.transition) {\n        _this.transitioning = true;\n        addListener(_this.image, EVENT_TRANSITIONEND, function () {\n          addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.hidden, _this), true);\n          removeClass(viewer, CLASS_IN);\n        }, true);\n        _this.zoomTo(0, false, false, true);\n      } else {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      }\n\n      return _this;\n    },\n\n    /**\n     * View one of the images with image's index\n     *\n     * @param {Number} index\n     */\n    view: function (index) {\n      var _this = this;\n      var element = _this.element;\n      var title = _this.title;\n      var canvas = _this.canvas;\n      var image;\n      var item;\n      var img;\n      var url;\n      var alt;\n\n      index = Number(index) || 0;\n\n      if (!_this.isShown || _this.isPlayed || index < 0 || index >= _this.length ||\n        _this.isViewed && index === _this.index) {\n        return _this;\n      }\n\n      item = _this.items[index];\n      img = getByTag(item, 'img')[0];\n      url = getData(img, 'originalUrl');\n      alt = img.getAttribute('alt');\n\n      image = document.createElement('img');\n      image.src = url;\n      image.alt = alt;\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: _this.images[index],\n        index: index,\n        image: image\n      }) === false) {\n        return _this;\n      }\n\n      _this.image = image;\n\n      if (_this.isViewed) {\n        removeClass(_this.items[_this.index], CLASS_ACTIVE);\n      }\n\n      addClass(item, CLASS_ACTIVE);\n\n      _this.isViewed = false;\n      _this.index = index;\n      _this.imageData = null;\n\n      addClass(image, CLASS_INVISIBLE);\n      empty(canvas);\n      appendChild(canvas, image);\n\n      // Center current item\n      _this.renderList();\n\n      // Clear title\n      empty(title);\n\n      // Generate title after viewed\n      addListener(element, EVENT_VIEWED, function () {\n        var imageData = _this.imageData;\n        var width = imageData.naturalWidth;\n        var height = imageData.naturalHeight;\n\n        setText(title, alt + ' (' + width + ' × ' + height + ')');\n      }, true);\n\n      if (image.complete) {\n        _this.load();\n      } else {\n        addListener(image, EVENT_LOAD, proxy(_this.load, _this), true);\n\n        if (_this.timeout) {\n          clearTimeout(_this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        _this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this.timeout = false;\n        }, 1000);\n      }\n\n      return _this;\n    },\n\n    // View the previous image\n    prev: function () {\n      var _this = this;\n\n      _this.view(max(_this.index - 1, 0));\n\n      return _this;\n    },\n\n    // View the next image\n    next: function () {\n      var _this = this;\n\n      _this.view(min(_this.index + 1, _this.length - 1));\n\n      return _this;\n    },\n\n    /**\n     * Move the image with relative offsets\n     *\n     * @param {Number} offsetX\n     * @param {Number} offsetY (optional)\n     */\n    move: function (offsetX, offsetY) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      _this.moveTo(\n        isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n        isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY)\n      );\n\n      return _this;\n    },\n\n    /**\n     * Move the image to an absolute point\n     *\n     * @param {Number} x\n     * @param {Number} y (optional)\n     */\n    moveTo: function (x, y) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"y\" is not present, its default value is \"x\"\n      if (isUndefined(y)) {\n        y = x;\n      }\n\n      x = Number(x);\n      y = Number(y);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.movable) {\n        if (isNumber(x)) {\n          imageData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          imageData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     */\n    zoom: function (ratio, hasTooltip, _originalEvent) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio =  1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      _this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     * @param {Boolean} _zoomable (private)\n     */\n    zoomTo: function (ratio, hasTooltip, _originalEvent, _zoomable) {\n      var _this = this;\n      var options = _this.options;\n      var minZoomRatio = 0.01;\n      var maxZoomRatio = 100;\n      var imageData = _this.imageData;\n      var newWidth;\n      var newHeight;\n      var offset;\n      var center;\n\n      ratio = max(0, ratio);\n\n      if (isNumber(ratio) && _this.isViewed && !_this.isPlayed && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          minZoomRatio = max(minZoomRatio, options.minZoomRatio);\n          maxZoomRatio = min(maxZoomRatio, options.maxZoomRatio);\n          ratio = min(max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        newWidth = imageData.naturalWidth * ratio;\n        newHeight = imageData.naturalHeight * ratio;\n\n        if (_originalEvent) {\n          offset = getOffset(_this.viewer);\n          center = _originalEvent.touches ? getTouchesCenter(_originalEvent.touches) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.left -= (newWidth - imageData.width) * (\n            ((center.pageX - offset.left) - imageData.left) / imageData.width\n          );\n          imageData.top -= (newHeight - imageData.height) * (\n            ((center.pageY - offset.top) - imageData.top) / imageData.height\n          );\n        } else {\n\n          // Zoom from the center of the image\n          imageData.left -= (newWidth - imageData.width) / 2;\n          imageData.top -= (newHeight - imageData.height) / 2;\n        }\n\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        _this.renderImage();\n\n        if (hasTooltip) {\n          _this.tooltip();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image with a relative degree\n     *\n     * @param {Number} degree\n     */\n    rotate: function (degree) {\n      var _this = this;\n\n      _this.rotateTo((_this.imageData.rotate || 0) + Number(degree));\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n     *\n     * @param {Number} degree\n     */\n    rotateTo: function (degree) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      degree = Number(degree);\n\n      if (isNumber(degree) && _this.isViewed && !_this.isPlayed && _this.options.rotatable) {\n        imageData.rotate = degree;\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the image\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n     *\n     * @param {Number} scaleX\n     * @param {Number} scaleY (optional)\n     */\n    scale: function (scaleX, scaleY) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"scaleY\" is not present, its default value is \"scaleX\"\n      if (isUndefined(scaleY)) {\n        scaleY = scaleX;\n      }\n\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          changed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the abscissa of the image\n     *\n     * @param {Number} scaleX\n     */\n    scaleX: function (scaleX) {\n      var _this = this;\n\n      _this.scale(scaleX, _this.imageData.scaleY);\n\n      return _this;\n    },\n\n    /**\n     * Scale the ordinate of the image\n     *\n     * @param {Number} scaleY\n     */\n    scaleY: function (scaleY) {\n      var _this = this;\n\n      _this.scale(_this.imageData.scaleX, scaleY);\n\n      return _this;\n    },\n\n    // Play the images\n    play: function () {\n      var _this = this;\n      var options = _this.options;\n      var player = _this.player;\n      var load = proxy(_this.loadImage, _this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      var playing;\n\n      if (!_this.isShown || _this.isPlayed) {\n        return _this;\n      }\n\n      if (options.fullscreen) {\n        _this.requestFullscreen();\n      }\n\n      _this.isPlayed = true;\n      addClass(player, CLASS_SHOW);\n\n      each(_this.items, function (item, i) {\n        var img = getByTag(item, 'img')[0];\n        var image = document.createElement('img');\n\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        total++;\n\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, load, true);\n        appendChild(player, image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        playing = function () {\n          _this.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index++;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n\n            playing();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          playing();\n        }\n      }\n\n      return _this;\n    },\n\n    // Stop play\n    stop: function () {\n      var _this = this;\n      var player = _this.player;\n\n      if (!_this.isPlayed) {\n        return _this;\n      }\n\n      if (_this.options.fullscreen) {\n        _this.exitFullscreen();\n      }\n\n      _this.isPlayed = false;\n      clearTimeout(_this.playing);\n      removeClass(player, CLASS_SHOW);\n      empty(player);\n\n      return _this;\n    },\n\n    // Enter modal mode (only available in inline mode)\n    full: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isShown || _this.isPlayed || _this.isFulled || !options.inline) {\n        return _this;\n      }\n\n      _this.isFulled = true;\n      _this.open();\n      addClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('style', '');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      _this.initContainer();\n      _this.viewerData = extend({}, _this.containerData);\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Exit modal mode (only available in inline mode)\n    exit: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isFulled) {\n        return _this;\n      }\n\n      _this.isFulled = false;\n      _this.close();\n      removeClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n\n      _this.viewerData = extend({}, _this.parentData);\n      _this.renderViewer();\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Show the current ratio of the image with percentage\n    tooltip: function () {\n      var _this = this;\n      var options = _this.options;\n      var tooltipBox = _this.tooltipBox;\n      var imageData = _this.imageData;\n\n      if (!_this.isViewed || _this.isPlayed || !options.tooltip) {\n        return _this;\n      }\n\n      setText(tooltipBox, round(imageData.ratio * 100) + '%');\n\n      if (!_this.tooltiping) {\n        if (options.transition) {\n          if (_this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITIONEND);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          forceReflow(tooltipBox);\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n        }\n      } else {\n        clearTimeout(_this.tooltiping);\n      }\n\n      _this.tooltiping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITIONEND, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            _this.fading = false;\n          }, true);\n\n          removeClass(tooltipBox, CLASS_IN);\n          _this.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n        }\n\n        _this.tooltiping = false;\n      }, 1000);\n\n      return _this;\n    },\n\n    // Toggle the image size between its natural size and initial size\n    toggle: function () {\n      var _this = this;\n\n      if (_this.imageData.ratio === 1) {\n        _this.zoomTo(_this.initialImageData.ratio, true);\n      } else {\n        _this.zoomTo(1, true);\n      }\n\n      return _this;\n    },\n\n    // Reset the image to its initial state\n    reset: function () {\n      var _this = this;\n\n      if (_this.isViewed && !_this.isPlayed) {\n        _this.imageData = extend({}, _this.initialImageData);\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    // Update viewer when images changed\n    update: function () {\n      var _this = this;\n      var indexes = [];\n      var index;\n\n      // Destroy viewer if the target image was deleted\n      if (_this.isImg && !_this.element.parentNode) {\n        return _this.destroy();\n      }\n\n      _this.length = _this.images.length;\n\n      if (_this.isBuilt) {\n        each(_this.items, function (item, i) {\n          var img = getByTag(item, 'img')[0];\n          var image = _this.images[i];\n\n          if (image) {\n            if (image.src !== img.src) {\n              indexes.push(i);\n            }\n          } else {\n            indexes.push(i);\n          }\n        });\n\n        setStyle(_this.list, {\n          width: 'auto'\n        });\n\n        _this.initList();\n\n        if (_this.isShown) {\n          if (_this.length) {\n            if (_this.isViewed) {\n              index = inArray(_this.index, indexes);\n\n              if (index >= 0) {\n                _this.isViewed = false;\n                _this.view(max(_this.index - (index + 1), 0));\n              } else {\n                addClass(_this.items[_this.index], CLASS_ACTIVE);\n              }\n            }\n          } else {\n            _this.image = null;\n            _this.isViewed = false;\n            _this.index = 0;\n            _this.imageData = null;\n            empty(_this.canvas);\n            empty(_this.title);\n          }\n        }\n      }\n\n      return _this;\n    },\n\n    // Destroy the viewer\n    destroy: function () {\n      var _this = this;\n      var element = _this.element;\n\n      if (_this.options.inline) {\n        _this.unbind();\n      } else {\n        if (_this.isShown) {\n          _this.unbind();\n        }\n\n        removeListener(element, EVENT_CLICK, _this._start);\n      }\n\n      _this.unbuild();\n      removeData(element, NAMESPACE);\n\n      return _this;\n    },\n\n    open: function () {\n      var body = this.body;\n\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.scrollbarWidth + 'px';\n    },\n\n    close: function () {\n      var body = this.body;\n\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = 0;\n    },\n\n    shown: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isFulled = true;\n      _this.isShown = true;\n      _this.isVisible = true;\n      _this.render();\n      _this.bind();\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, true);\n      }\n\n      dispatchEvent(element, EVENT_SHOWN);\n    },\n\n    hidden: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isViewed = false;\n      _this.isFulled = false;\n      _this.isShown = false;\n      _this.isVisible = false;\n      _this.unbind();\n      _this.close();\n      addClass(_this.viewer, CLASS_HIDE);\n      _this.resetList();\n      _this.resetImage();\n\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, true);\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    },\n\n    requestFullscreen: function () {\n      var _this = this;\n      var documentElement = document.documentElement;\n\n      if (_this.isFulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement && !document.msFullscreenElement) {\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        }\n      }\n    },\n\n    exitFullscreen: function () {\n      var _this = this;\n\n      if (_this.isFulled) {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n      }\n    },\n\n    change: function (originalEvent) {\n      var _this = this;\n      var offsetX = _this.endX - _this.startX;\n      var offsetY = _this.endY - _this.startY;\n\n      switch (_this.action) {\n\n        // Move the current image\n        case 'move':\n          _this.move(offsetX, offsetY);\n          break;\n\n        // Zoom the current image\n        case 'zoom':\n          _this.zoom(function (x1, y1, x2, y2) {\n            var z1 = sqrt(x1 * x1 + y1 * y1);\n            var z2 = sqrt(x2 * x2 + y2 * y2);\n\n            return (z2 - z1) / z1;\n          }(\n            abs(_this.startX - _this.startX2),\n            abs(_this.startY - _this.startY2),\n            abs(_this.endX - _this.endX2),\n            abs(_this.endY - _this.endY2)\n          ), false, originalEvent);\n\n          _this.startX2 = _this.endX2;\n          _this.startY2 = _this.endY2;\n          break;\n\n        case 'switch':\n          _this.action = 'switched';\n\n          if (abs(offsetX) > abs(offsetY)) {\n            if (offsetX > 1) {\n              _this.prev();\n            } else if (offsetX < -1) {\n              _this.next();\n            }\n          }\n\n          break;\n\n        // No default\n      }\n\n      // Override\n      _this.startX = _this.endX;\n      _this.startY = _this.endY;\n    },\n\n    isSwitchable: function () {\n      var _this = this;\n      var imageData = _this.imageData;\n      var viewerData = _this.viewerData;\n\n      return imageData.left >= 0 && imageData.top >= 0 &&\n        imageData.width <= viewerData.width &&\n        imageData.height <= viewerData.height;\n    }\n  };\n\n  Viewer.DEFAULTS = {\n\n    // Enable inline mode\n    inline: false,\n\n    // Show the button on the top-right of the viewer\n    button: true,\n\n    // Show the navbar\n    navbar: true,\n\n    // Show the title\n    title: true,\n\n    // Show the toolbar\n    toolbar: true,\n\n    // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n    tooltip: true,\n\n    // Enable to move the image\n    movable: true,\n\n    // Enable to zoom the image\n    zoomable: true,\n\n    // Enable to rotate the image\n    rotatable: true,\n\n    // Enable to scale the image\n    scalable: true,\n\n    // Enable CSS3 Transition for some special elements\n    transition: true,\n\n    // Enable to request fullscreen when play\n    fullscreen: true,\n\n    // Enable keyboard support\n    keyboard: true,\n\n    // Define interval of each image when playing\n    interval: 5000,\n\n    // Min width of the viewer in inline mode\n    minWidth: 200,\n\n    // Min height of the viewer in inline mode\n    minHeight: 100,\n\n    // Define the ratio when zoom the image by wheeling mouse\n    zoomRatio: 0.1,\n\n    // Define the min ratio of the image when zoom out\n    minZoomRatio: 0.01,\n\n    // Define the max ratio of the image when zoom in\n    maxZoomRatio: 100,\n\n    // Define the CSS `z-index` value of viewer in modal mode.\n    zIndex: 2015,\n\n    // Define the CSS `z-index` value of viewer in inline mode.\n    zIndexInline: 0,\n\n    // Define where to get the original image URL for viewing\n    // Type: String (an image attribute) or Function (should return an image URL)\n    url: 'src',\n\n    // Event shortcuts\n    build: null,\n    built: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null\n  };\n\n  Viewer.TEMPLATE = (\n    '<div class=\"viewer-container\">' +\n      '<div class=\"viewer-canvas\"></div>' +\n      '<div class=\"viewer-footer\">' +\n        '<div class=\"viewer-title\"></div>' +\n        '<ul class=\"viewer-toolbar\">' +\n          '<li class=\"viewer-zoom-in\" data-action=\"zoom-in\"></li>' +\n          '<li class=\"viewer-zoom-out\" data-action=\"zoom-out\"></li>' +\n          '<li class=\"viewer-one-to-one\" data-action=\"one-to-one\"></li>' +\n          '<li class=\"viewer-reset\" data-action=\"reset\"></li>' +\n          '<li class=\"viewer-prev\" data-action=\"prev\"></li>' +\n          '<li class=\"viewer-play\" data-action=\"play\"></li>' +\n          '<li class=\"viewer-next\" data-action=\"next\"></li>' +\n          '<li class=\"viewer-rotate-left\" data-action=\"rotate-left\"></li>' +\n          '<li class=\"viewer-rotate-right\" data-action=\"rotate-right\"></li>' +\n          '<li class=\"viewer-flip-horizontal\" data-action=\"flip-horizontal\"></li>' +\n          '<li class=\"viewer-flip-vertical\" data-action=\"flip-vertical\"></li>' +\n        '</ul>' +\n        '<div class=\"viewer-navbar\">' +\n          '<ul class=\"viewer-list\"></ul>' +\n        '</div>' +\n      '</div>' +\n      '<div class=\"viewer-tooltip\"></div>' +\n      '<div class=\"viewer-button\" data-action=\"mix\"></div>' +\n      '<div class=\"viewer-player\"></div>' +\n    '</div>'\n  );\n\n  var _Viewer = window.Viewer;\n\n  Viewer.noConflict = function () {\n    window.Viewer = _Viewer;\n    return Viewer;\n  };\n\n  Viewer.setDefaults = function (options) {\n    extend(Viewer.DEFAULTS, options);\n  };\n\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {\n      return Viewer;\n    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  }\n\n  if (!noGlobal) {\n    window.Viewer = Viewer;\n  }\n\n  return Viewer;\n\n});\n\n\n/***/ },\n\n/***/ 3:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n/***/ },\n\n/***/ 4:\n/***/ function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ },\n\n/***/ 56:\n/***/ function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar actions = __webpack_require__(3);\nvar paths = __webpack_require__(4);\n\n__webpack_require__(21);\n\nvar Viewer = __webpack_require__(24);\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar first = true;\n\nvar viewer = new Viewer($('#viewer')[0], {\n    inline: true,\n    viewed: function (e) {\n        if (first) {\n            viewer.view($('#viewer').children('.active').index());\n            first = false;\n            e.stopPropagation();\n            return false;\n        }\n        $('#viewer img.active').removeClass('active');\n        var $image = $(e.detail.originalImage);\n        $image.addClass('active');\n        $('#viewer-name').text($image.attr('alt'));\n    }\n});\n\nactions.define('close', function () {\n    location.href = PATH + '/files' + $('#viewer img.active').data('path');\n});\n\n/***/ }\n\n},[56]);\n\n\n// WEBPACK FOOTER //\n// dist/viewer.js","/*!\n * Viewer.js v0.5.0\n * https://github.com/fengyuanchen/viewerjs\n *\n * Copyright (c) 2015-2016 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2016-07-22T08:46:05.003Z\n */\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (window) {\n      if (!window.document) {\n        throw new Error('Viewer requires a window with a document');\n      }\n\n      return factory(window);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n\n  'use strict';\n\n  var document = window.document;\n  var Event = window.Event;\n\n  // Constants\n  var NAMESPACE = 'viewer';\n\n  // Classes\n  var CLASS_FIXED = NAMESPACE + '-fixed';\n  var CLASS_OPEN = NAMESPACE + '-open';\n  var CLASS_SHOW = NAMESPACE + '-show';\n  var CLASS_HIDE = NAMESPACE + '-hide';\n  var CLASS_HIDE_XS_DOWN = 'viewer-hide-xs-down';\n  var CLASS_HIDE_SM_DOWN = 'viewer-hide-sm-down';\n  var CLASS_HIDE_MD_DOWN = 'viewer-hide-md-down';\n  var CLASS_FADE = NAMESPACE + '-fade';\n  var CLASS_IN = NAMESPACE + '-in';\n  var CLASS_MOVE = NAMESPACE + '-move';\n  var CLASS_ACTIVE = NAMESPACE + '-active';\n  var CLASS_INVISIBLE = NAMESPACE + '-invisible';\n  var CLASS_TRANSITION = NAMESPACE + '-transition';\n  var CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';\n  var CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';\n  var CLASS_CLOSE = NAMESPACE + '-close';\n\n  // Events\n  var EVENT_MOUSEDOWN = 'mousedown touchstart pointerdown MSPointerDown';\n  var EVENT_MOUSEMOVE = 'mousemove touchmove pointermove MSPointerMove';\n  var EVENT_MOUSEUP = 'mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel';\n  var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n  var EVENT_TRANSITIONEND = 'transitionend';\n  var EVENT_LOAD = 'load';\n  var EVENT_KEYDOWN = 'keydown';\n  var EVENT_CLICK = 'click';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n\n  // RegExps\n  var REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  var REGEXP_TRIM = /^\\s+(.*)\\s+$/;\n  var REGEXP_SPACES = /\\s+/;\n\n  // Supports\n  var SUPPORT_TRANSITION = typeof document.createElement(NAMESPACE).style.transition !== 'undefined';\n\n  // Maths\n  var min = Math.min;\n  var max = Math.max;\n  var abs = Math.abs;\n  var sqrt = Math.sqrt;\n  var round = Math.round;\n\n  // Utilities\n  var objectProto = Object.prototype;\n  var toString = objectProto.toString;\n  var hasOwnProperty = objectProto.hasOwnProperty;\n  var slice = Array.prototype.slice;\n\n  function typeOf(obj) {\n    return toString.call(obj).slice(8, -1).toLowerCase();\n  }\n\n  function isString(str) {\n    return typeof str === 'string';\n  }\n\n  function isNumber(num) {\n    return typeof num === 'number' && !isNaN(num);\n  }\n\n  function isUndefined(obj) {\n    return typeof obj === 'undefined';\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n  }\n\n  function isPlainObject(obj) {\n    var constructor;\n    var prototype;\n\n    if (!isObject(obj)) {\n      return false;\n    }\n\n    try {\n      constructor = obj.constructor;\n      prototype = constructor.prototype;\n\n      return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function isFunction(fn) {\n    return typeOf(fn) === 'function';\n  }\n\n  function isArray(arr) {\n    return Array.isArray ? Array.isArray(arr) : typeOf(arr) === 'array';\n  }\n\n  function toArray(obj, offset) {\n    offset = offset >= 0 ? offset : 0;\n\n    if (Array.from) {\n      return Array.from(obj).slice(offset);\n    }\n\n    return slice.call(obj, offset);\n  }\n\n  function inArray(value, arr) {\n    var index = -1;\n\n    if (arr.indexOf) {\n      return arr.indexOf(value);\n    } else {\n      each(arr, function (n, i) {\n        if (n === value) {\n          index = i;\n          return false;\n        }\n      });\n    }\n\n    return index;\n  }\n\n  function trim(str) {\n    if (isString(str)) {\n      str = str.trim ? str.trim() : str.replace(REGEXP_TRIM, '1');\n    }\n\n    return str;\n  }\n\n  function each(obj, callback) {\n    var length;\n    var i;\n\n    if (obj && isFunction(callback)) {\n      if (isArray(obj) || isNumber(obj.length)/* array-like */) {\n        for (i = 0, length = obj.length; i < length; i++) {\n          if (callback.call(obj, obj[i], i, obj) === false) {\n            break;\n          }\n        }\n      } else if (isObject(obj)) {\n        for (i in obj) {\n          if (obj.hasOwnProperty(i)) {\n            if (callback.call(obj, obj[i], i, obj) === false) {\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    return obj;\n  }\n\n  function extend(obj) {\n    var args;\n\n    if (arguments.length > 1) {\n      args = toArray(arguments);\n\n      if (Object.assign) {\n        return Object.assign.apply(Object, args);\n      }\n\n      args.shift();\n\n      each(args, function (arg) {\n        each(arg, function (prop, i) {\n          obj[i] = prop;\n        });\n      });\n    }\n\n    return obj;\n  }\n\n  function proxy(fn, context) {\n    var args = toArray(arguments, 2);\n\n    return function () {\n      return fn.apply(context, args.concat(toArray(arguments)));\n    };\n  }\n\n  function setStyle(element, styles) {\n    var style = element.style;\n\n    each(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n\n  function getStyle(element) {\n    return window.getComputedStyle ?\n      window.getComputedStyle(element, null) :\n      element.currentStyle;\n  }\n\n  function hasClass(element, value) {\n    return element.classList ?\n      element.classList.contains(value) :\n      element.className.indexOf(value) > -1;\n  }\n\n  function addClass(element, value) {\n    var className;\n\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        addClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.add(value);\n    }\n\n    className = trim(element.className);\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = className + ' ' + value;\n    }\n  }\n\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        removeClass(elem, value);\n      });\n    }\n\n    if (element.classList) {\n      return element.classList.remove(value);\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  function toggleClass(element, value, added) {\n    if (isNumber(element.length)) {\n      return each(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n\n  function hyphenate(str) {\n    return str.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    } else if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute('data-' + hyphenate(name));\n  }\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute('data-' + hyphenate(name), data);\n    }\n  }\n\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      delete element[name];\n    } else if (element.dataset) {\n      delete element.dataset[name];\n    } else {\n      element.removeAttribute('data-' + hyphenate(name));\n    }\n  }\n\n  function addListener(element, type, handler, once) {\n    var types = trim(type).split(REGEXP_SPACES);\n    var originalHandler = handler;\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        addListener(element, type, handler);\n      });\n    }\n\n    if (once) {\n      handler = function () {\n        removeListener(element, type, handler);\n\n        return originalHandler.apply(element, arguments);\n      };\n    }\n\n    if (element.addEventListener) {\n      element.addEventListener(type, handler, false);\n    } else if (element.attachEvent) {\n      element.attachEvent('on' + type, handler);\n    }\n  }\n\n  function removeListener(element, type, handler) {\n    var types = trim(type).split(REGEXP_SPACES);\n\n    if (types.length > 1) {\n      return each(types, function (type) {\n        removeListener(element, type, handler);\n      });\n    }\n\n    if (element.removeEventListener) {\n      element.removeEventListener(type, handler, false);\n    } else if (element.detachEvent) {\n      element.detachEvent('on' + type, handler);\n    }\n  }\n\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    if (element.dispatchEvent) {\n\n      // Event and CustomEvent on IE9-11 are global objects, not constructors\n      if (isFunction(Event) && isFunction(CustomEvent)) {\n        if (isUndefined(data)) {\n          event = new Event(type, {\n            bubbles: true,\n            cancelable: true\n          });\n        } else {\n          event = new CustomEvent(type, {\n            detail: data,\n            bubbles: true,\n            cancelable: true\n          });\n        }\n      } else {\n        // IE9-11\n        if (isUndefined(data)) {\n          event = document.createEvent('Event');\n          event.initEvent(type, true, true);\n        } else {\n          event = document.createEvent('CustomEvent');\n          event.initCustomEvent(type, true, true, data);\n        }\n      }\n\n      // IE9+\n      return element.dispatchEvent(event);\n    } else if (element.fireEvent) {\n\n      // IE6-10 (native events only)\n      return element.fireEvent('on' + type);\n    }\n  }\n\n  function preventDefault(e) {\n    if (e.preventDefault) {\n      e.preventDefault();\n    } else {\n      e.returnValue = false;\n    }\n  }\n\n  function getEvent(event) {\n    var e = event || window.event;\n    var doc;\n\n    // Fix target property (IE8)\n    if (!e.target) {\n      e.target = e.srcElement || document;\n    }\n\n    if (!isNumber(e.pageX)) {\n      doc = document.documentElement;\n      e.pageX = e.clientX + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0);\n      e.pageY = e.clientY + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0);\n    }\n\n    return e;\n  }\n\n  function getOffset(element) {\n    var doc = document.documentElement;\n    var box = element.getBoundingClientRect();\n\n    return {\n      left: box.left + (window.scrollX || doc && doc.scrollLeft || 0) - (doc && doc.clientLeft || 0),\n      top: box.top + (window.scrollY || doc && doc.scrollTop || 0) - (doc && doc.clientTop || 0)\n    };\n  }\n\n  function getTouchesCenter(touches) {\n    var length = touches.length;\n    var pageX = 0;\n    var pageY = 0;\n\n    if (length) {\n      each(touches, function (touch) {\n        pageX += touch.pageX;\n        pageY += touch.pageY;\n      });\n\n      pageX /= length;\n      pageY /= length;\n    }\n\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  function getByTag(element, tagName) {\n    return element.getElementsByTagName(tagName);\n  }\n\n  function getByClass(element, className) {\n    return element.getElementsByClassName ?\n      element.getElementsByClassName(className) :\n      element.querySelectorAll('.' + className);\n  }\n\n  function appendChild(element, elem) {\n    if (elem.length) {\n      return each(elem, function (el) {\n        appendChild(element, el);\n      });\n    }\n\n    element.appendChild(elem);\n  }\n\n  function removeChild(element) {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n\n  function empty(element) {\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n\n  function setText(element, text) {\n    if (!isUndefined(element.textContent)) {\n      element.textContent = text;\n    } else {\n      element.innerText = text;\n    }\n  }\n\n  // Force reflow to enable CSS3 transition\n  function forceReflow(element) {\n    return element.offsetWidth;\n  }\n\n  // e.g.: http://domain.com/path/to/picture.jpg?size=1280×960 -> picture.jpg\n  function getImageName(url) {\n    return isString(url) ? url.replace(/^.*\\//, '').replace(/[\\?&#].*$/, '') : '';\n  }\n\n  function getImageSize(image, callback) {\n    var newImage;\n\n    // Modern browsers\n    if (image.naturalWidth) {\n      return callback(image.naturalWidth, image.naturalHeight);\n    }\n\n    // IE8: Don't use `new Image()` here\n    newImage = document.createElement('img');\n\n    newImage.onload = function () {\n      callback(this.width, this.height);\n    };\n\n    newImage.src = image.src;\n  }\n\n  function getTransform(data) {\n    var transforms = [];\n    var rotate = data.rotate;\n    var scaleX = data.scaleX;\n    var scaleY = data.scaleY;\n\n    // Rotate should come first before scale\n    if (isNumber(rotate)) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (isNumber(scaleX)) {\n      transforms.push('scaleX(' + scaleX + ')');\n    }\n\n    if (isNumber(scaleY)) {\n      transforms.push('scaleY(' + scaleY + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n\n  function getResponsiveClass(option) {\n    switch (option) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n    }\n  }\n\n  function Viewer(element, options) {\n    var _this = this;\n\n    _this.element = element;\n    _this.options = extend({}, Viewer.DEFAULTS, isPlainObject(options) && options);\n    _this.isImg = false;\n    _this.isBuilt = false;\n    _this.isShown = false;\n    _this.isViewed = false;\n    _this.isFulled = false;\n    _this.isPlayed = false;\n    _this.wheeling = false;\n    _this.playing = false;\n    _this.fading = false;\n    _this.tooltiping = false;\n    _this.transitioning = false;\n    _this.action = false;\n    _this.target = false;\n    _this.timeout = false;\n    _this.index = 0;\n    _this.length = 0;\n    _this.init();\n  }\n\n  Viewer.prototype = {\n    constructor: Viewer,\n\n    init: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var isImg = element.tagName.toLowerCase() === 'img';\n      var images = isImg ? [element] : getByTag(element, 'img');\n      var length = images.length;\n      var ready = proxy(_this.ready, _this);\n\n      if (getData(element, NAMESPACE)) {\n        return;\n      }\n\n      setData(element, NAMESPACE, _this);\n\n      if (!length) {\n        return;\n      }\n\n      if (isFunction(options.ready)) {\n        addListener(element, EVENT_READY, options.ready, true);\n      }\n\n      // Override `transition` option if it is not supported\n      if (!SUPPORT_TRANSITION) {\n        options.transition = false;\n      }\n\n      _this.isImg = isImg;\n      _this.length = length;\n      _this.count = 0;\n      _this.images = images;\n      _this.body = document.body;\n      _this.scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n      if (options.inline) {\n        addListener(element, EVENT_READY, function () {\n          _this.view();\n        }, true);\n\n        each(images, function (image) {\n          if (image.complete) {\n            ready();\n          } else {\n            addListener(image, EVENT_LOAD, ready, true);\n          }\n        });\n      } else {\n        addListener(element, EVENT_CLICK, (_this._start = proxy(_this.start, _this)));\n      }\n    },\n\n    ready: function () {\n      var _this = this;\n\n      _this.count++;\n\n      if (_this.count === _this.length) {\n        _this.build();\n      }\n    },\n\n    build: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var template;\n      var parent;\n      var viewer;\n      var button;\n      var toolbar;\n      var navbar;\n      var title;\n      var rotate;\n\n      if (_this.isBuilt) {\n        return;\n      }\n\n      template = document.createElement('div');\n      template.innerHTML = Viewer.TEMPLATE;\n\n      _this.parent = parent = element.parentNode;\n      _this.viewer = viewer = getByClass(template, 'viewer-container')[0];\n      _this.canvas = getByClass(viewer, 'viewer-canvas')[0];\n      _this.footer = getByClass(viewer, 'viewer-footer')[0];\n      _this.title = title = getByClass(viewer, 'viewer-title')[0];\n      _this.toolbar = toolbar = getByClass(viewer, 'viewer-toolbar')[0];\n      _this.navbar = navbar = getByClass(viewer, 'viewer-navbar')[0];\n      _this.button = button = getByClass(viewer, 'viewer-button')[0];\n      _this.tooltipBox = getByClass(viewer, 'viewer-tooltip')[0];\n      _this.player = getByClass(viewer, 'viewer-player')[0];\n      _this.list = getByClass(viewer, 'viewer-list')[0];\n\n      addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n      addClass(toolbar, !options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));\n      addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n      toggleClass(button, CLASS_HIDE, !options.button);\n\n      toggleClass(toolbar.querySelector('.viewer-one-to-one'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"zoom\"]'), CLASS_INVISIBLE, !options.zoomable);\n      toggleClass(toolbar.querySelectorAll('li[class*=\"flip\"]'), CLASS_INVISIBLE, !options.scalable);\n\n      if (!options.rotatable) {\n        rotate = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n        addClass(rotate, CLASS_INVISIBLE);\n        appendChild(toolbar, rotate);\n      }\n\n      if (options.inline) {\n        addClass(button, CLASS_FULLSCREEN);\n        setStyle(viewer, {\n          zIndex: options.zIndexInline\n        });\n\n        if (getStyle(parent).position === 'static') {\n          setStyle(parent, {\n            position: 'relative'\n          });\n        }\n      } else {\n        addClass(button, CLASS_CLOSE);\n        addClass(viewer, CLASS_FIXED);\n        addClass(viewer, CLASS_FADE);\n        addClass(viewer, CLASS_HIDE);\n\n        setStyle(viewer, {\n          zIndex: options.zIndex\n        });\n      }\n\n      // Inserts the viewer after to the current element\n      parent.insertBefore(viewer, element.nextSibling);\n\n      if (options.inline) {\n        _this.render();\n        _this.bind();\n        _this.isShown = true;\n      }\n\n      _this.isBuilt = true;\n\n      dispatchEvent(element, EVENT_READY);\n    },\n\n    unbuild: function () {\n      var _this = this;\n\n      if (!_this.isBuilt) {\n        return;\n      }\n\n      _this.isBuilt = false;\n      removeChild(_this.viewer);\n    },\n\n    bind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        addListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      addListener(viewer, EVENT_CLICK, (_this._click = proxy(_this.click, _this)));\n      addListener(viewer, EVENT_WHEEL, (_this._wheel = proxy(_this.wheel, _this)));\n      addListener(_this.canvas, EVENT_MOUSEDOWN, (_this._mousedown = proxy(_this.mousedown, _this)));\n      addListener(document, EVENT_MOUSEMOVE, (_this._mousemove = proxy(_this.mousemove, _this)));\n      addListener(document, EVENT_MOUSEUP, (_this._mouseup = proxy(_this.mouseup, _this)));\n      addListener(document, EVENT_KEYDOWN, (_this._keydown = proxy(_this.keydown, _this)));\n      addListener(window, EVENT_RESIZE, (_this._resize = proxy(_this.resize, _this)));\n    },\n\n    unbind: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (isFunction(options.view)) {\n        removeListener(element, EVENT_VIEW, options.view);\n      }\n\n      if (isFunction(options.viewed)) {\n        removeListener(element, EVENT_VIEWED, options.viewed);\n      }\n\n      removeListener(viewer, EVENT_CLICK, _this._click);\n      removeListener(viewer, EVENT_WHEEL, _this._wheel);\n      removeListener(_this.canvas, EVENT_MOUSEDOWN, _this._mousedown);\n      removeListener(document, EVENT_MOUSEMOVE, _this._mousemove);\n      removeListener(document, EVENT_MOUSEUP, _this._mouseup);\n      removeListener(document, EVENT_KEYDOWN, _this._keydown);\n      removeListener(window, EVENT_RESIZE, _this._resize);\n    },\n\n    render: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.initList();\n      _this.renderViewer();\n    },\n\n    initContainer: function () {\n      var _this = this;\n\n      _this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n\n    initViewer: function () {\n      var _this = this;\n      var options = _this.options;\n      var parent = _this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        _this.parentData = viewerData = {\n          width: max(parent.offsetWidth, options.minWidth),\n          height: max(parent.offsetHeight, options.minHeight)\n        };\n      }\n\n      if (_this.isFulled || !viewerData) {\n        viewerData = _this.containerData;\n      }\n\n      _this.viewerData = extend({}, viewerData);\n    },\n\n    renderViewer: function () {\n      var _this = this;\n\n      if (_this.options.inline && !_this.isFulled) {\n        setStyle(_this.viewer, _this.viewerData);\n      }\n    },\n\n    initList: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var list = _this.list;\n      var items = [];\n\n      each(_this.images, function (image, i) {\n        var src = image.src;\n        var alt = image.alt || getImageName(src);\n        var url = options.url;\n\n        if (!src) {\n          return;\n        }\n\n        if (isString(url)) {\n          url = image.getAttribute(url);\n        } else if (isFunction(url)) {\n          url = url.call(image, image);\n        }\n\n        items.push(\n          '<li>' +\n            '<img' +\n              ' src=\"' + src + '\"' +\n              ' data-action=\"view\"' +\n              ' data-index=\"' +  i + '\"' +\n              ' data-original-url=\"' +  (url || src) + '\"' +\n              ' alt=\"' +  alt + '\"' +\n            '>' +\n          '</li>'\n        );\n      });\n\n      list.innerHTML = items.join('');\n\n      each(getByTag(list, 'img'), function (image) {\n        setData(image, 'filled', true);\n        addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n      });\n\n      _this.items = getByTag(list, 'li');\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, true);\n      }\n    },\n\n    renderList: function (index) {\n      var _this = this;\n      var i = index || _this.index;\n      var width = _this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n      // Place the active item in the center of the screen\n      setStyle(_this.list, {\n        width: outerWidth * _this.length,\n        marginLeft: (_this.viewerData.width - width) / 2 - outerWidth * i\n      });\n    },\n\n    resetList: function () {\n      var _this = this;\n\n      empty(_this.list);\n      removeClass(_this.list, CLASS_TRANSITION);\n      setStyle({\n        marginLeft: 0\n      });\n    },\n\n    initImage: function (callback) {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var viewerData = _this.viewerData;\n      var footerHeight = _this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = _this.imageData || {};\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        var initialImageData;\n        var imageData;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = min(width * 0.9, naturalWidth);\n        height = min(height * 0.9, naturalHeight);\n\n        imageData = {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight,\n          aspectRatio: aspectRatio,\n          ratio: width / naturalWidth,\n          width: width,\n          height: height,\n          left: (viewerWidth - width) / 2,\n          top: (viewerHeight - height) / 2\n        };\n\n        initialImageData = extend({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this.imageData = imageData;\n        _this.initialImageData = initialImageData;\n\n        if (isFunction(callback)) {\n          callback();\n        }\n      });\n    },\n\n    renderImage: function (callback) {\n      var _this = this;\n      var image = _this.image;\n      var imageData = _this.imageData;\n      var transform = getTransform(imageData);\n\n      setStyle(image, {\n        width: imageData.width,\n        height: imageData.height,\n        marginLeft: imageData.left,\n        marginTop: imageData.top,\n        WebkitTransform: transform,\n        msTransform: transform,\n        transform: transform\n      });\n\n      if (isFunction(callback)) {\n        if (_this.transitioning) {\n          addListener(image, EVENT_TRANSITIONEND, callback, true);\n        } else {\n          callback();\n        }\n      }\n    },\n\n    resetImage: function () {\n      var _this = this;\n\n      // this.image only defined after viewed\n      if (_this.image) {\n        removeChild(_this.image);\n        _this.image = null;\n      }\n    },\n\n    start: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n\n      if (target.tagName.toLowerCase() === 'img') {\n        _this.target = target;\n        _this.show();\n      }\n    },\n\n    click: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var target = e.target;\n      var action = getData(target, 'action');\n      var imageData = _this.imageData;\n\n      switch (action) {\n        case 'mix':\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (_this.options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              } else {\n                _this.full();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        case 'view':\n          _this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          _this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          _this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          _this.toggle();\n          break;\n\n        case 'reset':\n          _this.reset();\n          break;\n\n        case 'prev':\n          _this.prev();\n          break;\n\n        case 'play':\n          _this.play();\n          break;\n\n        case 'next':\n          _this.next();\n          break;\n\n        case 'rotate-left':\n          _this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          _this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          _this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          _this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n      }\n    },\n\n    load: function () {\n      var _this = this;\n      var options = _this.options;\n      var image = _this.image;\n      var index = _this.index;\n      var viewerData = _this.viewerData;\n\n      if (_this.timeout) {\n        clearTimeout(_this.timeout);\n        _this.timeout = false;\n      }\n\n      removeClass(image, CLASS_INVISIBLE);\n\n      image.style.cssText = (\n        'width:0;' +\n        'height:0;' +\n        'margin-left:' + viewerData.width / 2 + 'px;' +\n        'margin-top:' + viewerData.height / 2 + 'px;' +\n        'max-width:none!important;' +\n        'visibility:visible;'\n      );\n\n      _this.initImage(function () {\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n        toggleClass(image, CLASS_MOVE, options.movable);\n\n        _this.renderImage(function () {\n          _this.isViewed = true;\n          dispatchEvent(_this.element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          });\n        });\n      });\n    },\n\n    loadImage: function (event) {\n      var e = getEvent(event);\n      var image = e.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n\n      getImageSize(image, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else {\n          if (filled) {\n            height = parentWidth / aspectRatio;\n          } else {\n            width = parentHeight * aspectRatio;\n          }\n        }\n\n        setStyle(image, {\n          width: width,\n          height: height,\n          marginLeft: (parentWidth - width) / 2,\n          marginTop: (parentHeight - height) / 2\n        });\n      });\n    },\n\n    resize: function () {\n      var _this = this;\n\n      _this.initContainer();\n      _this.initViewer();\n      _this.renderViewer();\n      _this.renderList();\n\n      if (_this.isViewed) {\n        _this.initImage(function () {\n          _this.renderImage();\n        });\n      }\n\n      if (_this.isPlayed) {\n        each(getByTag(_this.player, 'img'), function (image) {\n          addListener(image, EVENT_LOAD, proxy(_this.loadImage, _this), true);\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n\n    wheel: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var ratio = Number(_this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      preventDefault(e);\n\n      // Limit wheel speed to prevent zoom too fast\n      if (_this.wheeling) {\n        return;\n      }\n\n      _this.wheeling = true;\n\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n\n      if (e.deltaY) {\n        delta = e.deltaY > 0 ? 1 : -1;\n      } else if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n      } else if (e.detail) {\n        delta = e.detail > 0 ? 1 : -1;\n      }\n\n      _this.zoom(-delta * ratio, true, e);\n    },\n\n    keydown: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var options = _this.options;\n      var key = e.keyCode || e.which || e.charCode;\n\n      if (!_this.isFulled || !options.keyboard) {\n        return;\n      }\n\n      switch (key) {\n\n        // (Key: Esc)\n        case 27:\n          if (_this.isPlayed) {\n            _this.stop();\n          } else {\n            if (options.inline) {\n              if (_this.isFulled) {\n                _this.exit();\n              }\n            } else {\n              _this.hide();\n            }\n          }\n\n          break;\n\n        // (Key: Space)\n        case 32:\n          if (_this.isPlayed) {\n            _this.stop();\n          }\n\n          break;\n\n        // View previous (Key: ←)\n        case 37:\n          _this.prev();\n          break;\n\n        // Zoom in (Key: ↑)\n        case 38:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(options.zoomRatio, true);\n          break;\n\n        // View next (Key: →)\n        case 39:\n          _this.next();\n          break;\n\n        // Zoom out (Key: ↓)\n        case 40:\n\n          // Prevent scroll on Firefox\n          preventDefault(e);\n\n          _this.zoom(-options.zoomRatio, true);\n          break;\n\n        // Zoom out to initial size (Key: Ctrl + 0)\n        case 48:\n          // Go to next\n\n        // Zoom in to natural size (Key: Ctrl + 1)\n        case 49:\n          if (e.ctrlKey || e.shiftKey) {\n            preventDefault(e);\n            _this.toggle();\n          }\n\n          break;\n\n        // No default\n      }\n    },\n\n    mousedown: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = options.movable ? 'move' : false;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.startX2 = touch.pageX;\n            _this.startY2 = touch.pageY;\n            action = 'zoom';\n          } else {\n            return;\n          }\n        } else {\n          if (_this.isSwitchable()) {\n            action = 'switch';\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n        _this.action = action;\n        _this.startX = touch ? touch.pageX : e.pageX;\n        _this.startY = touch ? touch.pageY : e.pageY;\n      }\n    },\n\n    mousemove: function (event) {\n      var _this = this;\n      var options = _this.options;\n      var e = getEvent(event);\n      var action = _this.action;\n      var image = _this.image;\n      var touches = e.touches;\n      var touchesLength;\n      var touch;\n\n      if (!_this.isViewed) {\n        return;\n      }\n\n      if (touches) {\n        touchesLength = touches.length;\n\n        if (touchesLength > 1) {\n          if (options.zoomable && touchesLength === 2) {\n            touch = touches[1];\n            _this.endX2 = touch.pageX;\n            _this.endY2 = touch.pageY;\n          } else {\n            return;\n          }\n        }\n\n        touch = touches[0];\n      }\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && options.transition && hasClass(image, CLASS_TRANSITION)) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n\n        _this.endX = touch ? touch.pageX : e.pageX;\n        _this.endY = touch ? touch.pageY : e.pageY;\n\n        _this.change(e);\n      }\n    },\n\n    mouseup: function (event) {\n      var _this = this;\n      var e = getEvent(event);\n      var action = _this.action;\n\n      if (action) {\n        preventDefault(e);\n\n        if (action === 'move' && _this.options.transition) {\n          addClass(_this.image, CLASS_TRANSITION);\n        }\n\n        _this.action = false;\n      }\n    },\n\n    // Show the viewer (only available in modal mode)\n    show: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer;\n\n      if (options.inline || _this.transitioning) {\n        return _this;\n      }\n\n      if (!_this.isBuilt) {\n        _this.build();\n      }\n\n      viewer = _this.viewer;\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, true);\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false) {\n        return _this;\n      }\n\n      _this.open();\n      removeClass(viewer, CLASS_HIDE);\n\n      addListener(element, EVENT_SHOWN, function () {\n        _this.view(_this.target ? inArray(_this.target, toArray(_this.images)) : _this.index);\n        _this.target = false;\n      }, true);\n\n      if (options.transition) {\n        _this.transitioning = true;\n        addClass(viewer, CLASS_TRANSITION);\n        forceReflow(viewer);\n        addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.shown, _this), true);\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        _this.shown();\n      }\n\n      return _this;\n    },\n\n    // Hide the viewer (only available in modal mode)\n    hide: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n      var viewer = _this.viewer;\n\n      if (options.inline || _this.transitioning || !_this.isShown) {\n        return _this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, true);\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return _this;\n      }\n\n      if (_this.isViewed && options.transition) {\n        _this.transitioning = true;\n        addListener(_this.image, EVENT_TRANSITIONEND, function () {\n          addListener(viewer, EVENT_TRANSITIONEND, proxy(_this.hidden, _this), true);\n          removeClass(viewer, CLASS_IN);\n        }, true);\n        _this.zoomTo(0, false, false, true);\n      } else {\n        removeClass(viewer, CLASS_IN);\n        _this.hidden();\n      }\n\n      return _this;\n    },\n\n    /**\n     * View one of the images with image's index\n     *\n     * @param {Number} index\n     */\n    view: function (index) {\n      var _this = this;\n      var element = _this.element;\n      var title = _this.title;\n      var canvas = _this.canvas;\n      var image;\n      var item;\n      var img;\n      var url;\n      var alt;\n\n      index = Number(index) || 0;\n\n      if (!_this.isShown || _this.isPlayed || index < 0 || index >= _this.length ||\n        _this.isViewed && index === _this.index) {\n        return _this;\n      }\n\n      item = _this.items[index];\n      img = getByTag(item, 'img')[0];\n      url = getData(img, 'originalUrl');\n      alt = img.getAttribute('alt');\n\n      image = document.createElement('img');\n      image.src = url;\n      image.alt = alt;\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: _this.images[index],\n        index: index,\n        image: image\n      }) === false) {\n        return _this;\n      }\n\n      _this.image = image;\n\n      if (_this.isViewed) {\n        removeClass(_this.items[_this.index], CLASS_ACTIVE);\n      }\n\n      addClass(item, CLASS_ACTIVE);\n\n      _this.isViewed = false;\n      _this.index = index;\n      _this.imageData = null;\n\n      addClass(image, CLASS_INVISIBLE);\n      empty(canvas);\n      appendChild(canvas, image);\n\n      // Center current item\n      _this.renderList();\n\n      // Clear title\n      empty(title);\n\n      // Generate title after viewed\n      addListener(element, EVENT_VIEWED, function () {\n        var imageData = _this.imageData;\n        var width = imageData.naturalWidth;\n        var height = imageData.naturalHeight;\n\n        setText(title, alt + ' (' + width + ' × ' + height + ')');\n      }, true);\n\n      if (image.complete) {\n        _this.load();\n      } else {\n        addListener(image, EVENT_LOAD, proxy(_this.load, _this), true);\n\n        if (_this.timeout) {\n          clearTimeout(_this.timeout);\n        }\n\n        // Make the image visible if it fails to load within 1s\n        _this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this.timeout = false;\n        }, 1000);\n      }\n\n      return _this;\n    },\n\n    // View the previous image\n    prev: function () {\n      var _this = this;\n\n      _this.view(max(_this.index - 1, 0));\n\n      return _this;\n    },\n\n    // View the next image\n    next: function () {\n      var _this = this;\n\n      _this.view(min(_this.index + 1, _this.length - 1));\n\n      return _this;\n    },\n\n    /**\n     * Move the image with relative offsets\n     *\n     * @param {Number} offsetX\n     * @param {Number} offsetY (optional)\n     */\n    move: function (offsetX, offsetY) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      _this.moveTo(\n        isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n        isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY)\n      );\n\n      return _this;\n    },\n\n    /**\n     * Move the image to an absolute point\n     *\n     * @param {Number} x\n     * @param {Number} y (optional)\n     */\n    moveTo: function (x, y) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"y\" is not present, its default value is \"x\"\n      if (isUndefined(y)) {\n        y = x;\n      }\n\n      x = Number(x);\n      y = Number(y);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.movable) {\n        if (isNumber(x)) {\n          imageData.left = x;\n          changed = true;\n        }\n\n        if (isNumber(y)) {\n          imageData.top = y;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     */\n    zoom: function (ratio, hasTooltip, _originalEvent) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio =  1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      _this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n      return _this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio\n     *\n     * @param {Number} ratio\n     * @param {Boolean} hasTooltip (optional)\n     * @param {Event} _originalEvent (private)\n     * @param {Boolean} _zoomable (private)\n     */\n    zoomTo: function (ratio, hasTooltip, _originalEvent, _zoomable) {\n      var _this = this;\n      var options = _this.options;\n      var minZoomRatio = 0.01;\n      var maxZoomRatio = 100;\n      var imageData = _this.imageData;\n      var newWidth;\n      var newHeight;\n      var offset;\n      var center;\n\n      ratio = max(0, ratio);\n\n      if (isNumber(ratio) && _this.isViewed && !_this.isPlayed && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          minZoomRatio = max(minZoomRatio, options.minZoomRatio);\n          maxZoomRatio = min(maxZoomRatio, options.maxZoomRatio);\n          ratio = min(max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        newWidth = imageData.naturalWidth * ratio;\n        newHeight = imageData.naturalHeight * ratio;\n\n        if (_originalEvent) {\n          offset = getOffset(_this.viewer);\n          center = _originalEvent.touches ? getTouchesCenter(_originalEvent.touches) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          imageData.left -= (newWidth - imageData.width) * (\n            ((center.pageX - offset.left) - imageData.left) / imageData.width\n          );\n          imageData.top -= (newHeight - imageData.height) * (\n            ((center.pageY - offset.top) - imageData.top) / imageData.height\n          );\n        } else {\n\n          // Zoom from the center of the image\n          imageData.left -= (newWidth - imageData.width) / 2;\n          imageData.top -= (newHeight - imageData.height) / 2;\n        }\n\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        _this.renderImage();\n\n        if (hasTooltip) {\n          _this.tooltip();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image with a relative degree\n     *\n     * @param {Number} degree\n     */\n    rotate: function (degree) {\n      var _this = this;\n\n      _this.rotateTo((_this.imageData.rotate || 0) + Number(degree));\n\n      return _this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#rotate()\n     *\n     * @param {Number} degree\n     */\n    rotateTo: function (degree) {\n      var _this = this;\n      var imageData = _this.imageData;\n\n      degree = Number(degree);\n\n      if (isNumber(degree) && _this.isViewed && !_this.isPlayed && _this.options.rotatable) {\n        imageData.rotate = degree;\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the image\n     * https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function#scale()\n     *\n     * @param {Number} scaleX\n     * @param {Number} scaleY (optional)\n     */\n    scale: function (scaleX, scaleY) {\n      var _this = this;\n      var imageData = _this.imageData;\n      var changed = false;\n\n      // If \"scaleY\" is not present, its default value is \"scaleX\"\n      if (isUndefined(scaleY)) {\n        scaleY = scaleX;\n      }\n\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (_this.isViewed && !_this.isPlayed && _this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          changed = true;\n        }\n\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          changed = true;\n        }\n\n        if (changed) {\n          _this.renderImage();\n        }\n      }\n\n      return _this;\n    },\n\n    /**\n     * Scale the abscissa of the image\n     *\n     * @param {Number} scaleX\n     */\n    scaleX: function (scaleX) {\n      var _this = this;\n\n      _this.scale(scaleX, _this.imageData.scaleY);\n\n      return _this;\n    },\n\n    /**\n     * Scale the ordinate of the image\n     *\n     * @param {Number} scaleY\n     */\n    scaleY: function (scaleY) {\n      var _this = this;\n\n      _this.scale(_this.imageData.scaleX, scaleY);\n\n      return _this;\n    },\n\n    // Play the images\n    play: function () {\n      var _this = this;\n      var options = _this.options;\n      var player = _this.player;\n      var load = proxy(_this.loadImage, _this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      var playing;\n\n      if (!_this.isShown || _this.isPlayed) {\n        return _this;\n      }\n\n      if (options.fullscreen) {\n        _this.requestFullscreen();\n      }\n\n      _this.isPlayed = true;\n      addClass(player, CLASS_SHOW);\n\n      each(_this.items, function (item, i) {\n        var img = getByTag(item, 'img')[0];\n        var image = document.createElement('img');\n\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        total++;\n\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, load, true);\n        appendChild(player, image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        playing = function () {\n          _this.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index++;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n\n            playing();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          playing();\n        }\n      }\n\n      return _this;\n    },\n\n    // Stop play\n    stop: function () {\n      var _this = this;\n      var player = _this.player;\n\n      if (!_this.isPlayed) {\n        return _this;\n      }\n\n      if (_this.options.fullscreen) {\n        _this.exitFullscreen();\n      }\n\n      _this.isPlayed = false;\n      clearTimeout(_this.playing);\n      removeClass(player, CLASS_SHOW);\n      empty(player);\n\n      return _this;\n    },\n\n    // Enter modal mode (only available in inline mode)\n    full: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isShown || _this.isPlayed || _this.isFulled || !options.inline) {\n        return _this;\n      }\n\n      _this.isFulled = true;\n      _this.open();\n      addClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('style', '');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      _this.initContainer();\n      _this.viewerData = extend({}, _this.containerData);\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Exit modal mode (only available in inline mode)\n    exit: function () {\n      var _this = this;\n      var options = _this.options;\n      var viewer = _this.viewer;\n      var image = _this.image;\n      var list = _this.list;\n\n      if (!_this.isFulled) {\n        return _this;\n      }\n\n      _this.isFulled = false;\n      _this.close();\n      removeClass(_this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(image, CLASS_TRANSITION);\n        removeClass(list, CLASS_TRANSITION);\n      }\n\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n\n      _this.viewerData = extend({}, _this.parentData);\n      _this.renderViewer();\n      _this.renderList();\n      _this.initImage(function () {\n        _this.renderImage(function () {\n          if (options.transition) {\n            setTimeout(function () {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n\n      return _this;\n    },\n\n    // Show the current ratio of the image with percentage\n    tooltip: function () {\n      var _this = this;\n      var options = _this.options;\n      var tooltipBox = _this.tooltipBox;\n      var imageData = _this.imageData;\n\n      if (!_this.isViewed || _this.isPlayed || !options.tooltip) {\n        return _this;\n      }\n\n      setText(tooltipBox, round(imageData.ratio * 100) + '%');\n\n      if (!_this.tooltiping) {\n        if (options.transition) {\n          if (_this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITIONEND);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          forceReflow(tooltipBox);\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n        }\n      } else {\n        clearTimeout(_this.tooltiping);\n      }\n\n      _this.tooltiping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITIONEND, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            _this.fading = false;\n          }, true);\n\n          removeClass(tooltipBox, CLASS_IN);\n          _this.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n        }\n\n        _this.tooltiping = false;\n      }, 1000);\n\n      return _this;\n    },\n\n    // Toggle the image size between its natural size and initial size\n    toggle: function () {\n      var _this = this;\n\n      if (_this.imageData.ratio === 1) {\n        _this.zoomTo(_this.initialImageData.ratio, true);\n      } else {\n        _this.zoomTo(1, true);\n      }\n\n      return _this;\n    },\n\n    // Reset the image to its initial state\n    reset: function () {\n      var _this = this;\n\n      if (_this.isViewed && !_this.isPlayed) {\n        _this.imageData = extend({}, _this.initialImageData);\n        _this.renderImage();\n      }\n\n      return _this;\n    },\n\n    // Update viewer when images changed\n    update: function () {\n      var _this = this;\n      var indexes = [];\n      var index;\n\n      // Destroy viewer if the target image was deleted\n      if (_this.isImg && !_this.element.parentNode) {\n        return _this.destroy();\n      }\n\n      _this.length = _this.images.length;\n\n      if (_this.isBuilt) {\n        each(_this.items, function (item, i) {\n          var img = getByTag(item, 'img')[0];\n          var image = _this.images[i];\n\n          if (image) {\n            if (image.src !== img.src) {\n              indexes.push(i);\n            }\n          } else {\n            indexes.push(i);\n          }\n        });\n\n        setStyle(_this.list, {\n          width: 'auto'\n        });\n\n        _this.initList();\n\n        if (_this.isShown) {\n          if (_this.length) {\n            if (_this.isViewed) {\n              index = inArray(_this.index, indexes);\n\n              if (index >= 0) {\n                _this.isViewed = false;\n                _this.view(max(_this.index - (index + 1), 0));\n              } else {\n                addClass(_this.items[_this.index], CLASS_ACTIVE);\n              }\n            }\n          } else {\n            _this.image = null;\n            _this.isViewed = false;\n            _this.index = 0;\n            _this.imageData = null;\n            empty(_this.canvas);\n            empty(_this.title);\n          }\n        }\n      }\n\n      return _this;\n    },\n\n    // Destroy the viewer\n    destroy: function () {\n      var _this = this;\n      var element = _this.element;\n\n      if (_this.options.inline) {\n        _this.unbind();\n      } else {\n        if (_this.isShown) {\n          _this.unbind();\n        }\n\n        removeListener(element, EVENT_CLICK, _this._start);\n      }\n\n      _this.unbuild();\n      removeData(element, NAMESPACE);\n\n      return _this;\n    },\n\n    open: function () {\n      var body = this.body;\n\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.scrollbarWidth + 'px';\n    },\n\n    close: function () {\n      var body = this.body;\n\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = 0;\n    },\n\n    shown: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isFulled = true;\n      _this.isShown = true;\n      _this.isVisible = true;\n      _this.render();\n      _this.bind();\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, true);\n      }\n\n      dispatchEvent(element, EVENT_SHOWN);\n    },\n\n    hidden: function () {\n      var _this = this;\n      var options = _this.options;\n      var element = _this.element;\n\n      _this.transitioning = false;\n      _this.isViewed = false;\n      _this.isFulled = false;\n      _this.isShown = false;\n      _this.isVisible = false;\n      _this.unbind();\n      _this.close();\n      addClass(_this.viewer, CLASS_HIDE);\n      _this.resetList();\n      _this.resetImage();\n\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, true);\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN);\n    },\n\n    requestFullscreen: function () {\n      var _this = this;\n      var documentElement = document.documentElement;\n\n      if (_this.isFulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement && !document.msFullscreenElement) {\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        }\n      }\n    },\n\n    exitFullscreen: function () {\n      var _this = this;\n\n      if (_this.isFulled) {\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        }\n      }\n    },\n\n    change: function (originalEvent) {\n      var _this = this;\n      var offsetX = _this.endX - _this.startX;\n      var offsetY = _this.endY - _this.startY;\n\n      switch (_this.action) {\n\n        // Move the current image\n        case 'move':\n          _this.move(offsetX, offsetY);\n          break;\n\n        // Zoom the current image\n        case 'zoom':\n          _this.zoom(function (x1, y1, x2, y2) {\n            var z1 = sqrt(x1 * x1 + y1 * y1);\n            var z2 = sqrt(x2 * x2 + y2 * y2);\n\n            return (z2 - z1) / z1;\n          }(\n            abs(_this.startX - _this.startX2),\n            abs(_this.startY - _this.startY2),\n            abs(_this.endX - _this.endX2),\n            abs(_this.endY - _this.endY2)\n          ), false, originalEvent);\n\n          _this.startX2 = _this.endX2;\n          _this.startY2 = _this.endY2;\n          break;\n\n        case 'switch':\n          _this.action = 'switched';\n\n          if (abs(offsetX) > abs(offsetY)) {\n            if (offsetX > 1) {\n              _this.prev();\n            } else if (offsetX < -1) {\n              _this.next();\n            }\n          }\n\n          break;\n\n        // No default\n      }\n\n      // Override\n      _this.startX = _this.endX;\n      _this.startY = _this.endY;\n    },\n\n    isSwitchable: function () {\n      var _this = this;\n      var imageData = _this.imageData;\n      var viewerData = _this.viewerData;\n\n      return imageData.left >= 0 && imageData.top >= 0 &&\n        imageData.width <= viewerData.width &&\n        imageData.height <= viewerData.height;\n    }\n  };\n\n  Viewer.DEFAULTS = {\n\n    // Enable inline mode\n    inline: false,\n\n    // Show the button on the top-right of the viewer\n    button: true,\n\n    // Show the navbar\n    navbar: true,\n\n    // Show the title\n    title: true,\n\n    // Show the toolbar\n    toolbar: true,\n\n    // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n    tooltip: true,\n\n    // Enable to move the image\n    movable: true,\n\n    // Enable to zoom the image\n    zoomable: true,\n\n    // Enable to rotate the image\n    rotatable: true,\n\n    // Enable to scale the image\n    scalable: true,\n\n    // Enable CSS3 Transition for some special elements\n    transition: true,\n\n    // Enable to request fullscreen when play\n    fullscreen: true,\n\n    // Enable keyboard support\n    keyboard: true,\n\n    // Define interval of each image when playing\n    interval: 5000,\n\n    // Min width of the viewer in inline mode\n    minWidth: 200,\n\n    // Min height of the viewer in inline mode\n    minHeight: 100,\n\n    // Define the ratio when zoom the image by wheeling mouse\n    zoomRatio: 0.1,\n\n    // Define the min ratio of the image when zoom out\n    minZoomRatio: 0.01,\n\n    // Define the max ratio of the image when zoom in\n    maxZoomRatio: 100,\n\n    // Define the CSS `z-index` value of viewer in modal mode.\n    zIndex: 2015,\n\n    // Define the CSS `z-index` value of viewer in inline mode.\n    zIndexInline: 0,\n\n    // Define where to get the original image URL for viewing\n    // Type: String (an image attribute) or Function (should return an image URL)\n    url: 'src',\n\n    // Event shortcuts\n    build: null,\n    built: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null\n  };\n\n  Viewer.TEMPLATE = (\n    '<div class=\"viewer-container\">' +\n      '<div class=\"viewer-canvas\"></div>' +\n      '<div class=\"viewer-footer\">' +\n        '<div class=\"viewer-title\"></div>' +\n        '<ul class=\"viewer-toolbar\">' +\n          '<li class=\"viewer-zoom-in\" data-action=\"zoom-in\"></li>' +\n          '<li class=\"viewer-zoom-out\" data-action=\"zoom-out\"></li>' +\n          '<li class=\"viewer-one-to-one\" data-action=\"one-to-one\"></li>' +\n          '<li class=\"viewer-reset\" data-action=\"reset\"></li>' +\n          '<li class=\"viewer-prev\" data-action=\"prev\"></li>' +\n          '<li class=\"viewer-play\" data-action=\"play\"></li>' +\n          '<li class=\"viewer-next\" data-action=\"next\"></li>' +\n          '<li class=\"viewer-rotate-left\" data-action=\"rotate-left\"></li>' +\n          '<li class=\"viewer-rotate-right\" data-action=\"rotate-right\"></li>' +\n          '<li class=\"viewer-flip-horizontal\" data-action=\"flip-horizontal\"></li>' +\n          '<li class=\"viewer-flip-vertical\" data-action=\"flip-vertical\"></li>' +\n        '</ul>' +\n        '<div class=\"viewer-navbar\">' +\n          '<ul class=\"viewer-list\"></ul>' +\n        '</div>' +\n      '</div>' +\n      '<div class=\"viewer-tooltip\"></div>' +\n      '<div class=\"viewer-button\" data-action=\"mix\"></div>' +\n      '<div class=\"viewer-player\"></div>' +\n    '</div>'\n  );\n\n  var _Viewer = window.Viewer;\n\n  Viewer.noConflict = function () {\n    window.Viewer = _Viewer;\n    return Viewer;\n  };\n\n  Viewer.setDefaults = function (options) {\n    extend(Viewer.DEFAULTS, options);\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define('viewer', [], function () {\n      return Viewer;\n    });\n  }\n\n  if (!noGlobal) {\n    window.Viewer = Viewer;\n  }\n\n  return Viewer;\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/viewerjs/dist/viewer.js\n// module id = 24\n// module chunks = 3","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\n\nexports.define = defineAction;\nexports.enable = enable;\nexports.disable = disable;\nexports.enableGroup = enableGroup;\nexports.disableGroup = disableGroup;\nexports.activate = activate;\nexports.bind = bind;\n\nvar actions = {};\n\nvar actionGroups = {};\n\nvar keyMap = {};\n\n$(window).keydown(function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    console.log('pressed ' + key);\n    if (keyMap.hasOwnProperty(key)) {\n        activate(keyMap[key]);\n        return false;\n    }\n});\n\nfunction bind(key, action)\n{\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    keyMap[key] = action;\n}\n\nfunction defineAction(name, callback, groups)\n{\n    actions[name] = callback;\n    $('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        callback();\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!actionGroups.hasOwnProperty(group)) {\n                actionGroups[group] = [];\n            }\n            actionGroups[group].push(name);\n        });\n    }\n}\n\nfunction activate(name)\n{\n    actions[name]();\n}\n\nfunction enableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            enable(name);\n        });\n    }\n}\n\nfunction disableGroup(group)\n{\n    if (actionGroups.hasOwnProperty(group)) {\n        actionGroups[group].forEach(function (name) {\n            disable(name);\n        });\n    }\n}\n\nfunction enable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', false);\n    } else {\n        name.forEach(enable);\n    }\n}\n\nfunction disable(name)\n{\n    if (typeof name === 'string') {\n        $('[data-action=\"' + name + '\"]').attr('disabled', true);\n    } else {\n        name.forEach(disable);\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/actions.js\n// module id = 3\n// module chunks = 0 1 2 3 4 5","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 4\n// module chunks = 0 1 3 4","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar actions = require('./common/actions');\nvar paths = require('./common/paths');\n\nrequire('viewerjs/dist/viewer.min.css');\n\nvar Viewer = require('viewerjs');\n\nvar PATH = $('body').data('path').replace(/\\/$/, '');\n\nvar first = true;\n\nvar viewer = new Viewer($('#viewer')[0], {\n    inline: true,\n    viewed: function (e) {\n        if (first) {\n            viewer.view($('#viewer').children('.active').index());\n            first = false;\n            e.stopPropagation();\n            return false;\n        }\n        $('#viewer img.active').removeClass('active');\n        var $image = $(e.detail.originalImage);\n        $image.addClass('active');\n        $('#viewer-name').text($image.attr('alt'));\n    }\n});\n\nactions.define('close', function () {\n    location.href = PATH + '/files' + $('#viewer img.active').data('path');\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./viewer.js\n// module id = 56\n// module chunks = 3"],"sourceRoot":""}
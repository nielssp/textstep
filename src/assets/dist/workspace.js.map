{"version":3,"sources":["webpack:///dist/workspace.js","webpack:///./common/paths.js?9de7***","webpack:///./common/ui.js?8332**","webpack:///./workspace.js","webpack:////home/www/blogstep/~/js-cookie/src/js.cookie.js?cd36**"],"names":["webpackJsonp","2","module","exports","__webpack_require__","dirName","path","replace","fileName","convert","cwd","trim","startsWith","names","split","stack","i","length","pop","push","join","3","$","Cookies","ajaxSetup","headers","X-Csrf-Token","get","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","data","find","prop","show","submit","this","ajax","url","method","username","val","password","remember","is","success","overflow","whiteSpace","hide","off","error","xhr","select","global","handleError","event","settings","thrownError","newToken","focus","responseJSON","alert","message","responseText","console","log","33","Menu","app","title","frame","header","itemList","text","App","name","state","deferred","args","dockFrame","actions","actionGroups","keyMap","menus","toolFrames","onInit","onSuspend","onResume","onOpen","onReopen","onFocus","onKeydown","onUnfocus","onClose","onResize","isUnsaved","load","dfr","Deferred","apps","hasOwnProperty","resolve","then","reject","BLOGSTEP","$doc","html","$styles","$scripts","each","$dockFrame","first","attr","PATH","appendTo","click","restore","append","getScript","fail","promise","post","ui","paths","window","tasks","running","skipHistory","previousTitle","prototype","addItem","action","button","activate","item","key","addMenu","menu","keydown","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","toUpperCase","preventDefault","bindKey","parts","toLowerCase","defineAction","groups","stopPropagation","forEach","group","apply","enableGroup","enableAction","disableGroup","disableAction","setTitle","document","setArgs","isEmptyObject","param","history","pushState","init","close","prepend","open","addClass","kill","removeClass","resume","detach","reopen","suspend","index","indexOf","splice","getTasks","Object","values","run","match","type","getToken","addToken","setRequestHeader","responseType","dataType","jqXhr","textStatus","errorThrown","Array","slice","call","arguments","rejectWith","ready","location","reload","on","toggleClass","hasClass","parent","selector","resize","onpopstate","onbeforeunload","4","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","factory","registeredInModuleLoader","undefined","OldCookies","api","noConflict","extend","result","attributes","converter","value","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","write","encodeURIComponent","String","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","rdecode","json","charAt","read","parse","set","getJSON","remove","withConverter"],"mappings":"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","file":"dist/workspace.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path) {\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path) {\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd) {\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width()).animate({ marginLeft: '+=' + amount }, 50).animate({ marginLeft: '-=' + dbl }, 50).animate({ marginLeft: '+=' + dbl }, 50).animate({ marginLeft: '-=' + amount }, 50).queue(function () {\n        $(el).css('width', '').css('margin-left', '').finish();\n    });\n};\n\nexports.onLongPress = function (el, callback) {\n    var touching = false;\n\n    var start = function start(e) {\n        touching = true;\n    };\n\n    var end = function end(e) {\n        touching = false;\n    };\n\n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function (el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function success() {\n                $('#login-frame').css({ overflow: 'hidden', whiteSpace: 'no-wrap' }).animate({ width: 0 }, function () {\n                    $(this).hide().css({ overflow: '', whiteSpace: '', width: '' });\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function error(xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n        if ($('#login-username').val() === '') {\n            $('#login-username').focus();\n        } else {\n            $('#login-password').focus();\n        }\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n/***/ }),\n\n/***/ 33:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\nvar ui = __webpack_require__(3);\nvar paths = __webpack_require__(2);\n\nwindow.BLOGSTEP = {};\n\nwindow.BLOGSTEP.ui = ui;\nwindow.BLOGSTEP.paths = paths;\n\nvar apps = {};\n\nvar tasks = [];\nvar running = null;\nvar skipHistory = false;\nvar previousTitle = null;\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n        button.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n        app.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    for (var key in this.app.keyMap) {\n        if (this.app.keyMap.hasOwnProperty(key) && this.app.keyMap[key] === action) {\n            button.append('<span class=\"shortcut\">' + key + '</span>');\n        }\n    }\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.title = '';\n    this.state = 'loading';\n    this.deferred = null;\n    this.args = null;\n    this.frame = null;\n    this.dockFrame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.toolFrames = {};\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onReopen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n    this.isUnsaved = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    if (this.onKeydown !== null) {\n        if (!this.onKeydown(e)) {\n            return false;\n        }\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'Ctrl+';\n    }\n    if (e.altKey) {\n        key += 'Alt+';\n    }\n    if (e.shiftKey) {\n        key += 'Shift+';\n    }\n    if (e.metaKey) {\n        key += 'Meta+';\n    }\n    key += e.key.toUpperCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n        e.preventDefault();\n        this.activate(this.keyMap[key]);\n        return false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = { ctrlKey: '', altKey: '', shiftKey: '' };\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'Ctrl+';\n                break;\n            case 'a':\n                e.altKey = 'Alt+';\n                break;\n            case 's':\n                e.shiftKey = 'Shift+';\n                break;\n            case 'm':\n                e.metaKey = 'Meta+';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key.toUpperCase();\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    var app = this;\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        app.activate(name);\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!this.actionGroups.hasOwnProperty(group)) {\n                this.actionGroups[group] = [];\n            }\n            this.actionGroups[group].push(name);\n        }, this);\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n        this.actions[name].apply(this);\n    } else {\n        name.apply(this);\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        });\n    } else {\n        name.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        });\n    } else {\n        name.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.setTitle = function (title) {\n    this.title = title;\n    this.frame.find('.frame-header-title').text(this.title);\n    this.dockFrame.attr('title', this.title);\n    document.title = this.title;\n};\n\nApp.prototype.setArgs = function (args) {\n    this.args = args;\n    if (!skipHistory) {\n        var path = BLOGSTEP.PATH + '/app/' + this.name;\n        if (!$.isEmptyObject(args)) {\n            path += '?' + $.param(args).replace(/%2F/gi, '/');\n        }\n        if (previousTitle !== null) {\n            document.title = previousTitle;\n        }\n        history.pushState({ app: this.name, args: args }, previousTitle, path);\n        document.title = this.title;\n        previousTitle = this.title;\n    }\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n        console.error('init: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'initializing';\n    this.defineAction('close', this.close);\n    this.bindKey('c-s-c', 'close');\n    if (this.onInit !== null) {\n        this.onInit(this);\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            $('#menu').prepend(this.toolFrames[name]);\n        }\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n        $('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.open = function (args) {\n    if (this.state !== 'initialized') {\n        console.error(this.name + ': open: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'opening';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onOpen !== null) {\n        try {\n            this.onOpen(this, args || {});\n        } catch (e) {\n            console.error(this.name + ': open: exception caught:', e);\n            alert('Could not open application: ' + this.name);\n            this.kill();\n            return;\n        }\n    }\n    if (this.dockFrame !== null) {\n        $('#dock').append(this.dockFrame);\n    }\n    this.setArgs(args);\n    this.state = 'running';\n};\n\nApp.prototype.kill = function () {\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        try {\n            this.onClose(this);\n        } catch (e) {}\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        } else {\n            running = null;\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.close = function () {\n    if (this.state !== 'running') {\n        console.error(this.name + ': close: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        var ok = this.onClose(this);\n        if (ok === false) {\n            this.state = 'running';\n            return false;\n        }\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        } else {\n            running = null;\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n    return true;\n};\n\nApp.prototype.reopen = function (args) {\n    if (this.state !== 'running') {\n        console.error(this.name + ': reopen: unexpected state:', this.state);\n        return;\n    }\n    if (this.onReopen !== null) {\n        try {\n            this.onReopen(this, args || {});\n        } catch (e) {\n            console.error(this.name + ': reopen: exception caught:', e);\n            alert('Could not open application: ' + this.name);\n            this.kill();\n            return;\n        }\n    } else {\n        this.state = 'closing';\n        if (this.onClose !== null) {\n            this.onClose(this);\n        }\n        this.state = 'initialized';\n        this.open(args);\n    }\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n        console.error(this.name + ': suspend: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n        this.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n        this.frame.removeClass('active').hide();\n        for (var i = 0; i < this.menus.length; i++) {\n            this.menus[i].frame.hide();\n        }\n        for (var name in this.toolFrames) {\n            if (this.toolFrames.hasOwnProperty(name)) {\n                this.toolFrames[name].hide();\n            }\n        }\n        this.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n        console.error(this.name + ': resume: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'resuming';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onResume !== null) {\n        this.onResume(this);\n    }\n    this.setArgs(this.args);\n    if (this.onResize !== null) {\n        this.onResize();\n    }\n    this.state = 'running';\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n    if (apps[name].deferred !== null) {\n        apps[name].deferred.resolve(apps[name]);\n        apps[name].deferred = null;\n    }\n};\n\nBLOGSTEP.restore = function (name) {\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'suspended') {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            var index = tasks.indexOf(apps[name]);\n            if (index >= 0) {\n                tasks.splice(index, 1);\n            }\n            apps[name].resume();\n            return true;\n        } else if (apps[name].state === 'running') {\n            return true;\n        }\n    }\n    return false;\n};\n\nBLOGSTEP.getTasks = function () {\n    return Object.values(apps);\n};\n\nBLOGSTEP.run = function (name, args) {\n    var dfr = $.Deferred();\n    args = args || {};\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'running') {\n            apps[name].reopen(args);\n        } else {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            if (apps[name].state === 'suspended') {\n                var index = tasks.indexOf(apps[name]);\n                if (index >= 0) {\n                    tasks.splice(index, 1);\n                }\n                apps[name].resume();\n                apps[name].reopen(args);\n            } else {\n                apps[name].open(args);\n            }\n        }\n        dfr.resolve(apps[name]);\n    } else {\n        if (running !== null) {\n            running.suspend();\n            tasks.push(running);\n            running = null;\n        }\n        load(name).done(function (app) {\n            running = app;\n            app.open(args);\n            dfr.resolve(app);\n        });\n    }\n    return dfr.promise();\n};\n\nBLOGSTEP.open = function (path) {\n    var fileName = paths.fileName(path);\n    if (fileName.match(/\\.md/i)) {\n        BLOGSTEP.run('editor', { path: path });\n    } else if (fileName.match(/\\.webm/i)) {\n        BLOGSTEP.run('player', { path: path });\n    } else if (fileName.match(/\\.(?:jpe?g|png|gif|ico)/i)) {\n        BLOGSTEP.run('viewer', { path: path });\n    } else if (fileName.match(/\\.(?:php|log|json|html|css|js|sass|scss)/i)) {\n        BLOGSTEP.run('code-editor', { path: path });\n    } else {\n        BLOGSTEP.get('list-files', { path: path }).done(function (data) {\n            if (data.type === 'directory') {\n                BLOGSTEP.run('files', { path: path });\n            } else {\n                BLOGSTEP.run('code-editor', { path: path });\n            }\n        });\n    }\n};\n\nBLOGSTEP.getToken = function () {\n    return Cookies.get('csrf_token');\n};\n\nBLOGSTEP.addToken = function (xhr) {\n    xhr.setRequestHeader('X-Csrf-Token', BLOGSTEP.getToken());\n};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n\n    var settings = {\n        url: url,\n        method: method,\n        data: data,\n        dataType: responseType,\n        headers: { 'X-Csrf-Token': BLOGSTEP.getToken() }\n    };\n\n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n        console.log(jqXhr, textStatus, errorThrown);\n        var newToken = BLOGSTEP.getToken();\n        if (settings.headers['X-Csrf-Token'] !== newToken) {\n            settings.headers['X-Csrf-Token'] = newToken;\n            if (xhr.status === 400) {\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n                return;\n            }\n        }\n        if (xhr.status === 401) {\n            $('#login-overlay').show();\n            if ($('#login-username').val() === '') {\n                $('#login-username').focus();\n            } else {\n                $('#login-password').focus();\n            }\n            handleLogin(function () {\n                $('#login-overlay').hide();\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n            });\n            return;\n        } else if (typeof xhr.responseJSON !== 'undefined') {\n            alert(xhr.responseJSON.message);\n        }\n        ui.shake($('main > .frame.active'));\n\n        var args = Array.prototype.slice.call(arguments);\n        dfr.rejectWith(xhr, args);\n    });\n\n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    var dfr = $.Deferred();\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].deferred === null) {\n            dfr.resolve(apps[name]);\n        } else {\n            apps[name].deferred.then(dfr.resolve, dfr.reject);\n        }\n    } else {\n        apps[name] = new App(name);\n        apps[name].deferred = dfr;\n        BLOGSTEP.get('load', { name: name }, 'html').done(function (data) {\n            var $doc = $('<div></div>');\n            $doc.html(data);\n            var $styles = $doc.children('link[rel=\"stylesheet\"]');\n            var $scripts = $doc.children('script[src]');\n            apps[name].frame = $doc.children('.frame');\n            apps[name].title = apps[name].frame.find('.frame-header-title').text();\n            apps[name].state = 'loaded';\n            $doc.children('.tool-frame').each(function () {\n                apps[name].toolFrames[$(this).data('name')] = $(this);\n            });\n            var $dockFrame = $doc.children('.dock-frame').first();\n            if ($dockFrame.length === 0) {\n                $dockFrame = $('<div class=\"dock-frame\">');\n                $('<img>').attr('src', BLOGSTEP.PATH + '/assets/img/icons/32/app.png').attr('alt', name).appendTo($dockFrame);\n                $('<label>').text(name).appendTo($dockFrame);\n            }\n            $dockFrame.click(function () {\n                BLOGSTEP.restore(name);\n            });\n            apps[name].dockFrame = $dockFrame;\n            $('head').append($styles);\n            $('main').append(apps[name].frame);\n            $scripts.each(function () {\n                $.getScript($(this).attr('src')).fail(dfr.reject);\n            });\n        }).fail(dfr.reject);\n    }\n    return dfr.promise();\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        var data = {\n            username: $('#login-username').val(),\n            password: $('#login-password').val(),\n            remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n        };\n        BLOGSTEP.post('login', data).done(function () {\n            $('#login').find('input').prop('disabled', false);\n            $('#workspace-menu .username').text(data.username);\n            $('#login-frame').css({ overflow: 'hidden', whiteSpace: 'no-wrap' }).animate({ width: 0 }, function () {\n                $(this).hide().css({ overflow: '', whiteSpace: '', width: '' });\n                $('#login').off('submit');\n                $('#login-password').val('');\n                done();\n            });\n        }).fail(function () {\n            $('#login').find('input').prop('disabled', false);\n            ui.shake($('#login-frame'));\n            $('#login-username').select();\n            $('#login-password').val('');\n        });\n        return false;\n    });\n}\n;\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': BLOGSTEP.getToken() }\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n        $('#workspace-menu').show();\n        $('#workspace-menu .username').text(data.username);\n\n        $('#workspace-menu [data-action=\"file-system\"]').click(function () {\n            if (!BLOGSTEP.restore('files')) {\n                BLOGSTEP.run('files');\n            }\n        });\n        $('#workspace-menu [data-action=\"builder\"]').click(function () {\n            BLOGSTEP.run('builder');\n        });\n        $('#workspace-menu [data-action=\"terminal\"]').click(function () {\n            BLOGSTEP.run('terminal');\n        });\n        $('#workspace-menu [data-action=\"control-panel\"]').click(function () {\n            BLOGSTEP.run('control-panel');\n        });\n        $('#workspace-menu [data-action=\"switch-user\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                $('#login-overlay').show();\n                $('#login-frame').show();\n                $('#login-username').select().focus();\n                handleLogin(function () {\n                    $('#login-overlay').hide();\n                });\n            });\n        });\n        $('#workspace-menu [data-action=\"logout\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                location.reload();\n            });\n        });\n\n        $('#login-username').val(data.username);\n        $('#login-overlay').addClass('login-overlay-dark');\n\n        BLOGSTEP.run('files', { path: '/' }).done(function () {\n            var run = $('body').data('run');\n            if (run !== '') {\n                var args = $('body').data('args');\n                console.log(args);\n                BLOGSTEP.run(run, args);\n            }\n        });\n    });\n});\n\n$(document).on('click', '[data-action=\"toggle-menu\"]', function (e) {\n    $('body').toggleClass('show-menu');\n    return false;\n});\n\n$('body').click(function (e) {\n    if ($('body').hasClass('show-menu')) {\n        $('body').removeClass('show-menu');\n    }\n});\n\n$(document).on('click', '[data-toggle] > *', function (e) {\n    if ($(this).is($(this).parent().data('toggle'))) {\n        $(this).toggleClass('active');\n    }\n});\n\n$(document).on('click', '[data-choice] > *', function (e) {\n    var selector = $(this).parent().data('choice');\n    if ($(this).is(selector)) {\n        $(this).parent().children(selector).removeClass('active');\n        $(this).addClass('active');\n    }\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            if (apps[name].onResize !== null) {\n                apps[name].onResize();\n            }\n        }\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            apps[name].keydown(e);\n        }\n    }\n});\n\nwindow.onpopstate = function (event) {\n    if (event.state !== null) {\n        skipHistory = true;\n        BLOGSTEP.run(event.state.app, event.state.args);\n        skipHistory = false;\n    }\n};\n\nwindow.onbeforeunload = function (event) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && (apps[name].state === 'running' || apps[name].state === 'suspended')) {\n            if (apps[name].isUnsaved !== null) {\n                if (apps[name].isUnsaved()) {\n                    if (apps[name].state === 'suspended') {\n                        BLOGSTEP.restore(name);\n                    }\n                    return 'Unsaved data in: ' + apps[name].title;\n                }\n            }\n        }\n    }\n};\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ })\n\n},[33]);\n\n\n// WEBPACK FOOTER //\n// dist/workspace.js","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n// WEBPACK FOOTER //\n// ./common/paths.js","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./common/ui.js","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\nvar ui = require('./common/ui');\nvar paths = require('./common/paths');\n\nwindow.BLOGSTEP = {};\n\nwindow.BLOGSTEP.ui = ui;\nwindow.BLOGSTEP.paths = paths;\n\nvar apps = {};\n\nvar tasks = [];\nvar running = null;\nvar skipHistory = false;\nvar previousTitle = null;\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n        button.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n        app.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    for (var key in this.app.keyMap) {\n        if (this.app.keyMap.hasOwnProperty(key) && this.app.keyMap[key] === action) {\n            button.append('<span class=\"shortcut\">' + key + '</span>');\n        }\n    }\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.title = '';\n    this.state = 'loading';\n    this.deferred = null;\n    this.args = null;\n    this.frame = null;\n    this.dockFrame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.toolFrames = {};\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onReopen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n    this.isUnsaved = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    if (this.onKeydown !== null) {\n        if (!this.onKeydown(e)) {\n            return false;\n        }\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'Ctrl+';\n    }\n    if (e.altKey) {\n        key += 'Alt+';\n    }\n    if (e.shiftKey) {\n        key += 'Shift+';\n    }\n    if (e.metaKey) {\n        key += 'Meta+';\n    }\n    key += e.key.toUpperCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n        e.preventDefault();\n        this.activate(this.keyMap[key]);\n        return false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = {ctrlKey: '', altKey: '', shiftKey: ''};\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'Ctrl+';\n                break;\n            case 'a':\n                e.altKey = 'Alt+';\n                break;\n            case 's':\n                e.shiftKey = 'Shift+';\n                break;\n            case 'm':\n                e.metaKey = 'Meta+';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key.toUpperCase();\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    var app = this;\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        app.activate(name);\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!this.actionGroups.hasOwnProperty(group)) {\n                this.actionGroups[group] = [];\n            }\n            this.actionGroups[group].push(name);\n        }, this);\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n        this.actions[name].apply(this);\n    } else {\n        name.apply(this);\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        });\n    } else {\n        name.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        });\n    } else {\n        name.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.setTitle = function (title) {\n    this.title = title;\n    this.frame.find('.frame-header-title').text(this.title);\n    this.dockFrame.attr('title', this.title);\n    document.title = this.title;\n};\n\nApp.prototype.setArgs = function (args) {\n    this.args = args;\n    if (!skipHistory) {\n        var path = BLOGSTEP.PATH + '/app/' + this.name;\n        if (!$.isEmptyObject(args)) {\n            path += '?' + $.param(args).replace(/%2F/gi, '/');\n        }\n        if (previousTitle !== null) {\n            document.title = previousTitle;\n        }\n        history.pushState({app: this.name, args: args}, previousTitle, path);\n        document.title = this.title;\n        previousTitle = this.title;\n    }\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n        console.error('init: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'initializing';\n    this.defineAction('close', this.close);\n    this.bindKey('c-s-c', 'close');\n    if (this.onInit !== null) {\n        this.onInit(this);\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            $('#menu').prepend(this.toolFrames[name]);\n        }\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n        $('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.open = function (args) {\n    if (this.state !== 'initialized') {\n        console.error(this.name + ': open: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'opening';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onOpen !== null) {\n        try {\n            this.onOpen(this, args || {});\n        } catch (e) {\n            console.error(this.name + ': open: exception caught:', e);\n            alert('Could not open application: ' + this.name);\n            this.kill();\n            return;\n        }\n    }\n    if (this.dockFrame !== null) {\n        $('#dock').append(this.dockFrame);\n    }\n    this.setArgs(args);\n    this.state = 'running';\n};\n\nApp.prototype.kill = function () {\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        try {\n            this.onClose(this);\n        } catch (e) {\n        }\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        } else {\n            running = null;\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.close = function () {\n    if (this.state !== 'running') {\n        console.error(this.name + ': close: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        var ok = this.onClose(this);\n        if (ok === false) {\n            this.state = 'running';\n            return false;\n        }\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        } else {\n            running = null;\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n    return true;\n};\n\nApp.prototype.reopen = function (args) {\n    if (this.state !== 'running') {\n        console.error(this.name + ': reopen: unexpected state:', this.state);\n        return;\n    }\n    if (this.onReopen !== null) {\n        try {\n            this.onReopen(this, args || {});\n        } catch (e) {\n            console.error(this.name + ': reopen: exception caught:', e);\n            alert('Could not open application: ' + this.name);\n            this.kill();\n            return;\n        }\n    } else {\n        this.state = 'closing';\n        if (this.onClose !== null) {\n            this.onClose(this);\n        }\n        this.state = 'initialized';\n        this.open(args);\n    }\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n        console.error(this.name + ': suspend: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n        this.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n        this.frame.removeClass('active').hide();\n        for (var i = 0; i < this.menus.length; i++) {\n            this.menus[i].frame.hide();\n        }\n        for (var name in this.toolFrames) {\n            if (this.toolFrames.hasOwnProperty(name)) {\n                this.toolFrames[name].hide();\n            }\n        }\n        this.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n        console.error(this.name + ': resume: unexpected state:', this.state);\n        return;\n    }\n    this.state = 'resuming';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onResume !== null) {\n        this.onResume(this);\n    }\n    this.setArgs(this.args);\n    if (this.onResize !== null) {\n        this.onResize();\n    }\n    this.state = 'running';\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n    if (apps[name].deferred !== null) {\n        apps[name].deferred.resolve(apps[name]);\n        apps[name].deferred = null;\n    }\n};\n\nBLOGSTEP.restore = function (name) {\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'suspended') {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            var index = tasks.indexOf(apps[name]);\n            if (index >= 0) {\n                tasks.splice(index, 1);\n            }\n            apps[name].resume();\n            return true;\n        } else if (apps[name].state === 'running') {\n            return true;\n        }\n    }\n    return false;\n};\n\nBLOGSTEP.getTasks = function () {\n    return Object.values(apps);\n};\n\nBLOGSTEP.run = function (name, args) {\n    var dfr = $.Deferred();\n    args = args || {};\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'running') {\n            apps[name].reopen(args);\n        } else {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            if (apps[name].state === 'suspended') {\n                var index = tasks.indexOf(apps[name]);\n                if (index >= 0) {\n                    tasks.splice(index, 1);\n                }\n                apps[name].resume();\n                apps[name].reopen(args);\n            } else {\n                apps[name].open(args);\n            }\n        }\n        dfr.resolve(apps[name]);\n    } else {\n        if (running !== null) {\n            running.suspend();\n            tasks.push(running);\n            running = null;\n        }\n        load(name).done(function (app) {\n            running = app;\n            app.open(args);\n            dfr.resolve(app);\n        });\n    }\n    return dfr.promise();\n};\n\nBLOGSTEP.open = function (path) {\n    var fileName = paths.fileName(path);\n    if (fileName.match(/\\.md/i)) {\n        BLOGSTEP.run('editor', {path: path});\n    } else if (fileName.match(/\\.webm/i)) {\n        BLOGSTEP.run('player', {path: path});\n    } else if (fileName.match(/\\.(?:jpe?g|png|gif|ico)/i)) {\n        BLOGSTEP.run('viewer', {path: path});\n    } else if (fileName.match(/\\.(?:php|log|json|html|css|js|sass|scss)/i)) {\n        BLOGSTEP.run('code-editor', {path: path});\n    } else {\n        BLOGSTEP.get('list-files', {path: path}).done(function (data) {\n            if (data.type === 'directory') {\n                BLOGSTEP.run('files', {path: path});\n            } else {\n                BLOGSTEP.run('code-editor', {path: path});\n            }\n        });\n    }\n};\n\nBLOGSTEP.getToken = function () {\n    return Cookies.get('csrf_token');\n};\n\nBLOGSTEP.addToken = function (xhr) {\n    xhr.setRequestHeader('X-Csrf-Token', BLOGSTEP.getToken());\n};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n\n    var settings = {\n        url: url,\n        method: method,\n        data: data,\n        dataType: responseType,\n        headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n    };\n\n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n        console.log(jqXhr, textStatus, errorThrown);\n        var newToken = BLOGSTEP.getToken();\n        if (settings.headers['X-Csrf-Token'] !== newToken) {\n            settings.headers['X-Csrf-Token'] = newToken;\n            if (xhr.status === 400) {\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n                return;\n            }\n        }\n        if (xhr.status === 401) {\n            $('#login-overlay').show();\n            if ($('#login-username').val() === '') {\n                $('#login-username').focus();\n            } else {\n                $('#login-password').focus();\n            }\n            handleLogin(function () {\n                $('#login-overlay').hide();\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n            });\n            return;\n        } else if (typeof xhr.responseJSON !== 'undefined') {\n            alert(xhr.responseJSON.message);\n        }\n        ui.shake($('main > .frame.active'));\n\n        var args = Array.prototype.slice.call(arguments);\n        dfr.rejectWith(xhr, args);\n    });\n\n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    var dfr = $.Deferred();\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].deferred === null) {\n            dfr.resolve(apps[name]);\n        } else {\n            apps[name].deferred.then(dfr.resolve, dfr.reject);\n        }\n    } else {\n        apps[name] = new App(name);\n        apps[name].deferred = dfr;\n        BLOGSTEP.get('load', {name: name}, 'html').done(function (data) {\n            var $doc = $('<div></div>');\n            $doc.html(data);\n            var $styles = $doc.children('link[rel=\"stylesheet\"]');\n            var $scripts = $doc.children('script[src]');\n            apps[name].frame = $doc.children('.frame');\n            apps[name].title = apps[name].frame.find('.frame-header-title').text();\n            apps[name].state = 'loaded';\n            $doc.children('.tool-frame').each(function () {\n                apps[name].toolFrames[$(this).data('name')] = $(this);\n            });\n            var $dockFrame = $doc.children('.dock-frame').first();\n            if ($dockFrame.length === 0) {\n                $dockFrame = $('<div class=\"dock-frame\">');\n                $('<img>')\n                        .attr('src', BLOGSTEP.PATH + '/assets/img/icons/32/app.png')\n                        .attr('alt', name)\n                        .appendTo($dockFrame);\n                $('<label>')\n                        .text(name)\n                        .appendTo($dockFrame);\n            }\n            $dockFrame.click(function () {\n                BLOGSTEP.restore(name);\n            });\n            apps[name].dockFrame = $dockFrame;\n            $('head').append($styles);\n            $('main').append(apps[name].frame);\n            $scripts.each(function () {\n                $.getScript($(this).attr('src')).fail(dfr.reject);\n            });\n        }).fail(dfr.reject);\n    }\n    return dfr.promise();\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        var data = {\n            username: $('#login-username').val(),\n            password: $('#login-password').val(),\n            remember: $('#login-remember').is(':checked') ? {remember: 'remember'} : null\n        };\n        BLOGSTEP.post('login', data).done(function () {\n            $('#login').find('input').prop('disabled', false);\n            $('#workspace-menu .username').text(data.username);\n            $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                $('#login').off('submit');\n                $('#login-password').val('');\n                done();\n            });\n        }).fail(function () {\n            $('#login').find('input').prop('disabled', false);\n            ui.shake($('#login-frame'));\n            $('#login-username').select();\n            $('#login-password').val('');\n        });\n        return false;\n    });\n}\n;\n\n$.ajaxSetup({\n    headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n        $('#workspace-menu').show();\n        $('#workspace-menu .username').text(data.username);\n\n        $('#workspace-menu [data-action=\"file-system\"]').click(function () {\n            if (!BLOGSTEP.restore('files')) {\n                BLOGSTEP.run('files');\n            }\n        });\n        $('#workspace-menu [data-action=\"builder\"]').click(function () {\n            BLOGSTEP.run('builder');\n        });\n        $('#workspace-menu [data-action=\"terminal\"]').click(function () {\n            BLOGSTEP.run('terminal');\n        });\n        $('#workspace-menu [data-action=\"control-panel\"]').click(function () {\n            BLOGSTEP.run('control-panel');\n        });\n        $('#workspace-menu [data-action=\"switch-user\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                $('#login-overlay').show();\n                $('#login-frame').show();\n                $('#login-username').select().focus();\n                handleLogin(function () {\n                    $('#login-overlay').hide();\n                });\n            });\n        });\n        $('#workspace-menu [data-action=\"logout\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                location.reload();\n            });\n        });\n\n        $('#login-username').val(data.username);\n        $('#login-overlay').addClass('login-overlay-dark');\n\n        BLOGSTEP.run('files', {path: '/'}).done(function () {\n            var run = $('body').data('run');\n            if (run !== '') {\n                var args = $('body').data('args');\n                console.log(args);\n                BLOGSTEP.run(run, args);\n            }\n        });\n    });\n});\n\n$(document).on('click', '[data-action=\"toggle-menu\"]', function (e) {\n    $('body').toggleClass('show-menu');\n    return false;\n});\n\n$('body').click(function (e) {\n    if ($('body').hasClass('show-menu')) {\n        $('body').removeClass('show-menu');\n    }\n});\n\n$(document).on('click', '[data-toggle] > *', function (e) {\n    if ($(this).is($(this).parent().data('toggle'))) {\n        $(this).toggleClass('active');\n    }\n});\n\n$(document).on('click', '[data-choice] > *', function (e) {\n    var selector = $(this).parent().data('choice');\n    if ($(this).is(selector)) {\n        $(this).parent().children(selector).removeClass('active');\n        $(this).addClass('active');\n    }\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            if (apps[name].onResize !== null) {\n                apps[name].onResize();\n            }\n        }\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            apps[name].keydown(e);\n        }\n    }\n});\n\nwindow.onpopstate = function (event) {\n    if (event.state !== null) {\n        skipHistory = true;\n        BLOGSTEP.run(event.state.app, event.state.args);\n        skipHistory = false;\n    }\n};\n\nwindow.onbeforeunload = function (event) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && (apps[name].state === 'running' || apps[name].state === 'suspended')) {\n            if (apps[name].isUnsaved !== null) {\n                if (apps[name].isUnsaved()) {\n                    if (apps[name].state === 'suspended') {\n                        BLOGSTEP.restore(name);\n                    }\n                    return 'Unsaved data in: ' + apps[name].title;\n                }\n            }\n        }\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./workspace.js","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/js-cookie/src/js.cookie.js\n// module id = 4\n// module chunks = 0 1 2 4 5 6"],"sourceRoot":""}
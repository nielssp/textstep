{"version":3,"sources":["webpack:///dist/workspace.js","webpack:///./common/paths.js?9de7*","webpack:///./common/ui.js?8332**","webpack:////home/www/blogstep/~/js-cookie/src/js.cookie.js?cd36**","webpack:///./workspace.js"],"names":["webpackJsonp","2","module","exports","dirName","path","replace","fileName","convert","cwd","trim","startsWith","names","split","stack","i","length","pop","push","join","3","__webpack_require__","$","Cookies","ajaxSetup","headers","X-Csrf-Token","get","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","data","find","prop","show","submit","this","ajax","url","method","username","val","password","remember","is","success","overflow","whiteSpace","hide","off","error","xhr","select","global","handleError","event","settings","thrownError","newToken","focus","responseJSON","alert","message","responseText","console","log","4","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","factory","registeredInModuleLoader","undefined","call","OldCookies","window","api","noConflict","extend","result","arguments","attributes","key","init","converter","value","document","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","write","encodeURIComponent","String","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","rdecode","parts","slice","json","charAt","name","read","parse","set","getJSON","apply","remove","withConverter","59","Menu","app","title","frame","header","itemList","text","App","state","deferred","args","dockFrame","actions","actionGroups","keyMap","menus","toolFrames","onInit","onSuspend","onResume","onOpen","onReopen","onFocus","onKeydown","onUnfocus","onClose","onResize","isUnsaved","load","dfr","Deferred","apps","hasOwnProperty","resolve","then","reject","BLOGSTEP","$doc","html","$styles","$scripts","each","$dockFrame","first","attr","PATH","appendTo","click","restore","append","getScript","fail","promise","post","ui","paths","tasks","running","skipHistory","previousTitle","prototype","addItem","action","button","activate","item","addMenu","menu","keydown","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","toLowerCase","preventDefault","bindKey","defineAction","groups","stopPropagation","forEach","group","enableGroup","enableAction","disableGroup","disableAction","setTitle","setArgs","isEmptyObject","param","history","pushState","close","prepend","open","addClass","removeClass","resume","detach","reopen","suspend","index","indexOf","splice","getTasks","Object","values","run","match","type","getToken","addToken","setRequestHeader","responseType","dataType","jqXhr","textStatus","errorThrown","Array","rejectWith","ready","location","reload","on","toggleClass","hasClass","parent","selector","resize","onpopstate","onbeforeunload"],"mappings":"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","file":"dist/workspace.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 2:\n/***/ (function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\nvar ui = __webpack_require__(3);\nvar paths = __webpack_require__(2);\n\nwindow.BLOGSTEP = {};\n\nvar apps = {};\n\nvar tasks = [];\nvar running = null;\nvar skipHistory = false;\nvar previousTitle = null;\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n        button.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n        app.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.title = '';\n    this.state = 'loading';\n    this.deferred = null;\n    this.args = null;\n    this.frame = null;\n    this.dockFrame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.toolFrames = {};\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onReopen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n    this.isUnsaved = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    if (this.onKeydown !== null) {\n        if (!this.onKeydown(e)) {\n            return false;\n        }\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n        e.preventDefault();\n        this.activate(this.keyMap[key]);\n        return false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = {ctrlKey: '', altKey: '', shiftKey: ''};\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    var app = this;\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        app.activate(name);\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!this.actionGroups.hasOwnProperty(group)) {\n                this.actionGroups[group] = [];\n            }\n            this.actionGroups[group].push(name);\n        }, this);\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n        this.actions[name].apply(this);\n    } else {\n        name.apply(this);\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        });\n    } else {\n        name.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        });\n    } else {\n        name.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.setTitle = function (title) {\n    this.title = title;\n    this.frame.find('.frame-header-title').text(this.title);\n    this.dockFrame.attr('title', this.title);\n    document.title = this.title;\n};\n\nApp.prototype.setArgs = function (args) {\n    this.args = args;\n    if (!skipHistory) {\n        var path = BLOGSTEP.PATH + '/app/' + this.name;\n        if (!$.isEmptyObject(args)) {\n            path += '?' + $.param(args).replace(/%2F/gi, '/');\n        }\n        if (previousTitle !== null) {\n            document.title = previousTitle;\n        }\n        history.pushState({app: this.name, args: args}, previousTitle, path);\n        document.title = this.title;\n        previousTitle = this.title;\n    }\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n        console.error('init: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'initializing';\n    this.defineAction('close', this.close);\n    this.bindKey('c-s-c', 'close');\n    if (this.onInit !== null) {\n        this.onInit(this);\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            $('#menu').prepend(this.toolFrames[name]);\n        }\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n        $('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.open = function (args) {\n    if (this.state !== 'initialized') {\n        console.error('open: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'opening';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onOpen !== null) {\n        this.onOpen(this, args || {});\n    }\n    if (this.dockFrame !== null) {\n        $('#dock').append(this.dockFrame);\n    }\n    this.setArgs(args);\n    this.state = 'running';\n};\n\nApp.prototype.close = function () {\n    if (this.state !== 'running') {\n        console.error('close: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        var ok = this.onClose(this);\n        if (ok === false) {\n            this.state = 'running';\n            return false;\n        }\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n    return true;\n};\n\nApp.prototype.reopen = function (args) {\n    if (this.state !== 'running') {\n        console.error('reopen: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    if (this.onReopen !== null) {\n        this.onReopen(this, args || {});\n    } else {\n        this.state = 'closing';\n        if (this.onClose !== null) {\n            this.onClose(this);\n        }\n        this.state = 'initialized';\n        this.open(args);\n    }\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n        console.error('suspend: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n        this.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n        this.frame.removeClass('active').hide();\n        for (var i = 0; i < this.menus.length; i++) {\n            this.menus[i].frame.hide();\n        }\n        for (var name in this.toolFrames) {\n            if (this.toolFrames.hasOwnProperty(name)) {\n                this.toolFrames[name].hide();\n            }\n        }\n        this.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n        console.error('resume: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'resuming';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onResume !== null) {\n        this.onResume(this);\n    }\n    this.setArgs(this.args);\n    if (this.onResize !== null) {\n        this.onResize();\n    }\n    this.state = 'running';\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n    if (apps[name].deferred !== null) {\n        apps[name].deferred.resolve(apps[name]);\n        apps[name].deferred = null;\n    }\n};\n\nBLOGSTEP.restore = function (name) {\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'suspended') {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            var index = tasks.indexOf(apps[name]);\n            if (index >= 0) {\n                tasks.splice(index, 1);\n            }\n            apps[name].resume();\n            return true;\n        } else if (apps[name].state === 'running') {\n            return true;\n        }\n    }\n    return false;\n};\n\nBLOGSTEP.getTasks = function () {\n    return Object.values(apps);\n};\n\nBLOGSTEP.run = function (name, args) {\n    var dfr = $.Deferred();\n    args = args || {};\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'running') {\n            apps[name].reopen(args);\n        } else {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            if (apps[name].state === 'suspended') {\n                var index = tasks.indexOf(apps[name]);\n                if (index >= 0) {\n                    tasks.splice(index, 1);\n                }\n                apps[name].resume();\n                apps[name].reopen(args);\n            } else {\n                apps[name].open(args);\n            }\n        }\n        dfr.resolve(apps[name]);\n    } else {\n        if (running !== null) {\n            running.suspend();\n            tasks.push(running);\n            running = null;\n        }\n        load(name).done(function (app) {\n            running = app;\n            app.open(args);\n            dfr.resolve(app);\n        });\n    }\n    return dfr.promise();\n};\n\nBLOGSTEP.open = function (path) {\n    var fileName = paths.fileName(path);\n    if (fileName.match(/\\.md/i)) {\n        BLOGSTEP.run('editor', {path: path});\n    } else if (fileName.match(/\\.webm/i)) {\n        BLOGSTEP.run('player', {path: path});\n    } else if (fileName.match(/\\.(?:jpe?g|png|gif|ico)/i)) {\n        BLOGSTEP.run('viewer', {path: path});\n    } else if (fileName.match(/\\.(?:php|log|json|html|css|js|sass|scss)/i)) {\n        BLOGSTEP.run('code-editor', {path: path});\n    } else {\n        BLOGSTEP.get('list-files', {path: path}).done(function (data) {\n            if (data.type === 'directory') {\n                BLOGSTEP.run('files', {path: path});\n            } else {\n                BLOGSTEP.run('code-editor', {path: path});\n            }\n        });\n    }\n};\n\nBLOGSTEP.getToken = function () {\n    return Cookies.get('csrf_token');\n};\n\nBLOGSTEP.addToken = function (xhr) {\n    xhr.setRequestHeader('X-Csrf-Token', BLOGSTEP.getToken());\n};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n\n    var settings = {\n        url: url,\n        method: method,\n        data: data,\n        dataType: responseType,\n        headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n    };\n\n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n        console.log(jqXhr, textStatus, errorThrown);\n        var newToken = BLOGSTEP.getToken();\n        if (settings.headers['X-Csrf-Token'] !== newToken) {\n            settings.headers['X-Csrf-Token'] = newToken;\n            if (xhr.status === 400) {\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n                return;\n            }\n        }\n        if (xhr.status === 401) {\n            $('#login-overlay').show();\n            if ($('#login-username').val() === '') {\n                $('#login-username').focus();\n            } else {\n                $('#login-password').focus();\n            }\n            handleLogin(function () {\n                $('#login-overlay').hide();\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n            });\n            return;\n        } else if (typeof xhr.responseJSON !== 'undefined') {\n            alert(xhr.responseJSON.message);\n        }\n        ui.shake($('main > .frame.active'));\n\n        var args = Array.prototype.slice.call(arguments);\n        dfr.rejectWith(xhr, args);\n    });\n\n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    var dfr = $.Deferred();\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].deferred === null) {\n            dfr.resolve(apps[name]);\n        } else {\n            apps[name].deferred.then(dfr.resolve, dfr.reject);\n        }\n    } else {\n        apps[name] = new App(name);\n        apps[name].deferred = dfr;\n        BLOGSTEP.get('load', {name: name}, 'html').done(function (data) {\n            var $doc = $('<div></div>');\n            $doc.html(data);\n            var $styles = $doc.children('link[rel=\"stylesheet\"]');\n            var $scripts = $doc.children('script[src]');\n            apps[name].frame = $doc.children('.frame');\n            apps[name].title = apps[name].frame.find('.frame-header-title').text();\n            apps[name].state = 'loaded';\n            $doc.children('.tool-frame').each(function () {\n                apps[name].toolFrames[$(this).data('name')] = $(this);\n            });\n            var $dockFrame = $doc.children('.dock-frame').first();\n            if ($dockFrame.length === 0) {\n                $dockFrame = $('<div class=\"dock-frame\">');\n                $('<img>')\n                        .attr('src', BLOGSTEP.PATH + '/assets/img/icons/32/app.png')\n                        .attr('alt', name)\n                        .appendTo($dockFrame);\n                $('<label>')\n                        .text(name)\n                        .appendTo($dockFrame);\n            }\n            $dockFrame.click(function () {\n                BLOGSTEP.restore(name);\n            });\n            apps[name].dockFrame = $dockFrame;\n            $('head').append($styles);\n            $('main').append(apps[name].frame);\n            $scripts.each(function () {\n                $.getScript($(this).attr('src')).fail(dfr.reject);\n            });\n        }).fail(dfr.reject);\n    }\n    return dfr.promise();\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        var data = {\n            username: $('#login-username').val(),\n            password: $('#login-password').val(),\n            remember: $('#login-remember').is(':checked') ? {remember: 'remember'} : null\n        };\n        BLOGSTEP.post('login', data).done(function () {\n            $('#login').find('input').prop('disabled', false);\n            $('#workspace-menu .username').text(data.username);\n            $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                $('#login').off('submit');\n                $('#login-password').val('');\n                done();\n            });\n        }).fail(function () {\n            $('#login').find('input').prop('disabled', false);\n            ui.shake($('#login-frame'));\n            $('#login-username').select();\n            $('#login-password').val('');\n        });\n        return false;\n    });\n}\n;\n\n$.ajaxSetup({\n    headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n        $('#workspace-menu').show();\n        $('#workspace-menu .username').text(data.username);\n\n        $('#workspace-menu [data-action=\"file-system\"]').click(function () {\n            if (!BLOGSTEP.restore('files')) {\n                BLOGSTEP.run('files');\n            }\n        });\n        $('#workspace-menu [data-action=\"builder\"]').click(function () {\n            BLOGSTEP.run('builder');\n        });\n        $('#workspace-menu [data-action=\"terminal\"]').click(function () {\n            BLOGSTEP.run('terminal');\n        });\n        $('#workspace-menu [data-action=\"control-panel\"]').click(function () {\n            BLOGSTEP.run('control-panel');\n        });\n        $('#workspace-menu [data-action=\"switch-user\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                $('#login-overlay').show();\n                $('#login-frame').show();\n                $('#login-username').select().focus();\n                handleLogin(function () {\n                    $('#login-overlay').hide();\n                });\n            });\n        });\n        $('#workspace-menu [data-action=\"logout\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                location.reload();\n            });\n        });\n\n        $('#login-username').val(data.username);\n        $('#login-overlay').addClass('login-overlay-dark');\n\n        BLOGSTEP.run('files', {path: '/'}).done(function () {\n            var run = $('body').data('run');\n            if (run !== '') {\n                var args = $('body').data('args');\n                console.log(args);\n                BLOGSTEP.run(run, args);\n            }\n        });\n    });\n});\n\n$(document).on('click', '[data-action=\"toggle-menu\"]', function (e) {\n    $('body').toggleClass('show-menu');\n    return false;\n});\n\n$('body').click(function (e) {\n    if ($('body').hasClass('show-menu')) {\n        $('body').removeClass('show-menu');\n    }\n});\n\n$(document).on('click', '[data-toggle] > *', function (e) {\n    if ($(this).is($(this).parent().data('toggle'))) {\n        $(this).toggleClass('active');\n    }\n});\n\n$(document).on('click', '[data-choice] > *', function (e) {\n    var selector = $(this).parent().data('choice');\n    if ($(this).is(selector)) {\n        $(this).parent().children(selector).removeClass('active');\n        $(this).addClass('active');\n    }\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            if (apps[name].onResize !== null) {\n                apps[name].onResize();\n            }\n        }\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            apps[name].keydown(e);\n        }\n    }\n});\n\nwindow.onpopstate = function (event) {\n    if (event.state !== null) {\n        skipHistory = true;\n        BLOGSTEP.run(event.state.app, event.state.args);\n        skipHistory = false;\n    }\n};\n\nwindow.onbeforeunload = function (event) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && (apps[name].state === 'running' || apps[name].state === 'suspended')) {\n            if (apps[name].isUnsaved !== null) {\n                if (apps[name].isUnsaved()) {\n                    if (apps[name].state === 'suspended') {\n                        BLOGSTEP.restore(name);\n                    }\n                    return 'Unsaved data in: ' + apps[name].title;\n                }\n            }\n        }\n    }\n};\n\n/***/ })\n\n},[59]);\n\n\n// WEBPACK FOOTER //\n// dist/workspace.js","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 2\n// module chunks = 0 1 3 4 5 7","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame.active'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 3\n// module chunks = 0 1 2 3 4 6","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/js-cookie/src/js.cookie.js\n// module id = 4\n// module chunks = 0 1 2 3 4 6","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\nvar ui = require('./common/ui');\nvar paths = require('./common/paths');\n\nwindow.BLOGSTEP = {};\n\nvar apps = {};\n\nvar tasks = [];\nvar running = null;\nvar skipHistory = false;\nvar previousTitle = null;\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n        button.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n        app.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.title = '';\n    this.state = 'loading';\n    this.deferred = null;\n    this.args = null;\n    this.frame = null;\n    this.dockFrame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.toolFrames = {};\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onReopen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n    this.isUnsaved = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n        return;\n    }\n    if (this.onKeydown !== null) {\n        if (!this.onKeydown(e)) {\n            return false;\n        }\n    }\n    var key = '';\n    if (e.ctrlKey) {\n        key += 'c-';\n    }\n    if (e.altKey) {\n        key += 'a-';\n    }\n    if (e.shiftKey) {\n        key += 's-';\n    }\n    if (e.metaKey) {\n        key += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n        e.preventDefault();\n        this.activate(this.keyMap[key]);\n        return false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = {ctrlKey: '', altKey: '', shiftKey: ''};\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n        switch (parts[i]) {\n            case 'c':\n                e.ctrlKey = 'c-';\n                break;\n            case 'a':\n                e.altKey = 'a-';\n                break;\n            case 's':\n                e.shiftKey = 's-';\n                break;\n        }\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    var app = this;\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        app.activate(name);\n        return false;\n    });\n    if (typeof groups !== 'undefined') {\n        groups.forEach(function (group) {\n            if (!this.actionGroups.hasOwnProperty(group)) {\n                this.actionGroups[group] = [];\n            }\n            this.actionGroups[group].push(name);\n        }, this);\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n        this.actions[name].apply(this);\n    } else {\n        name.apply(this);\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n        this.actionGroups[group].forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n        });\n    } else {\n        name.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n        this.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        this.menus.forEach(function (menu) {\n            menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n        });\n    } else {\n        name.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.setTitle = function (title) {\n    this.title = title;\n    this.frame.find('.frame-header-title').text(this.title);\n    this.dockFrame.attr('title', this.title);\n    document.title = this.title;\n};\n\nApp.prototype.setArgs = function (args) {\n    this.args = args;\n    if (!skipHistory) {\n        var path = BLOGSTEP.PATH + '/app/' + this.name;\n        if (!$.isEmptyObject(args)) {\n            path += '?' + $.param(args).replace(/%2F/gi, '/');\n        }\n        if (previousTitle !== null) {\n            document.title = previousTitle;\n        }\n        history.pushState({app: this.name, args: args}, previousTitle, path);\n        document.title = this.title;\n        previousTitle = this.title;\n    }\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n        console.error('init: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'initializing';\n    this.defineAction('close', this.close);\n    this.bindKey('c-s-c', 'close');\n    if (this.onInit !== null) {\n        this.onInit(this);\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            $('#menu').prepend(this.toolFrames[name]);\n        }\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n        $('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'initialized';\n};\n\nApp.prototype.open = function (args) {\n    if (this.state !== 'initialized') {\n        console.error('open: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'opening';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onOpen !== null) {\n        this.onOpen(this, args || {});\n    }\n    if (this.dockFrame !== null) {\n        $('#dock').append(this.dockFrame);\n    }\n    this.setArgs(args);\n    this.state = 'running';\n};\n\nApp.prototype.close = function () {\n    if (this.state !== 'running') {\n        console.error('close: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'closing';\n    if (this.onClose !== null) {\n        var ok = this.onClose(this);\n        if (ok === false) {\n            this.state = 'running';\n            return false;\n        }\n    }\n    this.frame.removeClass('active').hide();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.hide();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].hide();\n        }\n    }\n    if (running === this) {\n        if (tasks.length > 0) {\n            running = tasks.pop();\n            running.resume();\n        }\n    }\n    if (this.dockFrame !== null) {\n        this.dockFrame.detach();\n    }\n    this.state = 'initialized';\n    return true;\n};\n\nApp.prototype.reopen = function (args) {\n    if (this.state !== 'running') {\n        console.error('reopen: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    if (this.onReopen !== null) {\n        this.onReopen(this, args || {});\n    } else {\n        this.state = 'closing';\n        if (this.onClose !== null) {\n            this.onClose(this);\n        }\n        this.state = 'initialized';\n        this.open(args);\n    }\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n        console.error('suspend: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n        this.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n        this.frame.removeClass('active').hide();\n        for (var i = 0; i < this.menus.length; i++) {\n            this.menus[i].frame.hide();\n        }\n        for (var name in this.toolFrames) {\n            if (this.toolFrames.hasOwnProperty(name)) {\n                this.toolFrames[name].hide();\n            }\n        }\n        this.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n        console.error('resume: unexpected state', this.state, 'app', this.name);\n        return;\n    }\n    this.state = 'resuming';\n    this.setTitle(this.title);\n    this.frame.addClass('active').show();\n    for (var i = 0; i < this.menus.length; i++) {\n        this.menus[i].frame.show();\n    }\n    for (var name in this.toolFrames) {\n        if (this.toolFrames.hasOwnProperty(name)) {\n            this.toolFrames[name].show();\n        }\n    }\n    if (this.onResume !== null) {\n        this.onResume(this);\n    }\n    this.setArgs(this.args);\n    if (this.onResize !== null) {\n        this.onResize();\n    }\n    this.state = 'running';\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n    if (apps[name].deferred !== null) {\n        apps[name].deferred.resolve(apps[name]);\n        apps[name].deferred = null;\n    }\n};\n\nBLOGSTEP.restore = function (name) {\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'suspended') {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            var index = tasks.indexOf(apps[name]);\n            if (index >= 0) {\n                tasks.splice(index, 1);\n            }\n            apps[name].resume();\n            return true;\n        } else if (apps[name].state === 'running') {\n            return true;\n        }\n    }\n    return false;\n};\n\nBLOGSTEP.getTasks = function () {\n    return Object.values(apps);\n};\n\nBLOGSTEP.run = function (name, args) {\n    var dfr = $.Deferred();\n    args = args || {};\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].state === 'running') {\n            apps[name].reopen(args);\n        } else {\n            if (running !== null) {\n                running.suspend();\n                tasks.push(running);\n            }\n            running = apps[name];\n            if (apps[name].state === 'suspended') {\n                var index = tasks.indexOf(apps[name]);\n                if (index >= 0) {\n                    tasks.splice(index, 1);\n                }\n                apps[name].resume();\n                apps[name].reopen(args);\n            } else {\n                apps[name].open(args);\n            }\n        }\n        dfr.resolve(apps[name]);\n    } else {\n        if (running !== null) {\n            running.suspend();\n            tasks.push(running);\n            running = null;\n        }\n        load(name).done(function (app) {\n            running = app;\n            app.open(args);\n            dfr.resolve(app);\n        });\n    }\n    return dfr.promise();\n};\n\nBLOGSTEP.open = function (path) {\n    var fileName = paths.fileName(path);\n    if (fileName.match(/\\.md/i)) {\n        BLOGSTEP.run('editor', {path: path});\n    } else if (fileName.match(/\\.webm/i)) {\n        BLOGSTEP.run('player', {path: path});\n    } else if (fileName.match(/\\.(?:jpe?g|png|gif|ico)/i)) {\n        BLOGSTEP.run('viewer', {path: path});\n    } else if (fileName.match(/\\.(?:php|log|json|html|css|js|sass|scss)/i)) {\n        BLOGSTEP.run('code-editor', {path: path});\n    } else {\n        BLOGSTEP.get('list-files', {path: path}).done(function (data) {\n            if (data.type === 'directory') {\n                BLOGSTEP.run('files', {path: path});\n            } else {\n                BLOGSTEP.run('code-editor', {path: path});\n            }\n        });\n    }\n};\n\nBLOGSTEP.getToken = function () {\n    return Cookies.get('csrf_token');\n};\n\nBLOGSTEP.addToken = function (xhr) {\n    xhr.setRequestHeader('X-Csrf-Token', BLOGSTEP.getToken());\n};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n\n    var settings = {\n        url: url,\n        method: method,\n        data: data,\n        dataType: responseType,\n        headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n    };\n\n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n        console.log(jqXhr, textStatus, errorThrown);\n        var newToken = BLOGSTEP.getToken();\n        if (settings.headers['X-Csrf-Token'] !== newToken) {\n            settings.headers['X-Csrf-Token'] = newToken;\n            if (xhr.status === 400) {\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n                return;\n            }\n        }\n        if (xhr.status === 401) {\n            $('#login-overlay').show();\n            if ($('#login-username').val() === '') {\n                $('#login-username').focus();\n            } else {\n                $('#login-password').focus();\n            }\n            handleLogin(function () {\n                $('#login-overlay').hide();\n                $.ajax(settings).then(dfr.resolve, dfr.reject);\n            });\n            return;\n        } else if (typeof xhr.responseJSON !== 'undefined') {\n            alert(xhr.responseJSON.message);\n        }\n        ui.shake($('main > .frame.active'));\n\n        var args = Array.prototype.slice.call(arguments);\n        dfr.rejectWith(xhr, args);\n    });\n\n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    var dfr = $.Deferred();\n    if (apps.hasOwnProperty(name)) {\n        if (apps[name].deferred === null) {\n            dfr.resolve(apps[name]);\n        } else {\n            apps[name].deferred.then(dfr.resolve, dfr.reject);\n        }\n    } else {\n        apps[name] = new App(name);\n        apps[name].deferred = dfr;\n        BLOGSTEP.get('load', {name: name}, 'html').done(function (data) {\n            var $doc = $('<div></div>');\n            $doc.html(data);\n            var $styles = $doc.children('link[rel=\"stylesheet\"]');\n            var $scripts = $doc.children('script[src]');\n            apps[name].frame = $doc.children('.frame');\n            apps[name].title = apps[name].frame.find('.frame-header-title').text();\n            apps[name].state = 'loaded';\n            $doc.children('.tool-frame').each(function () {\n                apps[name].toolFrames[$(this).data('name')] = $(this);\n            });\n            var $dockFrame = $doc.children('.dock-frame').first();\n            if ($dockFrame.length === 0) {\n                $dockFrame = $('<div class=\"dock-frame\">');\n                $('<img>')\n                        .attr('src', BLOGSTEP.PATH + '/assets/img/icons/32/app.png')\n                        .attr('alt', name)\n                        .appendTo($dockFrame);\n                $('<label>')\n                        .text(name)\n                        .appendTo($dockFrame);\n            }\n            $dockFrame.click(function () {\n                BLOGSTEP.restore(name);\n            });\n            apps[name].dockFrame = $dockFrame;\n            $('head').append($styles);\n            $('main').append(apps[name].frame);\n            $scripts.each(function () {\n                $.getScript($(this).attr('src')).fail(dfr.reject);\n            });\n        }).fail(dfr.reject);\n    }\n    return dfr.promise();\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        var data = {\n            username: $('#login-username').val(),\n            password: $('#login-password').val(),\n            remember: $('#login-remember').is(':checked') ? {remember: 'remember'} : null\n        };\n        BLOGSTEP.post('login', data).done(function () {\n            $('#login').find('input').prop('disabled', false);\n            $('#workspace-menu .username').text(data.username);\n            $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                $('#login').off('submit');\n                $('#login-password').val('');\n                done();\n            });\n        }).fail(function () {\n            $('#login').find('input').prop('disabled', false);\n            ui.shake($('#login-frame'));\n            $('#login-username').select();\n            $('#login-password').val('');\n        });\n        return false;\n    });\n}\n;\n\n$.ajaxSetup({\n    headers: {'X-Csrf-Token': BLOGSTEP.getToken()}\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n        $('#workspace-menu').show();\n        $('#workspace-menu .username').text(data.username);\n\n        $('#workspace-menu [data-action=\"file-system\"]').click(function () {\n            if (!BLOGSTEP.restore('files')) {\n                BLOGSTEP.run('files');\n            }\n        });\n        $('#workspace-menu [data-action=\"builder\"]').click(function () {\n            BLOGSTEP.run('builder');\n        });\n        $('#workspace-menu [data-action=\"terminal\"]').click(function () {\n            BLOGSTEP.run('terminal');\n        });\n        $('#workspace-menu [data-action=\"control-panel\"]').click(function () {\n            BLOGSTEP.run('control-panel');\n        });\n        $('#workspace-menu [data-action=\"switch-user\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                $('#login-overlay').show();\n                $('#login-frame').show();\n                $('#login-username').select().focus();\n                handleLogin(function () {\n                    $('#login-overlay').hide();\n                });\n            });\n        });\n        $('#workspace-menu [data-action=\"logout\"]').click(function () {\n            BLOGSTEP.post('logout').done(function () {\n                location.reload();\n            });\n        });\n\n        $('#login-username').val(data.username);\n        $('#login-overlay').addClass('login-overlay-dark');\n\n        BLOGSTEP.run('files', {path: '/'}).done(function () {\n            var run = $('body').data('run');\n            if (run !== '') {\n                var args = $('body').data('args');\n                console.log(args);\n                BLOGSTEP.run(run, args);\n            }\n        });\n    });\n});\n\n$(document).on('click', '[data-action=\"toggle-menu\"]', function (e) {\n    $('body').toggleClass('show-menu');\n    return false;\n});\n\n$('body').click(function (e) {\n    if ($('body').hasClass('show-menu')) {\n        $('body').removeClass('show-menu');\n    }\n});\n\n$(document).on('click', '[data-toggle] > *', function (e) {\n    if ($(this).is($(this).parent().data('toggle'))) {\n        $(this).toggleClass('active');\n    }\n});\n\n$(document).on('click', '[data-choice] > *', function (e) {\n    var selector = $(this).parent().data('choice');\n    if ($(this).is(selector)) {\n        $(this).parent().children(selector).removeClass('active');\n        $(this).addClass('active');\n    }\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            if (apps[name].onResize !== null) {\n                apps[name].onResize();\n            }\n        }\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n            apps[name].keydown(e);\n        }\n    }\n});\n\nwindow.onpopstate = function (event) {\n    if (event.state !== null) {\n        skipHistory = true;\n        BLOGSTEP.run(event.state.app, event.state.args);\n        skipHistory = false;\n    }\n};\n\nwindow.onbeforeunload = function (event) {\n    for (var name in apps) {\n        if (apps.hasOwnProperty(name) && (apps[name].state === 'running' || apps[name].state === 'suspended')) {\n            if (apps[name].isUnsaved !== null) {\n                if (apps[name].isUnsaved()) {\n                    if (apps[name].state === 'suspended') {\n                        BLOGSTEP.restore(name);\n                    }\n                    return 'Unsaved data in: ' + apps[name].title;\n                }\n            }\n        }\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace.js\n// module id = 59\n// module chunks = 3"],"sourceRoot":""}
{"version":3,"sources":["webpack:///dist/workspace.js","webpack:///./common/ui.js","webpack:////home/www/blogstep/~/js-cookie/src/js.cookie.js","webpack:///./common/paths.js","webpack:///./workspace.js"],"names":["webpackJsonp","2","module","exports","__webpack_require__","$","Cookies","ajaxSetup","headers","X-Csrf-Token","get","shake","el","amount","dbl","width","animate","marginLeft","queue","css","finish","onLongPress","callback","touching","start","e","end","addEventListener","setProgress","progress","status","bar","children","label","Math","floor","className","style","innerText","handleLogin","done","path","data","replace","find","prop","show","submit","this","ajax","url","method","username","val","password","remember","is","success","overflow","whiteSpace","hide","off","error","xhr","select","global","handleError","event","settings","thrownError","newToken","focus","responseJSON","alert","message","responseText","console","log","4","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","factory","registeredInModuleLoader","undefined","call","OldCookies","window","api","noConflict","extend","i","result","arguments","length","attributes","key","init","converter","value","document","defaults","expires","Date","setMilliseconds","getMilliseconds","toUTCString","JSON","stringify","test","write","encodeURIComponent","String","decodeURIComponent","escape","stringifiedAttributes","attributeName","cookie","cookies","split","rdecode","parts","slice","join","json","charAt","name","read","parse","set","getJSON","apply","remove","withConverter","5","dirName","fileName","convert","cwd","trim","startsWith","names","stack","pop","push","60","Menu","app","title","frame","header","itemList","text","App","state","actions","actionGroups","keyMap","menus","onInit","onSuspend","onResume","onOpen","onFocus","onKeydown","onUnfocus","onClose","onResize","load","apps","BLOGSTEP","$doc","html","$styles","$scripts","append","each","getScript","attr","post","fail","ui","prototype","addItem","action","button","click","activate","item","addMenu","menu","prepend","keydown","defaultPrevented","ctrlKey","altKey","shiftKey","metaKey","toLowerCase","hasOwnProperty","preventDefault","bindKey","defineAction","groups","stopPropagation","forEach","group","enableGroup","enableAction","disableGroup","disableAction","open","suspend","resume","PATH","run","args","server","responseType","dfr","Deferred","dataType","resolve","jqXhr","textStatus","errorThrown","then","reject","Array","rejectWith","promise","ready","location","reload","addClass","resize"],"mappings":"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","file":"dist/workspace.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 2:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (true) {\n\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (true) {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports) {\n\n/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\n\nvar $ = __webpack_require__(0);\nvar Cookies = __webpack_require__(4);\nvar ui = __webpack_require__(2);\nvar paths = __webpack_require__(5);\n\nwindow.BLOGSTEP = {};\n\nvar apps = {};\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n\tbutton.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n\tapp.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.state = 'loading';\n    this.frame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n\tconsole.error('init: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'initializing';\n    if (this.onInit !== null) {\n\tthis.onInit(this);\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n\t$('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'running';\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n\treturn;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n\tkey += 'c-';\n    }\n    if (e.altKey) {\n\tkey += 'a-';\n    }\n    if (e.shiftKey) {\n\tkey += 's-';\n    }\n    if (e.metaKey) {\n\tkey += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n\te.preventDefault();\n\tthis.activate(this.keyMap[key]);\n\treturn false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = {ctrlKey: '', altKey: '', shiftKey: ''};\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n\tswitch (parts[i]) {\n\t    case 'c':\n\t\te.ctrlKey = 'c-';\n\t\tbreak;\n\t    case 'a':\n\t\te.altKey = 'a-';\n\t\tbreak;\n\t    case 's':\n\t\te.shiftKey = 's-';\n\t\tbreak;\n\t}\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n\te.preventDefault();\n\te.stopPropagation();\n\tcallback();\n\treturn false;\n    });\n    if (typeof groups !== 'undefined') {\n\tgroups.forEach(function (group) {\n\t    if (!this.actionGroups.hasOwnProperty(group)) {\n\t\tthis.actionGroups[group] = [];\n\t    }\n\t    this.actionGroups[group].push(name);\n\t});\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n\tthis.actions[name]();\n    } else {\n\tname();\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n\tthis.actionGroups[group].forEach(function (name) {\n\t    this.enableAction(name);\n\t});\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n\tthis.actionGroups[group].forEach(function (name) {\n\t    this.disableAction(name);\n\t});\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n\tthis.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n\tthis.menus.forEach(function (menu) {\n\t    menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n\t});\n    } else {\n\tname.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n\tthis.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n\tthis.menus.forEach(function (menu) {\n\t    menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n\t});\n    } else {\n\tname.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.open = function () {\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n\tconsole.error('suspend: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n\tthis.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n\tthis.frame.hide();\n\tthis.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n\tconsole.error('resume: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'resuming';\n    if (this.onResume !== null) {\n\tthis.onResume(this);\n    }\n    if (this.state === 'resuming') {\n\tthis.frame.show();\n\tthis.state = 'running';\n    }\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n};\n\nBLOGSTEP.run = function (name, args) {\n    load(name);\n};\n\nBLOGSTEP.server = {};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n    \n    var settings = {\n\turl: url,\n\tmethod: method,\n\tdata: data,\n\tdataType: responseType,\n\theaders: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n    };\n    \n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n\tconsole.log(jqXhr, textStatus, errorThrown);\n\tvar newToken = Cookies.get('csrf_token');\n\tif (settings.headers['X-Csrf-Token'] !== newToken) {\n\t    settings.headers['X-Csrf-Token'] = newToken;\n\t    if (xhr.status === 400) {\n\t\t$.ajax(settings).then(dfr.resolve, dfr.reject);\n\t\treturn;\n\t    }\n\t}\n\tif (xhr.status === 401) {\n\t    $('#login-overlay').show();\n\t    if ($('#login-username').val() === '') {\n\t\t$('#login-username').focus();\n\t    } else {\n\t\t$('#login-password').focus();\n\t    }\n\t    handleLogin(function () {\n\t\t$('#login-overlay').hide();\n\t\t$.ajax(settings).then(dfr.resolve, dfr.reject);\n\t    });\n\t    return;\n\t} else if (typeof xhr.responseJSON !== 'undefined') {\n\t    alert(xhr.responseJSON.message);\n\t} else if (xhr.responseText !== '') {\n\t    alert(xhr.responseText);\n\t} else {\n\t    alert('Internal error');\n\t    console.error(errorThrown);\n\t}\n\tui.shake($('main > .frame'));\n\t\n\tvar args = Array.prototype.slice.call(arguments);\n\tdfr.rejectWith(xhr, args);\n    });\n    \n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    apps[name] = new App(name);\n    BLOGSTEP.get('load', { name: name }, 'html').done(function (data) {\n\tvar $doc = $('<div></div>');\n\t$doc.html(data);\n\tvar $styles = $doc.find('link[rel=\"stylesheet\"]');\n\tvar $scripts = $doc.find('script[src]');\n\tapps[name].frame = $doc.find('.frame');\n\tapps[name].state = 'loaded';\n\t$('head').append($styles);\n\t$('main').append(apps[name].frame);\n\t$scripts.each(function () {\n\t    $.getScript($(this).attr('src'));\n\t});\n    });\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n\tBLOGSTEP.post('login', {\n\t    username: $('#login-username').val(),\n\t    password: $('#login-password').val(),\n\t    remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n\t}).done(function () {\n\t    $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n\t\t$(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n\t\t$('#login').off('submit');\n\t\t$('#login-password').val('');\n\t\tdone();\n\t    });\n\t}).fail(function () {\n\t    $('#login').find('input').prop('disabled', false);\n\t    ui.shake($('#login-frame'));\n\t    $('#login-username').select();\n\t    $('#login-password').val('');\n\t});\n        return false;\n    });\n};\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n\t$('#workspace-menu').show();\n\t$('#workspace-menu .username').text(data.username);\n\t\n\t$('#workspace-menu [data-action=\"logout\"]').click(function () {\n\t    BLOGSTEP.post('logout').done(function () {\n\t\tlocation.reload();\n\t    });\n\t});\n\n\t$('#login-username').val(data.username);\n\t$('#login-overlay').addClass('login-overlay-dark');\n\tload('test');\n    });\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n\tif (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n\t    if (apps[name].onResize !== null) {\n\t\tapps[name].onResize();\n\t    }\n\t}\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n\tif (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n\t    apps[name].keydown(e);\n\t}\n    }\n});\n\n/***/ })\n\n},[60]);\n\n\n// WEBPACK FOOTER //\n// dist/workspace.js","/*\n * BlogSTEP\n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\nexports.shake = function (el, amount) {\n    amount = typeof amount === \"undefined\" ? 10 : amount;\n    var dbl = amount * 2;\n    return $(el).width($(el).width())\n            .animate({marginLeft: '+=' + amount}, 50)\n            .animate({marginLeft: '-=' + dbl}, 50)\n            .animate({marginLeft: '+=' + dbl}, 50)\n            .animate({marginLeft: '-=' + amount}, 50)\n            .queue(function () {\n                $(el).css('width', '')\n                        .css('margin-left', '')\n                        .finish();\n            });\n};\n\nexports.onLongPress = function(el, callback) {\n    var touching = false;\n    \n    var start = function (e) {\n        touching = true;\n    };\n    \n    var end = function (e) {\n        touching = false;\n    };\n    \n    el.addEventListener('touchstart', start);\n    el.addEventListener('touchend', end);\n    el.addEventListener('touchcancel', end);\n    el.addEventListener('touchmove', end);\n    el.addEventListener('contextmenu', function (e) {\n        if (touching) {\n            return callback(e);\n        }\n    });\n};\n\nexports.setProgress = function(el, progress, status) {\n    var bar = el.children[0];\n    var label = el.children[1];\n    progress = Math.floor(progress);\n    if (progress >= 100) {\n        el.className = 'progress success';\n    } else {\n        el.className = 'progress active';\n    }\n    bar.style.width = progress + '%';\n    bar.innerText = progress + '%';\n    if (typeof status !== 'undefined') {\n        label.innerText = status;\n    }\n};\n\nexports.handleLogin = function (done) {\n    var path = $('body').data('path').replace(/\\/$/, '');\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n        $.ajax({\n            url: path,\n            method: 'post',\n            data: {\n                username: $('#login-username').val(),\n                password: $('#login-password').val(),\n                remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n            },\n            success: function () {\n                $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n                    $(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n                    $('#login').off('submit');\n                    $('#login-password').val('');\n                    done();\n                });\n            },\n            error: function (xhr) {\n                $('#login').find('input').prop('disabled', false);\n                exports.shake($('#login-frame'));\n                $('#login-username').select();\n                $('#login-password').val('');\n            },\n            global: false\n        });\n        return false;\n    });\n};\n\nexports.handleError = function (event, xhr, settings, thrownError) {\n    var newToken = Cookies.get('csrf_token');\n    if (settings.headers['X-Csrf-Token'] !== newToken) {\n        $.ajaxSetup({\n            headers: { 'X-Csrf-Token': newToken }\n        });\n        settings.headers['X-Csrf-Token'] = newToken;\n        $.ajax(settings);\n        return;\n    }\n    if (xhr.status === 401) {\n        $('#login-overlay').show();\n\tif ($('#login-username').val() === '') {\n\t    $('#login-username').focus();\n\t} else {\n\t    $('#login-password').focus();\n\t}\n        exports.handleLogin(function () {\n            $('#login-overlay').hide();\n            $.ajax(settings);\n        });\n        return;\n    } else if (typeof xhr.responseJSON !== 'undefined') {\n        alert(xhr.responseJSON.message);\n    } else {\n        alert(xhr.responseText);\n    }\n    exports.shake($('main > .frame'));\n    console.log(event, xhr, settings, thrownError);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/ui.js\n// module id = 2\n// module chunks = 0 1 2 3 4 6 7 8","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/www/blogstep/~/js-cookie/src/js.cookie.js\n// module id = 4\n// module chunks = 0 1 2 3 4 6 7 8","/* \n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\nexports.dirName = dirName;\nexports.fileName = fileName;\nexports.convert = convert;\n\nfunction dirName(path)\n{\n    var path = path.replace(/\\/[^\\/]+$/, '');\n    if (path === '') {\n        return '/';\n    }\n    return path;\n}\n\nfunction fileName(path)\n{\n    return path.replace(/^.*\\//, '');\n}\n\nfunction convert(path, cwd)\n{\n    path = path.trim();\n    if (!path.startsWith('/')) {\n        path = cwd + '/' + path;\n    }\n    var names = path.split('/');\n    var stack = [];\n    for (var i = 0; i < names.length; i++) {\n        if (names[i] === '..') {\n            if (stack.length >= 1) {\n                stack.pop();\n            }\n        } else if (names[i] !== '' && names[i] !== '.') {\n            stack.push(names[i]);\n        }\n    }\n    return '/' + stack.join('/');\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./common/paths.js\n// module id = 5\n// module chunks = 0 1 3 4 5","/*\n * BlogSTEP \n * Copyright (c) 2016 Niels Sonnich Poulsen (http://nielssp.dk)\n * Licensed under the MIT license.\n * See the LICENSE file or http://opensource.org/licenses/MIT for more information.\n */\n\n\nvar $ = require('jquery');\nvar Cookies = require('js-cookie');\nvar ui = require('./common/ui');\nvar paths = require('./common/paths');\n\nwindow.BLOGSTEP = {};\n\nvar apps = {};\n\nfunction Menu(app, title) {\n    this.app = app;\n    this.title = title;\n    this.frame = $('<div><header></header><nav><ul></ul></div>');\n    this.header = this.frame.find('header');\n    this.itemList = this.frame.find('ul');\n    this.header.text(title);\n}\n\nMenu.prototype.addItem = function (label, action) {\n    var button = $('<button/>');\n    button.text(label);\n    if (typeof action === 'string') {\n\tbutton.attr('data-action', action);\n    }\n    var app = this.app;\n    button.click(function () {\n\tapp.activate(action);\n    });\n    var item = $('<li>');\n    item.append(button);\n    this.itemList.append(item);\n};\n\nfunction App(name) {\n    this.name = name;\n    this.state = 'loading';\n    this.frame = null;\n    this.actions = {};\n    this.actionGroups = {};\n    this.keyMap = {};\n    this.menus = [];\n    this.onInit = null;\n    this.onSuspend = null;\n    this.onResume = null;\n    this.onOpen = null;\n    this.onFocus = null;\n    this.onKeydown = null;\n    this.onUnfocus = null;\n    this.onClose = null;\n    this.onResize = null;\n}\n\nApp.prototype.addMenu = function (title) {\n    var menu = new Menu(this, title);\n    this.menus.push(menu);\n    return menu;\n};\n\nApp.prototype.init = function () {\n    if (this.state !== 'loaded') {\n\tconsole.error('init: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'initializing';\n    if (this.onInit !== null) {\n\tthis.onInit(this);\n    }\n    for (var i = 0; i < this.menus.length; i++) {\n\t$('#menu').prepend(this.menus[i].frame);\n    }\n    this.state = 'running';\n};\n\nApp.prototype.keydown = function (e) {\n    if (e.defaultPrevented) {\n\treturn;\n    }\n    var key = '';\n    if (e.ctrlKey) {\n\tkey += 'c-';\n    }\n    if (e.altKey) {\n\tkey += 'a-';\n    }\n    if (e.shiftKey) {\n\tkey += 's-';\n    }\n    if (e.metaKey) {\n\tkey += 'm-';\n    }\n    key += e.key.toLowerCase();\n    if (this.keyMap.hasOwnProperty(key)) {\n\te.preventDefault();\n\tthis.activate(this.keyMap[key]);\n\treturn false;\n    }\n};\n\nApp.prototype.bindKey = function (key, action) {\n    var parts = key.toLowerCase().split(/-|\\+/);\n    var e = {ctrlKey: '', altKey: '', shiftKey: ''};\n    var key = parts[parts.length - 1];\n    for (var i = 0; i < parts.length - 1; i++) {\n\tswitch (parts[i]) {\n\t    case 'c':\n\t\te.ctrlKey = 'c-';\n\t\tbreak;\n\t    case 'a':\n\t\te.altKey = 'a-';\n\t\tbreak;\n\t    case 's':\n\t\te.shiftKey = 's-';\n\t\tbreak;\n\t}\n    }\n    key = e.ctrlKey + e.altKey + e.shiftKey + key;\n    this.keyMap[key] = action;\n};\n\nApp.prototype.defineAction = function (name, callback, groups) {\n    this.actions[name] = callback;\n    this.frame.find('[data-action=\"' + name + '\"]').click(function (e) {\n\te.preventDefault();\n\te.stopPropagation();\n\tcallback();\n\treturn false;\n    });\n    if (typeof groups !== 'undefined') {\n\tgroups.forEach(function (group) {\n\t    if (!this.actionGroups.hasOwnProperty(group)) {\n\t\tthis.actionGroups[group] = [];\n\t    }\n\t    this.actionGroups[group].push(name);\n\t});\n    }\n};\n\nApp.prototype.activate = function (name) {\n    if (typeof name === 'string') {\n\tthis.actions[name]();\n    } else {\n\tname();\n    }\n};\n\nApp.prototype.enableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n\tthis.actionGroups[group].forEach(function (name) {\n\t    this.enableAction(name);\n\t});\n    }\n};\n\nApp.prototype.disableGroup = function (group) {\n    if (this.actionGroups.hasOwnProperty(group)) {\n\tthis.actionGroups[group].forEach(function (name) {\n\t    this.disableAction(name);\n\t});\n    }\n};\n\nApp.prototype.enableAction = function (name) {\n    if (typeof name === 'string') {\n\tthis.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n\tthis.menus.forEach(function (menu) {\n\t    menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', false);\n\t});\n    } else {\n\tname.forEach(this.enableAction, this);\n    }\n};\n\nApp.prototype.disableAction = function (name) {\n    if (typeof name === 'string') {\n\tthis.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n\tthis.menus.forEach(function (menu) {\n\t    menu.frame.find('[data-action=\"' + name + '\"]').attr('disabled', true);\n\t});\n    } else {\n\tname.forEach(this.disableAction, this);\n    }\n};\n\nApp.prototype.open = function () {\n};\n\nApp.prototype.suspend = function () {\n    if (this.state !== 'running') {\n\tconsole.error('suspend: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'suspending';\n    if (this.onSuspend !== null) {\n\tthis.onSuspend(this);\n    }\n    if (this.state === 'suspending') {\n\tthis.frame.hide();\n\tthis.state = 'suspended';\n    }\n};\n\nApp.prototype.resume = function () {\n    if (this.state !== 'suspended') {\n\tconsole.error('resume: unexpected state', this.state, 'app', this.name);\n\treturn;\n    }\n    this.state = 'resuming';\n    if (this.onResume !== null) {\n\tthis.onResume(this);\n    }\n    if (this.state === 'resuming') {\n\tthis.frame.show();\n\tthis.state = 'running';\n    }\n};\n\nBLOGSTEP.PATH = $('body').data('path').replace(/\\/$/, '');\n\nBLOGSTEP.init = function (name, onInit) {\n    apps[name].onInit = onInit;\n    apps[name].init();\n};\n\nBLOGSTEP.run = function (name, args) {\n    load(name);\n};\n\nBLOGSTEP.server = {};\n\nBLOGSTEP.ajax = function (url, method, data, responseType) {\n    var dfr = $.Deferred();\n    \n    var settings = {\n\turl: url,\n\tmethod: method,\n\tdata: data,\n\tdataType: responseType,\n\theaders: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n    };\n    \n    var xhr = $.ajax(settings);\n    xhr.done(dfr.resolve);\n    xhr.fail(function (jqXhr, textStatus, errorThrown) {\n\tconsole.log(jqXhr, textStatus, errorThrown);\n\tvar newToken = Cookies.get('csrf_token');\n\tif (settings.headers['X-Csrf-Token'] !== newToken) {\n\t    settings.headers['X-Csrf-Token'] = newToken;\n\t    if (xhr.status === 400) {\n\t\t$.ajax(settings).then(dfr.resolve, dfr.reject);\n\t\treturn;\n\t    }\n\t}\n\tif (xhr.status === 401) {\n\t    $('#login-overlay').show();\n\t    if ($('#login-username').val() === '') {\n\t\t$('#login-username').focus();\n\t    } else {\n\t\t$('#login-password').focus();\n\t    }\n\t    handleLogin(function () {\n\t\t$('#login-overlay').hide();\n\t\t$.ajax(settings).then(dfr.resolve, dfr.reject);\n\t    });\n\t    return;\n\t} else if (typeof xhr.responseJSON !== 'undefined') {\n\t    alert(xhr.responseJSON.message);\n\t} else if (xhr.responseText !== '') {\n\t    alert(xhr.responseText);\n\t} else {\n\t    alert('Internal error');\n\t    console.error(errorThrown);\n\t}\n\tui.shake($('main > .frame'));\n\t\n\tvar args = Array.prototype.slice.call(arguments);\n\tdfr.rejectWith(xhr, args);\n    });\n    \n    return dfr.promise();\n};\n\nBLOGSTEP.get = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'get', data, responseType);\n};\nBLOGSTEP.post = function (action, data, responseType) {\n    return BLOGSTEP.ajax(BLOGSTEP.PATH + '/api/' + action, 'post', data, responseType);\n};\n\nfunction load(name) {\n    apps[name] = new App(name);\n    BLOGSTEP.get('load', { name: name }, 'html').done(function (data) {\n\tvar $doc = $('<div></div>');\n\t$doc.html(data);\n\tvar $styles = $doc.find('link[rel=\"stylesheet\"]');\n\tvar $scripts = $doc.find('script[src]');\n\tapps[name].frame = $doc.find('.frame');\n\tapps[name].state = 'loaded';\n\t$('head').append($styles);\n\t$('main').append(apps[name].frame);\n\t$scripts.each(function () {\n\t    $.getScript($(this).attr('src'));\n\t});\n    });\n}\n\nfunction handleLogin(done) {\n    $('#login').find('input').prop('disabled', false);\n    $('#login-frame').show();\n    $('#login').submit(function () {\n        $(this).find('input').prop('disabled', true);\n\tBLOGSTEP.post('login', {\n\t    username: $('#login-username').val(),\n\t    password: $('#login-password').val(),\n\t    remember: $('#login-remember').is(':checked') ? { remember: 'remember' } : null\n\t}).done(function () {\n\t    $('#login-frame').css({overflow: 'hidden', whiteSpace: 'no-wrap'}).animate({width: 0}, function () {\n\t\t$(this).hide().css({overflow: '', whiteSpace: '', width: ''});\n\t\t$('#login').off('submit');\n\t\t$('#login-password').val('');\n\t\tdone();\n\t    });\n\t}).fail(function () {\n\t    $('#login').find('input').prop('disabled', false);\n\t    ui.shake($('#login-frame'));\n\t    $('#login-username').select();\n\t    $('#login-password').val('');\n\t});\n        return false;\n    });\n};\n\n$.ajaxSetup({\n    headers: { 'X-Csrf-Token': Cookies.get('csrf_token') }\n});\n\n$(document).ready(function () {\n    BLOGSTEP.get('who-am-i').done(function (data) {\n\t$('#workspace-menu').show();\n\t$('#workspace-menu .username').text(data.username);\n\t\n\t$('#workspace-menu [data-action=\"logout\"]').click(function () {\n\t    BLOGSTEP.post('logout').done(function () {\n\t\tlocation.reload();\n\t    });\n\t});\n\n\t$('#login-username').val(data.username);\n\t$('#login-overlay').addClass('login-overlay-dark');\n\tload('test');\n    });\n});\n\n$(window).resize(function () {\n    for (var name in apps) {\n\tif (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n\t    if (apps[name].onResize !== null) {\n\t\tapps[name].onResize();\n\t    }\n\t}\n    }\n});\n\n$(window).keydown(function (e) {\n    for (var name in apps) {\n\tif (apps.hasOwnProperty(name) && apps[name].state === 'running') {\n\t    apps[name].keydown(e);\n\t}\n    }\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./workspace.js\n// module id = 60\n// module chunks = 3"],"sourceRoot":""}
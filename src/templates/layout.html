<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title j:text="{isset($title) ? $title : 'BlogSTEP'}">BlogSTEP</title>

        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta j:block="meta" />

        <link j:imports="css/main.css;dist/init.js;dist/main.js;css/icons.css" />

    </head>
    <body data-path="{$this->link('')}" data-token="{$token}">

        <aside>
            <div j:block="appmenu"></div>
            <header>
                Workspace (<span j:text="{$user ? $user->getName() : ''}">username</span>)
                <span class="version" j:innertext="{'v' . Blogstep\Main::VERSION}">version</span>
            </header>
            <nav>
                <ul>
                    <li><a j:href="snippet:Files">File system</a></li>
                    <li><a j:href="snippet:Builder">Builder</a></li>
                    <li><a j:href="snippet:Terminal" data-action="terminal">Terminal</a></li>
                    <li><a j:href="snippet:ControlPanel">Control panel</a></li>
                    <li>
                        <form action="{$this->link('snippet:Logout')}" method="post">
                            <input type="hidden" name="request_token" value="{$token}" />
                            <input type="submit" value="Log out" />
                        </form>
                    </li>
                </ul>
            </nav>
        </aside>

        <div id="dock">
            <div class="shortcut">
                <img j:src="asset:img/icons/32/desktop.png" />
                <label>Desktop</label>
            </div>
            <div class="shortcut">
                <img j:src="asset:img/icons/32/trash.png" />
                <label>Trash</label>
            </div>
        </div>

        <main>
            <div j:block="content"></div>
        </main>

        <div id="login-overlay">
            <div class="frame login-frame">
                <div class="frame-header">
                    <div class="frame-header-title">Log in</div>
                </div>
                <div class="frame-content">
                    <form action="{$this->link([])}" method="post" id="login">
                        <input type="hidden" name="request_token" value="{$token}" />
                        <div class="field">
                            <label for="username">Username</label>
                            <input type="text" name="username" id="username" value="{$user ? $user->getName() : ''}" />
                        </div>
                        <div class="field">
                            <label for="password">Password</label>
                            <input type="password" name="password" id="password" />
                        </div>
                        <div class="field remember">
                            <input type="checkbox" name="remember[remember]" value="remember" id="remember_remember" />
                            <label for="remember_remember">Remember</label>
                        </div>
                        <div class="buttons">
                            <button type="submit" title="Log in">
                                <span class="icon icon-unlock">
                                </span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script j:imports />
    </body>
</html>
